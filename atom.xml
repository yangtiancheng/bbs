<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä¸€ä¸ªç©Odooçš„å°ä¼™</title>
  
  <subtitle>æ€»ç»“ä¸€å°ºï¼Œæˆé•¿ä¸€å¯¸</subtitle>
  <link href="/bbs.github.io/atom.xml" rel="self"/>
  
  <link href="https://yangtiancheng.github.io/"/>
  <updated>2019-06-19T04:31:15.453Z</updated>
  <id>https://yangtiancheng.github.io/</id>
  
  <author>
    <name>æ¨å¤©æˆ</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://yangtiancheng.github.io/rewrite-action/"/>
    <id>https://yangtiancheng.github.io/rewrite-action/</id>
    <published>2019-06-19T04:31:15.453Z</published>
    <updated>2019-06-19T04:31:15.453Z</updated>
    
    <content type="html"><![CDATA[<hr><p>title: é‡å†™æºç action<br>date: 2019-06-19 11:07:11<br>tags: Odoo,XML</p><h2 id="categories-Odoo-XML"><a href="#categories-Odoo-XML" class="headerlink" title="categories: Odoo,XML"></a>categories: Odoo,XML</h2><h1 id="é‡å†™æºç actionæˆ–è€…æ›´æ–°recordæ•°æ®æŸ„å±æ€§"><a href="#é‡å†™æºç actionæˆ–è€…æ›´æ–°recordæ•°æ®æŸ„å±æ€§" class="headerlink" title="é‡å†™æºç actionæˆ–è€…æ›´æ–°recordæ•°æ®æŸ„å±æ€§"></a>é‡å†™æºç actionæˆ–è€…æ›´æ–°recordæ•°æ®æŸ„å±æ€§</h1><h2 id="åœºæ™¯ç®€è¿°"><a href="#åœºæ™¯ç®€è¿°" class="headerlink" title="åœºæ™¯ç®€è¿°"></a>åœºæ™¯ç®€è¿°</h2><p>ä¹Ÿè®¸ä¸€ä¸ªæºç çš„èœå•ï¼Œé™åˆ¶äº†å±•ç¤ºçš„å€¼èŒƒå›´ä¸ºid &gt; 100çš„æ•°æ® domain = [(â€˜idâ€™,â€™&gt;â€™,100)]<br>åœ¨æˆ‘ä»¬è‡ªå·±çš„ä¸ªæ€§åŒ–ä»£ç ä¸­ï¼Œå¯èƒ½éœ€è¦å°†æ˜¾ç¤ºèŒƒå›´æ”¹æˆ id &gt; 200ã€‚</p><h2 id="æ“ä½œåŠç†å¿µ"><a href="#æ“ä½œåŠç†å¿µ" class="headerlink" title="æ“ä½œåŠç†å¿µ"></a>æ“ä½œåŠç†å¿µ</h2><ol><li>Odooé€šè¿‡XMLäº§ç”Ÿçš„æ•°æ®ï¼Œä¸ä»…ä»…ä¼šåˆ›å»ºå¯¹åº”çš„æ¨¡å‹è®°å½•æ•°æ®ï¼ŒåŒæ—¶ä¼šå°†æ•°æ®é›†ç»‘å®šåˆ›å»ºä¸€æ¡ir.model.dataçš„æ•°æ®ã€‚</li><li>æˆ‘ä»¬åªéœ€è¦åœ¨è‡ªå·±çš„ä¸ªæ€§åŒ–æ¨¡å—ä¸­é‡å†™å¯¹åº”çš„actionä¿®æ”¹domainå±æ€§å³å¯ï¼Œä½†æ˜¯ç”±äºæ‰€å¤„æ¨¡å—(module)çš„ä¸åŒï¼Œæˆ‘ä»¬é‡å†™çš„actionå¿…é¡»æŒ‡å®šè¦è¦†ç›–çš„æ¨¡å—ã€‚</li><li>æ‰€ä»¥åœ¨å¤–éƒ¨ID-extend_idå‰é¢åŠ ä¸Šmoduleçš„å‰ç¼€ï¼Œå³module.action_extend_idæ ¼å¼å³å¯ã€‚</li></ol><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢å½“å‰actionä¸dataçš„å…³é”®å‚æ•°</span><br><span class="line">select imd.id,imd.module æ‰€å¤„æ¨¡å—,iaw.id åŠ¨ä½œID, iaw.domain åŠ¨ä½œåŸŸ</span><br><span class="line">from ir_model_data imd,ir_act_window iaw</span><br><span class="line">where imd.res_id = iaw.id</span><br><span class="line">and imd.name = &apos;rounding_list_action&apos;;</span><br></pre></td></tr></table></figure><p><img src="/bbs.github.io/rewrite-action/action01.jpg" alt="ä½ æƒ³è¾“å…¥çš„æ›¿ä»£æ–‡å­—"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ‰€å¤„æ¨¡å—(module)ä¸ºæºç account åŸå§‹action--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">record</span> <span class="attr">id</span>=<span class="string">"rounding_list_action"</span> <span class="attr">model</span>=<span class="string">"ir.actions.act_window"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span>Cash Roundings<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"res_model"</span>&gt;</span>account.cash.rounding<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"view_type"</span>&gt;</span>form<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"view_mode"</span>&gt;</span>tree,form<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"domain"</span>&gt;</span>[('id','&gt;',100)]<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"help"</span> <span class="attr">type</span>=<span class="string">"html"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"o_view_nocontent_smiling_face"</span>&gt;</span>Create the first cash rounding<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">record</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ‰€å¤„æ¨¡å—(module)ä¸ºä¸ªæ€§åŒ–my_module --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">record</span> <span class="attr">id</span>=<span class="string">"account.rounding_list_action"</span> <span class="attr">model</span>=<span class="string">"ir.actions.act_window"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span>Cash Roundings<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"res_model"</span>&gt;</span>account.cash.rounding<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"view_type"</span>&gt;</span>form<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"view_mode"</span>&gt;</span>tree,form<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"domain"</span>&gt;</span>[('id','&gt;',200)]<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"help"</span> <span class="attr">type</span>=<span class="string">"html"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"o_view_nocontent_smiling_face"</span>&gt;</span>Create the first cash rounding<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">record</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;p&gt;title: é‡å†™æºç action&lt;br&gt;date: 2019-06-19 11:07:11&lt;br&gt;tags: Odoo,XML&lt;/p&gt;
&lt;h2 id=&quot;categories-Odoo-XML&quot;&gt;&lt;a href=&quot;#categories-Odoo-XML&quot; cla
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>djangoæ–°æ‰‹å…¥é—¨01 - Model</title>
    <link href="https://yangtiancheng.github.io/django%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A801/"/>
    <id>https://yangtiancheng.github.io/djangoæ–°æ‰‹å…¥é—¨01/</id>
    <published>2019-06-12T10:32:58.000Z</published>
    <updated>2019-06-12T07:37:43.907Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Queriesã€ŒæŸ¥è¯¢ã€"><a href="#Queriesã€ŒæŸ¥è¯¢ã€" class="headerlink" title="Queriesã€ŒæŸ¥è¯¢ã€"></a>Queriesã€ŒæŸ¥è¯¢ã€</h1><h2 id="Create-objects-ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€"><a href="#Create-objects-ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€" class="headerlink" title="Create objects ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€"></a>Create objects ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€</h2><p>ä½¿ç”¨modelå®ä¾‹ç±» é€šè¿‡**kwargsèµ‹å€¼åˆ›å»ºå®ä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> blog.models <span class="keyword">import</span> Blog</span><br><span class="line">b = Blog(name=<span class="string">'Beatles Blog'</span>, tagline=<span class="string">'All the latest Beatles news.'</span>)</span><br><span class="line">b.save()</span><br></pre></td></tr></table></figure><h2 id="Saving-changes-to-objects-which-already-in-DB-Normal-UPDATE"><a href="#Saving-changes-to-objects-which-already-in-DB-Normal-UPDATE" class="headerlink" title="Saving changes to objects which already in DB(Normal UPDATE)"></a>Saving changes to objects which already in DB(Normal UPDATE)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b.name = <span class="string">'XXX'</span></span><br><span class="line">b.save()</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Saving-ForeignKey-and-M2m-Fields-Special-Fields-UPDATE"><a href="#Saving-ForeignKey-and-M2m-Fields-Special-Fields-UPDATE" class="headerlink" title="Saving ForeignKey and M2m Fields(Special Fields UPDATE)"></a>Saving ForeignKey and M2m Fields(Special Fields UPDATE)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FK</span></span><br><span class="line"><span class="keyword">from</span> blog.models <span class="keyword">import</span> Blog, Entry</span><br><span class="line">entry = Entry.objects.get(pk=<span class="number">1</span>)</span><br><span class="line">cheese_blog = Blog.objects.get(name=<span class="string">"Cheddar Talk"</span>)</span><br><span class="line">entry.blog = cheese_blog</span><br><span class="line">entry.save()</span><br><span class="line"></span><br><span class="line"><span class="comment"># M2m <span class="doctag">TODO:</span>Use add()</span></span><br><span class="line"><span class="keyword">from</span> blog.models <span class="keyword">import</span> Author</span><br><span class="line">joe = Author.objects.create(name=<span class="string">"Joe"</span>)</span><br><span class="line">entry.authors.add(joe)</span><br><span class="line"></span><br><span class="line"><span class="comment"># M2m Multi add()</span></span><br><span class="line">john = Author.objects.create(name=<span class="string">"John"</span>)</span><br><span class="line">paul = Author.objects.create(name=<span class="string">"Paul"</span>)</span><br><span class="line">george = Author.objects.create(name=<span class="string">"George"</span>)</span><br><span class="line">ringo = Author.objects.create(name=<span class="string">"Ringo"</span>)</span><br><span class="line">entry.authors.add(john, paul, george, ringo)</span><br></pre></td></tr></table></figure><ul><li>Notice: M2mä¸­addçš„objectså¦‚æœç±»å‹é”™è¯¯ï¼ŒDjangoå°†ä¼šæŠ¥é”™ã€‚</li></ul><h2 id="Search-objects"><a href="#Search-objects" class="headerlink" title="Search objects"></a>Search objects</h2><ol><li>class_name.objects ä¸­ objectså°±æ˜¯å½“å‰ç±»çš„Managerï¼Œåˆ‡è®°å®ä¾‹æ— æ³•ä½¿ç”¨objects.</li><li>QuerySetæ˜¯Selectï¼Œè€Œfiltersæ˜¯Whereã€‚</li><li>Class.objects.all() æŸ¥æ‰¾å½“å‰è¡¨çš„æ‰€æœ‰è®°å½•ã€‚</li><li>filter(**kwargs) ç­›é€‰ Entry.objects.filter(pub_date__year=2006) ç­‰ä»· Entry.objects.all().filter(pub_date__year=2006)</li><li>exclude(**kwargs) æ’é™¤ Entry.objects.exclude(pub_date__year=2006) ç­‰ä»· Entry.objects.all().exclude(pub_date__year=2006)</li><li>4å’Œ5å¯ä»¥è¿åœ¨ä¸€èµ·ç”¨ Entry.objects.filter(pub_date__year=2006).exclude(pub_date__year=2007)</li><li>4å’Œ5å°½é‡åˆ†å¼€å¤„ç†ï¼Œç”¨å˜é‡å­˜å‚¨ã€‚</li><li>å®šä¹‰filterå’Œexcludeçš„æ—¶å€™ï¼Œä»£ç å¹¶ä¸ä¼šæ‰§è¡Œï¼Œé™¤éè°ƒç”¨å½“å‰ç­›é€‰é€»è¾‘ æ¯”å¦‚print(X)</li></ol><h2 id="get"><a href="#get" class="headerlink" title="get()"></a>get()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">one_entry = Entry.objects.get(pk=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><ol><li>get()æœ‰ä¸”å¿…é¡»åªèƒ½æ‰¾åˆ°1æ¡è®°å½•ã€‚</li><li>get()çš„ç”¨æ³•å’Œfilter()ç›¸åŒï¼Œä¸åŒçš„æ˜¯å¦‚æœget()è·å–ä¸åˆ°å¯¹è±¡ï¼Œåˆ™ä¼šè¿”å› DoesNotExist å¼‚å¸¸ã€‚</li><li>å¦‚æœè·å–åˆ°å¤šä¸ªè®°å½•ï¼Œåˆ™ä¼šè¿”å› MultipleObjectsReturned å¼‚å¸¸ã€‚</li></ol><ul><li>é™¤è¿‡allã€getã€filterã€exclude æ›´å¤šè¯·æŸ¥é˜…<a href="https://docs.djangoproject.com/en/2.2/ref/models/querysets/#queryset-api" target="_blank" rel="noopener">QuerySet API</a></li></ul><h2 id="Limit-QuerySets"><a href="#Limit-QuerySets" class="headerlink" title="Limit QuerySets"></a>Limit QuerySets</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Entry.objects.all()[Offset:Limit:Step]</span><br><span class="line">Entry.objects.all()[:<span class="number">5</span>]</span><br><span class="line">Entry.objects.all()[:<span class="number">5</span>:<span class="number">10</span>]</span><br><span class="line">Entry.objects.all()[:<span class="number">10</span>:<span class="number">2</span>] <span class="comment"># - ä½¿ç”¨stepä¼šé‡æ–°ä»æ•°æ®åº“æ‰§è¡ŒæŸ¥è¯¢ å…¶ä»–åªæ˜¯querysetsåˆ‡ç‰‡æˆnew querysets.</span></span><br></pre></td></tr></table></figure><h2 id="Field-Lookups"><a href="#Field-Lookups" class="headerlink" title="Field Lookups"></a>Field Lookups</h2><ol><li>field__exact=1 ç­‰ä»·SQL-WHERE: field=1</li><li>field__iexact=1 ä¸åŒºåˆ†å¤§å°å†™</li><li>field__contains=â€™Lennonâ€™ ç­‰ä»·SQL-WHERE:SELECT â€¦ WHERE headline LIKE â€˜%Lennon%â€™;</li><li>field__icontains=â€™Lennonâ€™ ä¸åŒºåˆ†å¤§å°å†™</li><li><p>startswith\endswith\istartswith\iendswithç­‰.</p><pre><code>æ›´å¤šå‚é˜…[é“¾æ¥](https://docs.djangoproject.com/en/2.2/ref/models/querysets/#field-lookups)</code></pre></li><li>æ”¯æŒè·¨è¶Šå…³ç³»ï¼ˆå¤–é”®è¡¨ï¼‰æŒ‡å®š Blog.objects.filter(entry__headline__contains=â€™Lennonâ€™) æ”¯æŒåå‘æœç´¢(å°å†™classåç§°)</li></ol><p>CURRENT ENDSWITH : Spanning multi-valued relationshipsÂ¶<a href="https://docs.djangoproject.com/en/2.2/topics/db/queries/" target="_blank" rel="noopener">é“¾æ¥</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Queriesã€ŒæŸ¥è¯¢ã€&quot;&gt;&lt;a href=&quot;#Queriesã€ŒæŸ¥è¯¢ã€&quot; class=&quot;headerlink&quot; title=&quot;Queriesã€ŒæŸ¥è¯¢ã€&quot;&gt;&lt;/a&gt;Queriesã€ŒæŸ¥è¯¢ã€&lt;/h1&gt;&lt;h2 id=&quot;Create-objects-ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€&quot;&gt;&lt;a href=&quot;#Create-objects-ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€&quot; class=&quot;headerlink&quot; title=&quot;Create objects ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€&quot;&gt;&lt;/a&gt;Create objects ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨modelå®ä¾‹ç±» é€šè¿‡**kwargsèµ‹å€¼åˆ›å»ºå®ä¾‹&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; blog.models &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; Blog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b = Blog(name=&lt;span class=&quot;string&quot;&gt;&#39;Beatles Blog&#39;&lt;/span&gt;, tagline=&lt;span class=&quot;string&quot;&gt;&#39;All the latest Beatles news.&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b.save()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Saving-changes-to-objects-which-already-in-DB-Normal-UPDATE&quot;&gt;&lt;a href=&quot;#Saving-changes-to-objects-which-already-in-DB-Normal-UPDATE&quot; class=&quot;headerlink&quot; title=&quot;Saving changes to objects which already in DB(Normal UPDATE)&quot;&gt;&lt;/a&gt;Saving changes to objects which already in DB(Normal UPDATE)&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;b.name = &lt;span class=&quot;string&quot;&gt;&#39;XXX&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b.save()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Django" scheme="https://yangtiancheng.github.io/categories/Django/"/>
    
    
      <category term="Django" scheme="https://yangtiancheng.github.io/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>gevent+prefork</title>
    <link href="https://yangtiancheng.github.io/gevent-prefork/"/>
    <id>https://yangtiancheng.github.io/gevent-prefork/</id>
    <published>2019-05-19T12:04:58.000Z</published>
    <updated>2019-06-19T04:14:43.041Z</updated>
    
    <content type="html"><![CDATA[<h2 id="os"><a href="#os" class="headerlink" title="os"></a>os</h2><h3 id="os-fork"><a href="#os-fork" class="headerlink" title="os.fork()"></a>os.fork()</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;os&quot;&gt;&lt;a href=&quot;#os&quot; class=&quot;headerlink&quot; title=&quot;os&quot;&gt;&lt;/a&gt;os&lt;/h2&gt;&lt;h3 id=&quot;os-fork&quot;&gt;&lt;a href=&quot;#os-fork&quot; class=&quot;headerlink&quot; title=&quot;os.fork()&quot;&gt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>åŸºç¡€å­—æ®µç”¨æ³•æç¤º</title>
    <link href="https://yangtiancheng.github.io/%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5%E7%94%A8%E6%B3%95%E6%8F%90%E7%A4%BA/"/>
    <id>https://yangtiancheng.github.io/åŸºç¡€å­—æ®µç”¨æ³•æç¤º/</id>
    <published>2019-05-13T18:46:05.000Z</published>
    <updated>2019-05-13T10:49:16.565Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å­—æ®µdefault-function"><a href="#å­—æ®µdefault-function" class="headerlink" title="å­—æ®µdefault=function"></a>å­—æ®µdefault=function</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@api.model</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_get_company</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="number">1</span> == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> self.env.user.company_id.id</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"><span class="comment"># å…¬å¸</span></span><br><span class="line">company_id = fields.Many2one(comodel_name=<span class="string">'res.company'</span>, string=<span class="string">'Company'</span>, help=<span class="string">"Company"</span>, index=<span class="literal">True</span>,</span><br><span class="line">                             default=_get_company)</span><br></pre></td></tr></table></figure><p>æ³¨æ„_get_companyçš„æ–¹æ³•ä¸€èˆ¬ç”¨api.modelè£…é¥°å™¨ä¿®é¥°ï¼Œdefaultçš„å±æ€§æ¥æ”¶å€¼æ˜¯å¯¹åº”æ•°æ®çš„IDï¼Œä¸æ˜¯å¯¹è±¡ï¼Œåˆ‡è®°!!!</p><h1 id="å­—æ®µdomainå‰åç”¨æ³•"><a href="#å­—æ®µdomainå‰åç”¨æ³•" class="headerlink" title="å­—æ®µdomainå‰åç”¨æ³•"></a>å­—æ®µdomainå‰åç”¨æ³•</h1>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å­—æ®µdefault-function&quot;&gt;&lt;a href=&quot;#å­—æ®µdefault-function&quot; class=&quot;headerlink&quot; title=&quot;å­—æ®µdefault=function&quot;&gt;&lt;/a&gt;å­—æ®µdefault=function&lt;/h1&gt;&lt;figure c
      
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€æ˜¾ç¤ºSelectionçš„é€‰é¡¹åŸŸ</title>
    <link href="https://yangtiancheng.github.io/%E5%8A%A8%E6%80%81%E6%98%BE%E7%A4%BASelection%E7%9A%84%E9%80%89%E9%A1%B9%E5%9F%9F/"/>
    <id>https://yangtiancheng.github.io/åŠ¨æ€æ˜¾ç¤ºSelectionçš„é€‰é¡¹åŸŸ/</id>
    <published>2019-04-29T14:07:16.000Z</published>
    <updated>2019-04-29T06:15:51.881Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>ä¸€ä¸ªæ¨¡å‹ï¼Œä¸¤ä¸ªformè§†å›¾ï¼Œå¯¹åº”çš„selectionå­—æ®µå€¼åŸŸä¸åŒ</p><h1 id="ç›´æ¥ä»£ç ä¸Šä»£ç "><a href="#ç›´æ¥ä»£ç ä¸Šä»£ç " class="headerlink" title="ç›´æ¥ä»£ç ä¸Šä»£ç "></a>ç›´æ¥ä»£ç ä¸Šä»£ç </h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">odoo.define(<span class="string">'select_hide.hide_selection_units'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">require</span>) </span>&#123;</span><br><span class="line"><span class="meta">    "use strict"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> registry = <span class="built_in">require</span>(<span class="string">'web.field_registry'</span>);</span><br><span class="line">    <span class="keyword">var</span> relational_fields = <span class="built_in">require</span>(<span class="string">'web.relational_fields'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> FieldSelection = relational_fields.FieldSelection;</span><br><span class="line">    <span class="keyword">var</span> rpc = <span class="built_in">require</span>(<span class="string">'web.rpc'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> select_hide_by_condition = FieldSelection.extend(&#123;</span><br><span class="line">        _renderEdit: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            self = <span class="keyword">this</span>;</span><br><span class="line">            <span class="comment">// model function_model function_name field_name</span></span><br><span class="line">            <span class="keyword">var</span> function_name = self.attrs.function;</span><br><span class="line">            <span class="keyword">var</span> value = <span class="keyword">this</span>.value;</span><br><span class="line">            <span class="keyword">if</span> (self.$el[<span class="number">0</span>].options.length == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.field.type === <span class="string">'selection'</span>) &#123;</span><br><span class="line">                    rpc.query(&#123;</span><br><span class="line">                        <span class="string">"model"</span>: <span class="keyword">this</span>.model,</span><br><span class="line">                        <span class="string">"method"</span>: function_name,</span><br><span class="line">                        <span class="string">"args"</span>: [&#123;<span class="string">'args'</span>: <span class="keyword">this</span>.recordData&#125;],</span><br><span class="line">                    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span> (!!result) &#123;</span><br><span class="line">                            self.$el.empty();</span><br><span class="line">                            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; result.length; i++) &#123;</span><br><span class="line">                                self.$el.append($(<span class="string">'&lt;option/&gt;'</span>, &#123;</span><br><span class="line">                                    value: <span class="built_in">JSON</span>.stringify(result[i][<span class="number">0</span>]),</span><br><span class="line">                                    text: result[i][<span class="number">1</span>]</span><br><span class="line">                                &#125;));</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.field.selection.length; i++) &#123;</span><br><span class="line">                        <span class="keyword">this</span>.$el.append($(<span class="string">'&lt;option/&gt;'</span>, &#123;</span><br><span class="line">                            value: <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.field.selection[i][<span class="number">0</span>]),</span><br><span class="line">                            text: <span class="keyword">this</span>.field.selection[i][<span class="number">1</span>]</span><br><span class="line">                        &#125;));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.field.type === <span class="string">'many2one'</span> &amp;&amp; value) &#123;</span><br><span class="line">                value = value.data.id;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    registry</span><br><span class="line">        .add(<span class="string">'select_hide_by_condition'</span>, select_hide_by_condition);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"source_type"</span> <span class="attr">widget</span>=<span class="string">"select_hide_by_condition"</span> <span class="attr">function</span>=<span class="string">"select_hide_by_condition"</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@api.model</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">select_hide_by_condition</span><span class="params">(self, datas)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    æ¥æºç±»å‹ é€‰æ‹©æ¡†æ•°æ®é™åˆ¶</span></span><br><span class="line"><span class="string">    :param datas: å½“å‰æ•°æ®è¡Œçš„æ‰€æœ‰å­—æ®µä¿¡æ¯</span></span><br><span class="line"><span class="string">    :return: æ–°çš„é€‰æ‹©æ¡†å€¼åŸŸ</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> datas[<span class="string">'args'</span>][<span class="string">'XXX'</span>]:</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            (<span class="string">'table_item'</span>, _(<span class="string">'Table Item'</span>)),</span><br><span class="line">            (<span class="string">'code'</span>, _(<span class="string">'Code'</span>)),</span><br><span class="line">            (<span class="string">'mapping_table'</span>, _(<span class="string">'Mapping Table'</span>)),</span><br><span class="line">        ]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            (<span class="string">''</span>, <span class="string">''</span>),</span><br><span class="line">            (<span class="string">'table_item'</span>, _(<span class="string">'Table Item'</span>)),</span><br><span class="line">            (<span class="string">'code'</span>, _(<span class="string">'Code'</span>)),</span><br><span class="line">            (<span class="string">'mapping_table'</span>, _(<span class="string">'Mapping Table'</span>)),</span><br><span class="line">        ]</span><br></pre></td></tr></table></figure><p><img src="/Users/tc/code/Githubs/bbs/source/images/selection_hide_001.png" alt="æ— é™åˆ¶"><br><img src="/Users/tc/code/Githubs/bbs/source/images/selection_hide_002.png" alt="æœ‰é™åˆ¶"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h1&gt;&lt;p&gt;ä¸€ä¸ªæ¨¡å‹ï¼Œä¸¤ä¸ªformè§†å›¾ï¼Œå¯¹åº”çš„selectionå­—æ®µå€¼åŸŸä¸åŒ&lt;/p&gt;
&lt;h1 id=&quot;ç›´æ¥ä»£ç ä¸Šä»£ç &quot;&gt;&lt;a href=&quot;#ç›´æ¥ä»£ç ä¸Šä»£
      
    
    </summary>
    
      <category term="Odoo,JS,Selection" scheme="https://yangtiancheng.github.io/categories/Odoo-JS-Selection/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>res.users</title>
    <link href="https://yangtiancheng.github.io/res-users/"/>
    <id>https://yangtiancheng.github.io/res-users/</id>
    <published>2019-04-19T10:32:20.000Z</published>
    <updated>2019-04-19T02:35:49.492Z</updated>
    
    <content type="html"><![CDATA[<h1 id="function-has-group"><a href="#function-has-group" class="headerlink" title="function has_group"></a>function has_group</h1><h2 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><p>group_ext_id - ç»„ å¤–éƒ¨ID</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;function-has-group&quot;&gt;&lt;a href=&quot;#function-has-group&quot; class=&quot;headerlink&quot; title=&quot;function has_group&quot;&gt;&lt;/a&gt;function has_group&lt;/h1&gt;&lt;h2 id=&quot;å‚
      
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>modelæ–‡ä»¶</title>
    <link href="https://yangtiancheng.github.io/model%E6%96%87%E4%BB%B6/"/>
    <id>https://yangtiancheng.github.io/modelæ–‡ä»¶/</id>
    <published>2019-04-19T09:26:46.000Z</published>
    <updated>2019-04-20T11:27:31.721Z</updated>
    
    <content type="html"><![CDATA[<h1 id="function-read"><a href="#function-read" class="headerlink" title="function read"></a>function read</h1><h2 id="å‚æ•°ï¼š"><a href="#å‚æ•°ï¼š" class="headerlink" title="å‚æ•°ï¼š"></a>å‚æ•°ï¼š</h2><p>fields - è®°å½•è¿”å›å­—æ®µåˆ—è¡¨<br>load - æš‚æ—¶ä¸çŸ¥</p><h2 id="ç®€ä»‹ï¼š"><a href="#ç®€ä»‹ï¼š" class="headerlink" title="ç®€ä»‹ï¼š"></a>ç®€ä»‹ï¼š</h2><p>Readæ–¹æ³•å…¶å®å°±æ˜¯è¯»æŒ‡å®šselfä¸­å­—æ®µçš„æ•°æ®è®°å½•ï¼Œé€šå¸¸åœ¨pythonä»£ç é‡Œç”¨browseæ–¹æ³•ä»£æ›¿<br>å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸: ç»™å®šçš„è®°å½•å½“å‰ç”¨æˆ·æ²¡æœ‰å¯è¯»çš„æƒé™</p><ol><li>é¦–å…ˆæ£€æŸ¥ç”¨æˆ·å¯¹æ¨¡å‹çš„è®¿é—®æƒé™ check_access_rights</li><li>æ£€æŸ¥ç”¨æˆ·å¯¹å­—æ®µæ¨¡å‹çš„è®¿é—®æƒé™ check_field_access_rights</li></ol><hr><h1 id="function-check-access-rights"><a href="#function-check-access-rights" class="headerlink" title="function check_access_rights"></a>function check_access_rights</h1><h2 id="å‚æ•°ï¼š-1"><a href="#å‚æ•°ï¼š-1" class="headerlink" title="å‚æ•°ï¼š"></a>å‚æ•°ï¼š</h2><p>operation - æ“ä½œæ–¹å¼ read\write\create\unlink<br>raise_exception - å¼‚å¸¸æ˜¯å¦æŠ›å‡º é»˜è®¤t</p><h2 id="ç®€ä»‹ï¼š-1"><a href="#ç®€ä»‹ï¼š-1" class="headerlink" title="ç®€ä»‹ï¼š"></a>ç®€ä»‹ï¼š</h2><p>æŸ¥è¯¢å½“å‰ç”¨æˆ·å¯¹äºå½“å‰æ¨¡å‹æ˜¯å¦æœ‰ç›¸å…³çš„æƒé™</p><hr><h1 id="function-check-field-access-rights"><a href="#function-check-field-access-rights" class="headerlink" title="function check_field_access_rights"></a>function check_field_access_rights</h1><h2 id="å‚æ•°ï¼š-2"><a href="#å‚æ•°ï¼š-2" class="headerlink" title="å‚æ•°ï¼š"></a>å‚æ•°ï¼š</h2><p>operation - æ“ä½œæ–¹å¼ read\write\create\unlink<br>fields - æ£€æŸ¥çš„å­—æ®µ</p><h2 id="ç®€ä»‹ï¼š-2"><a href="#ç®€ä»‹ï¼š-2" class="headerlink" title="ç®€ä»‹ï¼š"></a>ç®€ä»‹ï¼š</h2><p>æ£€æŸ¥å½“å‰ç”¨æˆ·å¯¹ç»™å®šçš„å­—æ®µæ˜¯å¦æœ‰è®¿é—®æƒé™ï¼Œå¦‚æœæ²¡æœ‰æŠ›å‡ºä¾‹å¤–ï¼Œå¦åˆ™å°†ä¼šè¿”å›å­—æ®µåˆ—è¡¨</p><ol><li>è¶…çº§ç®¡ç†å‘˜ç›´æ¥è¿”å›éšå½±çš„å­—æ®µ</li><li>æ™®é€šäººå‘˜ å¯¹äºæ²¡æä¾›fieldså‚æ•°å­—æ®µæ—¶ï¼ŒæŸ¥è¯¢å½“å‰è®°å½•çš„æ‰€æœ‰å­—æ®µ_fields,å¹¶éªŒè¯æ¯ä¸€ä¸ªå­—æ®µæ˜¯å¦æœ‰æ•ˆ(valid)</li><li>å°†æä¾›çš„å­—æ®µåˆ†ä¸º å­˜å‚¨ã€ç»§æ‰¿ã€è®¡ç®— ä¸‰ç§ç±»å‹ï¼Œåˆ‡è®°fieldsä¸­ä¸èƒ½å‡ºç°ä¸å±äºå½“å‰æ¨¡å‹çš„å­—æ®µå</li><li>å¯¹äºå­˜å‚¨å’Œç»§æ‰¿çš„å­—æ®µï¼Œé€šè¿‡æ•°æ®åº“æŸ¥æ‰¾ _read_from_database</li></ol><h2 id="å†…éƒ¨æ–¹æ³•ï¼š"><a href="#å†…éƒ¨æ–¹æ³•ï¼š" class="headerlink" title="å†…éƒ¨æ–¹æ³•ï¼š"></a>å†…éƒ¨æ–¹æ³•ï¼š</h2><h3 id="function-valid"><a href="#function-valid" class="headerlink" title="function valid"></a>function valid</h3><h4 id="å‚æ•°ï¼š-3"><a href="#å‚æ•°ï¼š-3" class="headerlink" title="å‚æ•°ï¼š"></a>å‚æ•°ï¼š</h4><p>fname - å­—æ®µåç§°</p><h4 id="ç®€ä»‹ï¼š-3"><a href="#ç®€ä»‹ï¼š-3" class="headerlink" title="ç®€ä»‹ï¼š"></a>ç®€ä»‹ï¼š</h4><p>é€šè¿‡å­—æ®µæ˜¯å¦æœ‰ç»„æƒé™ï¼Œå¦‚æœæœ‰ï¼Œæ£€æŸ¥ç”¨æˆ·æœ‰æ²¡æœ‰è¿™äº›ç»„æƒé™ user_has_groupsã€‚</p><hr><h1 id="function-user-has-groups"><a href="#function-user-has-groups" class="headerlink" title="function user_has_groups"></a>function user_has_groups</h1><h2 id="å‚æ•°ï¼š-4"><a href="#å‚æ•°ï¼š-4" class="headerlink" title="å‚æ•°ï¼š"></a>å‚æ•°ï¼š</h2><p>groups - (str)å®Œæ•´çš„ç»„å¤–éƒ¨æ•°æ®è®°å½•ï¼Œé€šè¿‡é€—å·åˆ†éš” ä¾‹å¦‚ï¼šbase.group_user,base.group_system,æ¯ä¸€ä¸ªç»„å‰é¢å¯é€‰åŠ æ„Ÿå¹å·â€™!â€™ï¼Œ<br>ä¾‹å¦‚ï¼š!base.group_user,!base.group_system</p><p>è¿”å› - å¦‚æœå½“å‰ç”¨æˆ·æ˜¯ç»™å®šç»„(é!å‰ç¼€)çš„æˆå‘˜ï¼Œå¹¶ä¸”ä¸æ˜¯ä»»ä½•ç»„ç»™å®šå‰ç¼€ç»„(!å‰ç¼€)çš„æˆå‘˜ï¼Œè¿”å›t<br>ç®€å•ç†è§£å°±æ˜¯ï¼šç»™äº†ç»„ï¼Œç”¨æˆ·æ˜¯é!å‰ç¼€ç»„çš„æˆå‘˜ï¼Œå¹¶ä¸”ä¸æ˜¯ä»»ä½•!å‰ç¼€ç»„çš„æˆå‘˜ã€‚</p><h2 id="ç®€ä»‹ï¼š-4"><a href="#ç®€ä»‹ï¼š-4" class="headerlink" title="ç®€ä»‹ï¼š"></a>ç®€ä»‹ï¼š</h2><p>å¦‚æœç”¨æˆ·æ˜¯â€œgroupsâ€ä¸­è‡³å°‘ä¸€ä¸ªç»„çš„æˆå‘˜ï¼Œå¹¶ä¸”â€œgroupsâ€ä¸æ˜¯ä¸­ä»¥â€œ!â€å¼€å¤´çš„ä»»ä½•ç»„çš„æˆå‘˜ï¼Œåˆ™è¿”å›trueï¼<br>é€šå¸¸ç”¨äºè§£æè§†å›¾å’Œæ¨¡å‹å®šä¹‰ä¸­çš„â€œgroupsâ€å±æ€§ã€‚</p><ol><li>é¦–å…ˆå°†groupsæ ¹æ®é€—å·åˆ†å¼€ï¼Œå¯¹æ¯ä¸€ä¸ªç»„å¤–éƒ¨IDå»é™¤ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€‚</li><li>å°†æä¾›çš„groupsåˆ†æˆ!å‰ç¼€ç»„é›†åˆnot_has_groups(æ·»åŠ æ—¶å»æ‰å‰ç¼€!)ï¼Œå’Œæ²¡æœ‰!å‰ç¼€çš„ç»„é›†åˆhas_groupsã€‚</li><li>æ£€æŸ¥not_has_groupsä¸­çš„æ¯ä¸€ä¸ªç»„<br>3.1 å¦‚æœæ˜¯â€™base.group_no_oneâ€™ç»„ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨â€™base.group_no_oneâ€™ç»„ä¸­ï¼Œç¯å¢ƒæ ˆä¸­æ˜¯å¦æ˜¯debugæ¨¡å¼ï¼Œæ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œè¿”å› False ï¼Œå› ä¸ºæ˜¯not_has_groups<br>3.2 å¦‚æœæ˜¯å…¶ä»–ç»„ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨å½“å‰ç»„å†…ï¼Œå¦‚æœåœ¨ï¼Œè¿”å› False</li><li>ä¸Šé¢æ¡ä»¶éƒ½okçš„æƒ…å†µä¸‹ï¼Œæ£€æŸ¥has_groupsä¸­çš„æ¯ä¸€ä¸ªç»„<br>4.1 å¦‚æœæ˜¯â€™base.group_no_oneâ€™ç»„ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨â€™base.group_no_oneâ€™ç»„ä¸­ï¼Œç¯å¢ƒæ ˆä¸­æ˜¯å¦æ˜¯debugæ¨¡å¼ï¼Œæ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œè¿”å› True ï¼Œå› ä¸ºæ˜¯has_groups<br>4.2 å¦‚æœæ˜¯å…¶ä»–ç»„ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨å½“å‰ç»„å†…ï¼Œå¦‚æœåœ¨ï¼Œè¿”å› True </li><li>å¦‚æœæ²¡æœ‰æä¾›groupså‚æ•°å€¼ï¼Œè¿”å› True</li></ol><h1 id="function-read-from-database"><a href="#function-read-from-database" class="headerlink" title="function _read_from_database"></a>function _read_from_database</h1><h2 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><p>field_names - å­˜å‚¨å­—æ®µåç§°åˆ—è¡¨<br>inherited_field_names - ç»§æ‰¿å­—æ®µåç§°åˆ—è¡¨</p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>æŸ¥è¯¢selfå¯¹åº”çš„æ•°æ®åº“å­—æ®µï¼Œå°†ç»“æœå­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€å¦‚æœæœ‰é”™è¯¯ä¹Ÿå­˜åœ¨ç¼“å­˜ä¸­</p><p>å¦‚æœselfæ²¡æœ‰è®°å½•å°±è·³å‡ºï¼Œ</p><h1 id="function-where-calc"><a href="#function-where-calc" class="headerlink" title="function _where_calc"></a>function _where_calc</h1><h2 id="å‚æ•°-1"><a href="#å‚æ•°-1" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><p>domain - åŸŸ<br>active_test - æ˜¯å¦ç”¨activeå­—æ®µç­›é€‰ é»˜è®¤t<br>è¿”å› - QueryæŸ¥è¯¢å¯¹è±¡</p><h2 id="ç®€ä»‹-1"><a href="#ç®€ä»‹-1" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>å¦‚æœæ¨¡å‹æœ‰activeå­—æ®µï¼Œå‚æ•°active_testæ§åˆ¶æ˜¯å¦æ·»åŠ domain -&gt; (â€˜activeâ€™, â€˜=â€™, 1)</p><h1 id="class-expression"><a href="#class-expression" class="headerlink" title="class expression"></a>class expression</h1><h2 id="function-init"><a href="#function-init" class="headerlink" title="function init"></a>function <strong>init</strong></h2><h3 id="å‚æ•°-2"><a href="#å‚æ•°-2" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><p>domain - åŸŸåˆ—è¡¨<br>model - æ¨¡å‹è®°å½•</p><p>### </p><hr><h1 id="function-sudo"><a href="#function-sudo" class="headerlink" title="function sudo"></a>function sudo</h1>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;function-read&quot;&gt;&lt;a href=&quot;#function-read&quot; class=&quot;headerlink&quot; title=&quot;function read&quot;&gt;&lt;/a&gt;function read&lt;/h1&gt;&lt;h2 id=&quot;å‚æ•°ï¼š&quot;&gt;&lt;a href=&quot;#å‚æ•°ï¼š&quot; c
      
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>ä½ ä¸çŸ¥é“çš„Many2many</title>
    <link href="https://yangtiancheng.github.io/%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84Many2many/"/>
    <id>https://yangtiancheng.github.io/ä½ ä¸çŸ¥é“çš„Many2many/</id>
    <published>2019-04-17T19:03:18.000Z</published>
    <updated>2019-04-17T11:13:16.367Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨ä¸€ä¸ªrelation"><a href="#ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨ä¸€ä¸ªrelation" class="headerlink" title="ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨ä¸€ä¸ªrelation"></a>ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨ä¸€ä¸ªrelation</h1><h2 id="1-ä¸¾ä¸ªğŸŒ°"><a href="#1-ä¸¾ä¸ªğŸŒ°" class="headerlink" title="1. ä¸¾ä¸ªğŸŒ°"></a>1. ä¸¾ä¸ªğŸŒ°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_name = <span class="string">"res.groups"</span></span><br><span class="line">users = fields.Many2many(<span class="string">'res.users'</span>, <span class="string">'res_groups_users_rel'</span>, <span class="string">'gid'</span>, <span class="string">'uid'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_name = <span class="string">"res.users"</span></span><br><span class="line">groups_id = fields.Many2many(<span class="string">'res.groups'</span>, <span class="string">'res_groups_users_rel'</span>, <span class="string">'uid'</span>, <span class="string">'gid'</span>)</span><br></pre></td></tr></table></figure><h2 id="2-åˆ†æ"><a href="#2-åˆ†æ" class="headerlink" title="2. åˆ†æ"></a>2. åˆ†æ</h2><p>ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ªå­—æ®µä½¿ç”¨äº†åŒä¸€ä¸ªrelation(res_groups_users_rel),ä¹‹å‰è¯´å¥½çš„relationå”¯ä¸€ ä¸èƒ½å’Œä»»ä½•è¡¨åé‡å¤å—?<br></p><p>å¯¹ï¼Œè¿™ä¹Ÿæ²¡é—®é¢˜ã€‚å…¶å®m2mæœ¬æ¥å°±æ˜¯ä¸¤å¼ è¡¨æ•°æ®å­˜åœ¨çš„ä¸€ç§äº’ç›¸å¤šå…³è”å…³ç³»ï¼Œä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œåªè¦æˆ‘ä»¬å¯¹åº”çš„æ•°æ®ä½ç½®ä¿æŒä¸€è‡´å°±è¡Œã€‚æ•°æ®ä¿æŒä¸€è‡´ï¼Œå°±è¦æ±‚column1å¿…é¡»æ˜¯æœ¬æ¨¡å‹modelçš„æ•°æ®ï¼Œcolumn2å¿…é¡»æ˜¯å…³è”è¡¨æ¨¡å‹comodel_nameçš„æ•°æ®ï¼Œåˆ‡è®°ä¸èƒ½å†™é”™å’¯~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨ä¸€ä¸ªrelation&quot;&gt;&lt;a href=&quot;#ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨ä¸€ä¸ªrelation&quot; class=&quot;headerlink&quot; title=&quot;ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨ä¸€ä¸ªrelation&quot;&gt;&lt;/a&gt;ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨
      
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>ir.rule</title>
    <link href="https://yangtiancheng.github.io/ir-rule/"/>
    <id>https://yangtiancheng.github.io/ir-rule/</id>
    <published>2019-04-17T17:04:58.000Z</published>
    <updated>2019-06-10T12:18:21.463Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯ir-rule"><a href="#ä»€ä¹ˆæ˜¯ir-rule" class="headerlink" title="ä»€ä¹ˆæ˜¯ir.rule"></a>ä»€ä¹ˆæ˜¯ir.rule</h1><p>å‰é¢æˆ‘ä»¬è®²è¿‡äº†æ¨¡å‹è®¿é—®è§„åˆ™ir.model.accessï¼Œè¿™é‡Œçš„ir.ruleæ˜¯<br>æ•°æ®å±è”½è§„åˆ™ï¼Œç®€å•çš„è¯´å°±æ˜¯è°èƒ½çœ‹è§å“ªäº›æ•°æ®ã€‚</p><hr><h2 id="å­—æ®µ"><a href="#å­—æ®µ" class="headerlink" title="å­—æ®µ"></a>å­—æ®µ</h2><p>name - åç§°<br>active - æœ‰æ•ˆæ€§<br>model_id - æ¨¡å‹<br>groups - ç»„<br>domain_force - å¯è®¿é—®æ¡ä»¶åŸŸ<br>perm_read - å¯è¯»<br>perm_write - å¯å†™<br>perm_create - å¯åˆ›<br>perm_unlink - å¯åˆ </p><pre><code>æç¤ºï¼šperm = permission(è®¸å¯)</code></pre><h2 id="æ‰¹é‡å†™data-xmlçš„æƒé™éƒ¨åˆ†"><a href="#æ‰¹é‡å†™data-xmlçš„æƒé™éƒ¨åˆ†" class="headerlink" title="æ‰¹é‡å†™data.xmlçš„æƒé™éƒ¨åˆ†"></a>æ‰¹é‡å†™data.xmlçš„æƒé™éƒ¨åˆ†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    models = [</span><br><span class="line">            <span class="string">'account.account'</span>,</span><br><span class="line">            <span class="string">'account.move'</span>,</span><br><span class="line">            <span class="string">'account.move.line'</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    --  ç”¨è¿™ä¸ªSQLå¯ä»¥æŸ¥åˆ°å¯¹åº” æœ‰å…¬å¸å­—æ®µä¸”ä¸ºcompany_idçš„model</span></span><br><span class="line"><span class="string">        select model</span></span><br><span class="line"><span class="string">        from ir_model_fields imf</span></span><br><span class="line"><span class="string">        where model in </span></span><br><span class="line"><span class="string">        (</span></span><br><span class="line"><span class="string">            'account.account',</span></span><br><span class="line"><span class="string">            'account.move',</span></span><br><span class="line"><span class="string">            'account.move.line',</span></span><br><span class="line"><span class="string">        )</span></span><br><span class="line"><span class="string">        and ttype='many2one'</span></span><br><span class="line"><span class="string">        and name = 'company_id'</span></span><br><span class="line"><span class="string">        and relation = 'res.company';</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    print(<span class="string">'&lt;data noupdate="1"&gt;'</span>)</span><br><span class="line">    <span class="keyword">for</span> model <span class="keyword">in</span> models:</span><br><span class="line">        print(<span class="string">"""</span></span><br><span class="line"><span class="string">        &lt;record id="&#123;0&#125;" model="ir.rule"&gt;</span></span><br><span class="line"><span class="string">            &lt;field name="name"&gt;&#123;1&#125;&lt;/field&gt;</span></span><br><span class="line"><span class="string">            &lt;field name="model_id" ref="&#123;2&#125;"/&gt;</span></span><br><span class="line"><span class="string">            &lt;field name="global" eval="True"/&gt;</span></span><br><span class="line"><span class="string">            &lt;field name="domain_force"&gt;</span></span><br><span class="line"><span class="string">                ['|',('company_id', '=', False),'&amp;amp;', ('company_id', 'child_of', [user.company_id.id]), ('company_id', 'in', user.company_ids.ids)]</span></span><br><span class="line"><span class="string">            &lt;/field&gt;</span></span><br><span class="line"><span class="string">        &lt;/record&gt;"""</span>.format(model_name_transfor_table_name(<span class="string">'rule_'</span>+model),model_name_transfor_table_name(model+<span class="string">'_rule'</span>),model_name_transfor_table_name(<span class="string">'model_'</span>+model)))</span><br><span class="line">    print(<span class="string">'&lt;/data&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è½¬è¡¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">model_name_transfor_table_name</span><span class="params">(model_name)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> model_name.replace(<span class="string">'.'</span>, <span class="string">'_'</span>)</span><br><span class="line">test()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ä»€ä¹ˆæ˜¯ir-rule&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯ir-rule&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ir.rule&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ir.rule&lt;/h1&gt;&lt;p&gt;å‰é¢æˆ‘ä»¬è®²è¿‡äº†æ¨¡å‹è®¿é—®è§„åˆ™ir.model.accessï¼Œè¿™é‡Œçš„ir.rul
      
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>ir.model.access</title>
    <link href="https://yangtiancheng.github.io/ir-model-access/"/>
    <id>https://yangtiancheng.github.io/ir-model-access/</id>
    <published>2019-04-13T18:46:42.000Z</published>
    <updated>2019-04-17T09:03:29.777Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯ir-model-access"><a href="#ä»€ä¹ˆæ˜¯ir-model-access" class="headerlink" title="ä»€ä¹ˆæ˜¯ir.model.access"></a>ä»€ä¹ˆæ˜¯ir.model.access</h2><p>ç®€å•çš„è¯´ï¼ŒERPçš„èµ„æºç®¡ç†ï¼Œå…¶å®ä¸å¤–å››ç§æƒ…å†µï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ï¼Œ<br>é‚£ä¹ˆå¯¹äºç™»å½•ç”¨æˆ·æ¥è¯´ï¼Œä½ æœ‰æƒé™åšè¿™äº›æ“ä½œç ï¼Ÿå¦‚æœä¸åšé™<br>åˆ¶ï¼Œå²‚ä¸æ˜¯éšä¾¿çš„ä¸€ä¸ªç”¨æˆ·å°±èƒ½è½»æ˜“çš„åŠ¨ç³»ç»Ÿçš„æ•°æ®ï¼Œè¿™æ˜¯å¾ˆ<br>å¯æ€•çš„ã€‚</p><hr><p>æ¨¡å‹æƒé™æ–‡ä»¶æœ‰name,active,model_id(éTransientModel<br>æ¨¡å‹),group_id,perm_read,perm_write,perm_create,<br>perm_unlinkå‡ ä¸ªå­—æ®µã€‚<br><a id="more"></a></p><h3 id="function-check-groups"><a href="#function-check-groups" class="headerlink" title="function check_groups"></a>function check_groups</h3><p>å‚æ•°ï¼š<br>group =&gt; module.group_ext_id</p><p>æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦åœ¨æ‰€æä¾›çš„ç»„é‡Œï¼Œè¿”å›t/f</p><hr><h3 id="function-check-group"><a href="#function-check-group" class="headerlink" title="function check_group"></a>function check_group</h3><p>å‚æ•°ï¼š<br>model - æ¨¡å‹å(å¦‚æœä¼ å…¥æ¨¡å‹å¯¹è±¡ å°†æ¨¡å‹å model.name å–å‡º)<br>mode - æ£€æŸ¥æ–¹å¼<br>group_ids - ç»„</p><p>æ£€æŸ¥æ”¹æ¨¡å‹modelæ˜¯å¦å¯ä»¥è¢«æä¾›çš„ç»„group_ids æˆ– ç»„ä¸ºç©ºæ—¶è®¿é—®ï¼Œè¿”å›t/f</p><hr><h3 id="function-group-names-with-access"><a href="#function-group-names-with-access" class="headerlink" title="function group_names_with_access"></a>function group_names_with_access</h3><p>å‚æ•°ï¼š<br>model_name - æ¨¡å‹å<br>access_mode - æ£€æŸ¥æ–¹å¼</p><p>æŸ¥è¯¢å½“å‰æ¨¡å‹æ˜¯å¦æœ‰æ»¡è¶³æ£€æŸ¥æ–¹å¼access_modeçš„ç»„è®°å½•ï¼Œå¦‚æœæœ‰ï¼Œå°†è¿™äº›ç»„ä»¥ module_category/group_nameçš„åˆ—è¡¨å½¢å¼è¿”å›</p><hr><h3 id="function-check"><a href="#function-check" class="headerlink" title="function check"></a>function check</h3><h4 id="1-adminç”¨æˆ·"><a href="#1-adminç”¨æˆ·" class="headerlink" title="1. adminç”¨æˆ·"></a>1. adminç”¨æˆ·</h4><p>è¶…çº§ç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æƒé™ è·³è¿‡æ ¡éªŒ</p><h4 id="2-æ™®é€šç”¨æˆ·"><a href="#2-æ™®é€šç”¨æˆ·" class="headerlink" title="2. æ™®é€šç”¨æˆ·"></a>2. æ™®é€šç”¨æˆ·</h4><ol><li><p>å¯¹äºTransientModelæ¨¡å‹,æ‰€æœ‰ç”¨æˆ·å¯è·³è¿‡æ ¡éªŒ</p></li><li><p>å¯¹äºæ™®é€šæ¨¡å‹ï¼Œæ£€æŸ¥ç”¨æˆ·æƒé™ç»„æ˜¯å¦å­˜åœ¨ç¬¦åˆæ­¤æƒé™çš„æœ‰æ•ˆè®°å½•<br>å¦‚æœæ²¡æœ‰ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨ç»„ä¸ºç©ºçš„æœ‰æ•ˆæƒé™è®°å½•ã€‚å¦‚æœæ²¡æœ‰æŸ¥æ‰¾åˆ°è®°å½•ï¼Œ<br>æŸ¥ä¸€ä¸‹ç³»ç»Ÿä¸­æ˜¯å¦æœ‰å¯ä»¥è®¿é—®è¯¥modelçš„ç»„!</p></li></ol><p>å¦‚æœæœ‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_(&quot;Sorry, you are not allowed to [access/modify/create/delete] this document.&quot;),</span><br><span class="line">åªæœ‰ä»¥ä¸‹è®¿é—®ç­‰çº§(ç»„)çš„ç”¨æˆ·å¯æ‰åšè¿™ï¼šcategory_id1/group1ï¼Œcategory_id2/group2...</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæ²¡æœ‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_(&quot;Sorry, you are not allowed to [access/modify/create/delete] this document.&quot;),</span><br><span class="line">å¦‚æœä½ è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œè¯·è”ç³»ä½ çš„ç³»ç»Ÿç®¡ç†å‘˜ã€‚</span><br></pre></td></tr></table></figure><hr><h3 id="ç±»å˜é‡"><a href="#ç±»å˜é‡" class="headerlink" title="ç±»å˜é‡"></a>ç±»å˜é‡</h3><p>_cache_clearing_methods = set()</p><hr><h3 id="function-register-cache-clearing-method"><a href="#function-register-cache-clearing-method" class="headerlink" title="function register_cache_clearing_method"></a>function register_cache_clearing_method</h3><p>å‚æ•°ï¼š<br>model - æ¨¡å‹å<br>method - æ–¹æ³•å</p><p>å°†(model,method)æ·»åŠ åˆ°ç±»å˜é‡__cache_clearing_methodsä¸­</p><hr><h3 id="function-unregister-cache-clearing-method"><a href="#function-unregister-cache-clearing-method" class="headerlink" title="function unregister_cache_clearing_method"></a>function unregister_cache_clearing_method</h3><p>å‚æ•°ï¼š<br>model - æ¨¡å‹å<br>method - æ–¹æ³•å</p><p>å°†(model,method)ä»ç±»å˜é‡__cache_clearing_methodsä¸­ç§»é™¤</p><hr><h3 id="function-call-cache-clearing-methods"><a href="#function-call-cache-clearing-methods" class="headerlink" title="function call_cache_clearing_methods"></a>function call_cache_clearing_methods</h3><ol><li>æ¸…ç©ºå½“å‰ir.model.accessæ¨¡å‹è®°å½•çš„ç¼“å­˜</li><li>æ¸…ç©ºir.model.accessçš„checkæ–¹æ³•çš„ç¼“å­˜</li><li>__cache_clearing_methodså˜é‡ä¸­çš„æ¨¡å‹æ–¹æ³• ç»Ÿä¸€æ‰§è¡Œä¸€é(æµ‹è¯•çœ‹éƒ½æ˜¯åœ¨æ¸…é™¤ç¼“å­˜)</li></ol><hr><h3 id="function-create-write-unlink"><a href="#function-create-write-unlink" class="headerlink" title="function create/write/unlink"></a>function create/write/unlink</h3><p>éƒ½ä¼šå…ˆæ‰§è¡Œcall_cache_clearing_methodæ¸…ä¸€éç¼“å­˜ï¼Œå†æ‰§è¡ŒORMæ“ä½œã€‚</p><hr><h2 id="é—®é¢˜ï¼šæœ€åçš„æ¸…æ¥šç¼“å­˜éƒ¨åˆ†ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ"><a href="#é—®é¢˜ï¼šæœ€åçš„æ¸…æ¥šç¼“å­˜éƒ¨åˆ†ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ" class="headerlink" title="é—®é¢˜ï¼šæœ€åçš„æ¸…æ¥šç¼“å­˜éƒ¨åˆ†ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ"></a>é—®é¢˜ï¼šæœ€åçš„æ¸…æ¥šç¼“å­˜éƒ¨åˆ†ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</h2><p>å¸Œæœ›æœ‰çŸ¥é“çš„odooerå¸®å¿™æŒ‡ç‚¹è¿·æ´¥~</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä»€ä¹ˆæ˜¯ir-model-access&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯ir-model-access&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ir.model.access&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ir.model.access&lt;/h2&gt;&lt;p&gt;ç®€å•çš„è¯´ï¼ŒERPçš„èµ„æºç®¡ç†ï¼Œå…¶å®ä¸å¤–å››ç§æƒ…å†µï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ï¼Œ&lt;br&gt;é‚£ä¹ˆå¯¹äºç™»å½•ç”¨æˆ·æ¥è¯´ï¼Œä½ æœ‰æƒé™åšè¿™äº›æ“ä½œç ï¼Ÿå¦‚æœä¸åšé™&lt;br&gt;åˆ¶ï¼Œå²‚ä¸æ˜¯éšä¾¿çš„ä¸€ä¸ªç”¨æˆ·å°±èƒ½è½»æ˜“çš„åŠ¨ç³»ç»Ÿçš„æ•°æ®ï¼Œè¿™æ˜¯å¾ˆ&lt;br&gt;å¯æ€•çš„ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ¨¡å‹æƒé™æ–‡ä»¶æœ‰name,active,model_id(éTransientModel&lt;br&gt;æ¨¡å‹),group_id,perm_read,perm_write,perm_create,&lt;br&gt;perm_unlinkå‡ ä¸ªå­—æ®µã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>SQLçš„!=å’Œis not NULL</title>
    <link href="https://yangtiancheng.github.io/SQL%E7%9A%84-%E5%92%8Cis-not-NULL/"/>
    <id>https://yangtiancheng.github.io/SQLçš„-å’Œis-not-NULL/</id>
    <published>2019-04-08T15:06:19.000Z</published>
    <updated>2019-04-17T03:15:28.774Z</updated>
    
    <content type="html"><![CDATA[<h1 id><a href="#" class="headerlink" title="!="></a>!=</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">type</span>,*</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">type</span> != <span class="string">'normal'</span></span><br></pre></td></tr></table></figure><p>SQLçš„Whereè¯­å¥å¦‚æœå‡ºç°!=åˆ¤æ–­ç¬¦ï¼ŒDBä¼šå°†æ•°æ®ä¸­typeæœ‰å€¼ä¸”ä¸ç­‰äºnormalçš„è®°å½•æŸ¥å‡ºï¼Œ<br>ä½†å¦‚æœè®°å½•ä¸­å¯¹åº”çš„typeå­—æ®µæ˜¯NULLçš„è¯ï¼Œæ•°æ®å°†ä¸ä¼šè¢«æŸ¥å‡ºæ¥ã€‚</p><h1 id="is-not-NULL"><a href="#is-not-NULL" class="headerlink" title="is not NULL"></a>is not NULL</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">type</span>,*</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">type</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">NULL</span></span><br></pre></td></tr></table></figure><p>å°†æŸ¥å‡ºtypeéç©ºçš„è®°å½•</p><p><b>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„ç­›é€‰æ•°æ®æ—¶ï¼Œæœ€å¥½ä¸è¦ç”¨!=ï¼Œé™¤éç‰¹åˆ«ç¡®è®¤è¿™ä¸ªå­—æ®µä¸€å®šæ˜¯å¿…è¾“å­—æ®µã€‚</b></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;!=&quot;&gt;&lt;/a&gt;!=&lt;/h1&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;li
      
    
    </summary>
    
      <category term="SQL" scheme="https://yangtiancheng.github.io/categories/SQL/"/>
    
    
      <category term="SQL" scheme="https://yangtiancheng.github.io/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>Odoo æµ…è°ˆOdooæä¾›çš„é™„ä»¶æœºåˆ¶</title>
    <link href="https://yangtiancheng.github.io/Odoo-%E6%B5%85%E8%B0%88Odoo%E6%8F%90%E4%BE%9B%E7%9A%84%E9%99%84%E4%BB%B6%E6%9C%BA%E5%88%B6/"/>
    <id>https://yangtiancheng.github.io/Odoo-æµ…è°ˆOdooæä¾›çš„é™„ä»¶æœºåˆ¶/</id>
    <published>2019-04-06T09:13:38.000Z</published>
    <updated>2019-04-17T03:15:28.792Z</updated>
    
    <content type="html"><![CDATA[<p>Odooæä¾›çš„é™„ä»¶æœºåˆ¶</p><p><img src="https://img-blog.csdn.net/20180326101437554?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5NjU0MzI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><a id="more"></a><p>å­˜å‚¨ä½ç½®å¯é…ç½®ï¼š<br>&emsp;&emsp;é€šè¿‡ è®¾ç½®-å‚æ•°-ç³»ç»Ÿå‚æ•° å®šä¹‰çš„å…³é”®å­—ir_attachment.locationæ¥æ§åˆ¶é™„ä»¶çš„å­˜å‚¨æ–¹å¼ã€‚<br><img src="https://img-blog.csdn.net/2018032610183484?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5NjU0MzI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><ul><li>1.å¦‚æœæœªç»´æŠ¤è®°å½•æˆ–è€…ç»´æŠ¤è®°å½•å€¼ä¸ä¸ºdbï¼Œé»˜è®¤å­˜å‚¨è·¯å¾„ä¸ºåº”ç”¨æœåŠ¡å™¨ä¸Šçš„/var/lib/odoo/filestore/æ•°æ®åº“åç§°/æ–‡ä»¶å¤¹,ä¾‹å¦‚/var/lib/odoo/filestore/ 868/9cã€‚</li></ul><ul><li>2.å°†æ–‡ä»¶çš„è·¯å¾„å†™å…¥store_fnameå­—æ®µï¼Œfile_sizeè¡¨ç¤ºæ–‡ä»¶å¤§å°ï¼Œdb_datasè¡¨ç¤ºæ–‡ä»¶ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨åœ¨æ•°æ®åº“ä¸­(è¿™é‡Œä¸ºç©º)ã€‚</li></ul><ul><li>3.å¦‚æœç»´æŠ¤è®°å½•å€¼ä¸ºdbï¼Œåˆ™ä»¥binaryçš„å½¢å¼å­˜å‚¨åœ¨æ•°æ®åº“è¡¨db_datasä¸­ã€‚</li></ul><h2 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h2><ol><li><p>å¯é…ç½®å­˜å‚¨æ–¹å¼:<br>æˆ‘ä»¬çš„æ‰€æœ‰é™„ä»¶æ•°æ®å¯ä»¥é€‰æ‹©ä¿å­˜åœ¨æ•°æ®åº“db_datasä¸­ï¼Œè¿˜æ˜¯åº”ç”¨æœåŠ¡å™¨/var/lib/odoo/æ•°æ®åº“å/sha1[:2]ä¸­ã€‚<br>å¦‚æœä¿å­˜åœ¨åº”ç”¨æœåŠ¡å™¨ä¸­ï¼Œç³»ç»Ÿçš„æ•°æ®åº“ä¼šæ›´åŠ è½»ä¾¿ï¼Œè€Œä¸”é™„ä»¶ä½¿ç”¨base64ç¼–ç æ–‡ä»¶ï¼Œé€šè¿‡sha1æ–¹å¼ç»™æ¯ä¸€ä¸ªé™„ä»¶æ–‡ä»¶æ ‡å®šä¸ºå”¯ä¸€çš„è®°å½•datas_fnameï¼Œå¦‚æœä¸Šä¼ ç›¸åŒçš„æ–‡ä»¶ï¼Œæ•°æ®åº“store_fnameè®°å½•åªéœ€è¦æ”¾å…¥æ–‡ä»¶çš„æœåŠ¡å™¨è½¯åœ°å€ï¼Œä¸éœ€è¦å†å°†æ–‡ä»¶ä¸Šä¼ ï¼ŒåŠ é€Ÿäº†ä¸Šä¼ çš„æ•ˆç‡ã€‚</p></li><li><p>åŒä¸€è®°å½•å•æˆ–ä¸åŒè®°å½•å•ï¼Œç›¸åŒçš„æ–‡ä»¶åªä¼šä¸Šä¼ ä¸€æ¬¡:<br>æ•°æ®åº“è®°å½•åªéœ€è¦æ”¾å…¥ç›¸å…³çš„è®¿é—®åœ°å€ï¼Œéœ€è¦æ—¶ç›´æ¥è¯»å–ï¼Œé˜²æ­¢å¤šä½™çš„ç©ºé—´æµå¤±ã€‚HRPç°æœ‰çš„èµ„è´¨çš„é™„ä»¶ä¸Šä¼ æ–¹å¼ï¼Œé‡‡ç”¨æ•°æ®åº“ç›´æ¥å­˜å–äºŒè¿›åˆ¶æ–‡ä»¶å½¢å¼ï¼Œä¸Šä¼ æ–‡ä»¶å°±æ¥æ”¶ï¼Œä¸æ ¡éªŒï¼Œä¸æ™ºèƒ½ï¼Œæ•°æ®å†—ä½™ï¼Œä½¿å¾—æ•°æ®åº“è‡ƒè‚¿ä¸å ªã€‚</p></li><li><p>æƒé™æ£€æŸ¥-æ›´å®‰å…¨ï¼š<br>å¯¹ç³»ç»Ÿé™„ä»¶çš„æ¯ä¸€ç§ç±»å‹çš„æ“ä½œï¼Œodooæºç é™„ä»¶æœºåˆ¶éƒ½ä¼šæ£€éªŒæƒé™æ˜¯å¦æ»¡è¶³ï¼Œåªæœ‰é™„ä»¶ä¸Šä¼ è€…ã€è¶…çº§ç®¡ç†å‘˜ã€ç®¡ç†ç»„ç”¨æˆ·æ‰å¯ä»¥å¯¹ç›¸å…³é™„ä»¶è¿›è¡Œé«˜çº§æ“ä½œï¼Œä¿è¯äº†æ“ä½œé™„ä»¶çš„å®‰å…¨æ€§ã€‚</p></li></ol><ol start="4"><li><p>ä¸æ˜“ä¸¢å¤±:<br>é€‰æ‹©åº”ç”¨æœåŠ¡å™¨ä¿å­˜é™„ä»¶ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œå½“æ•°æ®åº“æ•°æ®ä¸¢å¤±æˆ–æŸåæ—¶ï¼Œå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„é™„ä»¶ä¸ä¼šå—åˆ°æ³¢åŠï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚</p></li><li><p>å¼‚æ­¥å¤‡ä»½ï¼š<br>è™½ç„¶çœ‹èµ·æ¥æ—¢è¦å¤‡ä»½æ•°æ®åº“ï¼Œåˆè¦å¤‡ä»½åº”ç”¨æœåŠ¡å™¨çš„é™„ä»¶éƒ¨åˆ†ï¼Œæ“ä½œæ­¥éª¤å˜å¤šäº†ã€‚ä½†åˆ†æ­¥å¤‡ä»½ä¿è¯äº†æ•°æ®åº“å¿«é€Ÿå¤‡ä»½ï¼ŒæœåŠ¡å™¨é™„ä»¶ä¼ è¾“è¦æ±‚å¹¶ä¸åƒæ•°æ®åº“å¤‡ä»½æ—¶ï¼Œè¦æ±‚å¿«é€Ÿã€è½»ä¾¿ï¼Œæ‰€ä»¥è¿™æ ·çš„æœºåˆ¶æ›´é€‚åˆ</p></li></ol><p>###å¦‚æœ‰ç†è§£é”™è¯¯çš„åœ°æ–¹ï¼Œè¯·å¤§å®¶æŒ‡æ­£.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Odooæä¾›çš„é™„ä»¶æœºåˆ¶&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdn.net/20180326101437554?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI5NjU0MzI1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>Odoo12-M2må­—æ®µæ·»åŠ ä¸€è¡Œå¼¹å‡ºæ¡†å†…å®¹ä¸ªæ€§åŒ–æŒ‡å®šè§†å›¾+actionè‡ªå®šä¹‰æŒ‡å®šè§†å›¾</title>
    <link href="https://yangtiancheng.github.io/Odoo12-M2m%E5%AD%97%E6%AE%B5%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A1%8C%E5%BC%B9%E5%87%BA%E6%A1%86%E5%86%85%E5%AE%B9%E4%B8%AA%E6%80%A7%E5%8C%96%E6%8C%87%E5%AE%9A%E8%A7%86%E5%9B%BE-action%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E5%AE%9A%E8%A7%86%E5%9B%BE/"/>
    <id>https://yangtiancheng.github.io/Odoo12-M2må­—æ®µæ·»åŠ ä¸€è¡Œå¼¹å‡ºæ¡†å†…å®¹ä¸ªæ€§åŒ–æŒ‡å®šè§†å›¾-actionè‡ªå®šä¹‰æŒ‡å®šè§†å›¾/</id>
    <published>2019-04-06T08:58:57.000Z</published>
    <updated>2019-04-17T05:00:06.015Z</updated>
    
    <content type="html"><![CDATA[<p>m2må­—æ®µçš„contextå±æ€§æ¥æ”¶ä¸€ä¸ª tree_view_ref å±æ€§ï¼Œé€šè¿‡å®ƒæŒ‡å®šç‰¹å®šçš„æ‰“å¼€è§†å›¾å³å¯ã€‚<br>ä¸¾ä¸ªä¾‹å­ï¼š</p><h3 id="1-é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡å‹çš„treeè§†å›¾ï¼š"><a href="#1-é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡å‹çš„treeè§†å›¾ï¼š" class="headerlink" title="1. é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡å‹çš„treeè§†å›¾ï¼š"></a>1. é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡å‹çš„treeè§†å›¾ï¼š</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Tree M2M Select View--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">record</span> <span class="attr">model</span>=<span class="string">"ir.ui.view"</span> <span class="attr">id</span>=<span class="string">"&#123;tree_id&#125;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span>Tree M2M Select View<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"model"</span>&gt;</span>&#123;model_name&#125;<span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"priority"</span>  <span class="attr">eval</span>=<span class="string">"20"</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"arch"</span> <span class="attr">type</span>=<span class="string">"xml"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">tree</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"active_flag"</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tree</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">record</span>&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><p>æ³¨æ„ï¼š<br>&emsp;&emsp;æœ€å¥½æŒ‡å®šä¸€ä¸ªpriorityå±æ€§å€¼&gt;16ï¼Œå¦åˆ™å¯èƒ½ä¼šå°†ä½ åŸæ¥modelçš„treeè§†å›¾ä¹Ÿè·³è½¬åˆ°æ–°å†™çš„treeä¸Šäº†(odoo8ä¸­ä¼šå‡ºç°è¿™ä¸ªæƒ…å†µ é»˜è®¤å€¼16 åŠ è½½é»˜è®¤å–æœ€æ–°çš„è§†å›¾)ï¼›æˆ–è€…ï¼Œä½ å¯ä»¥åœ¨actionä¸ŠæŒ‡å®šä¸€ä¸ªview_ids,ä¿è¯åŸç”Ÿçš„è§†å›¾ä¸€å®šè¿æ¥åˆ°å¯¹åº”çš„ç±»å‹è§†å›¾ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"view_ids"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">eval</span>=<span class="string">"[(5, 0, 0),</span></span></span><br><span class="line"><span class="tag"><span class="string">                      (0, 0, &#123;'view_mode': 'tree', 'view_id': ref('&#123;module_name&#125;.&#123;tree_view_id&#125;')&#125;),</span></span></span><br><span class="line"><span class="tag"><span class="string">                      (0, 0, &#123;'view_mode': 'form', 'view_id': ref('&#123;module_name&#125;.&#123;form_view_id&#125;')&#125;)]"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="2-åœ¨å¯¹åº”çš„m2må­—æ®µä¸ŠæŒ‡å®šè§†å›¾"><a href="#2-åœ¨å¯¹åº”çš„m2må­—æ®µä¸ŠæŒ‡å®šè§†å›¾" class="headerlink" title="2. åœ¨å¯¹åº”çš„m2må­—æ®µä¸ŠæŒ‡å®šè§†å›¾"></a>2. åœ¨å¯¹åº”çš„m2må­—æ®µä¸ŠæŒ‡å®šè§†å›¾</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"element_ids"</span> <span class="attr">context</span>=<span class="string">"&#123;'tree_view_ref': '&#123;module_name&#125;.&#123;tree_id&#125;'&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç®€å•çš„æ€»ç»“ï¼Œå°±åˆ°è¿™é‡Œå§ï¼Œå¤§å®¶å¦‚æœæœ‰æ›´å¥½çš„æ–¹å¼è¯·åˆ†äº«ç»™æˆ‘~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;m2må­—æ®µçš„contextå±æ€§æ¥æ”¶ä¸€ä¸ª tree_view_ref å±æ€§ï¼Œé€šè¿‡å®ƒæŒ‡å®šç‰¹å®šçš„æ‰“å¼€è§†å›¾å³å¯ã€‚&lt;br&gt;ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;h3 id=&quot;1-é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡å‹çš„treeè§†å›¾ï¼š&quot;&gt;&lt;a href=&quot;#1-é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡å‹çš„treeè§†å›¾ï¼š&quot; class=&quot;headerlink&quot; title=&quot;1. é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡å‹çš„treeè§†å›¾ï¼š&quot;&gt;&lt;/a&gt;1. é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡å‹çš„treeè§†å›¾ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!--Tree M2M Select View--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;model&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;ir.ui.view&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;&amp;#123;tree_id&amp;#125;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Tree M2M Select View&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;model&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;#123;model_name&amp;#125;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;priority&quot;&lt;/span&gt;  &lt;span class=&quot;attr&quot;&gt;eval&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;20&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;arch&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;xml&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;tree&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;active_flag&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;tree&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;field&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;record&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
      <category term="XML" scheme="https://yangtiancheng.github.io/categories/Odoo/XML/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
      <category term="XML" scheme="https://yangtiancheng.github.io/tags/XML/"/>
    
  </entry>
  
  <entry>
    <title>Odoo12çš„æ•°æ®åº“è¡¨çº¦æŸå˜åŒ–æ—¶å¦‚ä½•æ›´æ–°çº¦æŸ(_sql_constraints)</title>
    <link href="https://yangtiancheng.github.io/Odoo12%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BA%A6%E6%9D%9F%E5%8F%98%E5%8C%96%E6%97%B6%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%E7%BA%A6%E6%9D%9F-sql-constraints/"/>
    <id>https://yangtiancheng.github.io/Odoo12çš„æ•°æ®åº“è¡¨çº¦æŸå˜åŒ–æ—¶å¦‚ä½•æ›´æ–°çº¦æŸ-sql-constraints/</id>
    <published>2019-04-06T08:52:39.000Z</published>
    <updated>2019-04-17T03:15:28.810Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸¤ç§æ–¹å¼ï¼š</p><h3 id="1-è¦†ç›–é‡å†™"><a href="#1-è¦†ç›–é‡å†™" class="headerlink" title="1. è¦†ç›–é‡å†™"></a>1. è¦†ç›–é‡å†™</h3><pre><code>ä¸¾ä¸ªğŸŒ°ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># odooæºç é…±ç´«</span></span><br><span class="line">_sql_constraints = [</span><br><span class="line">       (<span class="string">'code_and_name'</span>,</span><br><span class="line">        <span class="string">'UNIQUE(code,name)'</span>,</span><br><span class="line">        _(<span class="string">"Code and Name must be unique!"</span>)),</span><br><span class="line">   ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç°åœ¨å˜æˆäº† code + company å”¯ä¸€çº¦æŸ</span></span><br><span class="line"><span class="comment"># å¦‚æœå“¦æˆ‘ä»¬ä¸ä»‹æ„uniqueçš„åœ¨æ•°æ®åº“ä¸­çš„åç§° æˆ‘ä»¬å¯ä»¥é…±ç´«å†™</span></span><br><span class="line">_sql_constraints = [</span><br><span class="line">       (<span class="string">'code_and_name'</span>,</span><br><span class="line">        <span class="string">'UNIQUE(code,company_id)'</span>,</span><br><span class="line">        _(<span class="string">"Code and Company must be unique!"</span>)),</span><br><span class="line">   ]</span><br><span class="line"><span class="comment"># å³åç§°ç›¸åŒï¼Œç›´æ¥è¦†ç›– å¯ä»¥å–æ•°æ®åº“ä¸­æŸ¥çœ‹è¡¨çš„uniqueé€‰é¡¹ </span></span><br><span class="line">![è¦†ç›–é‡å†™](https://img-blog.csdnimg.cn/<span class="number">20190311140149173.</span>png)</span><br></pre></td></tr></table></figure></code></pre><a id="more"></a>    <h3 id="2-æŸ¥è¯¢åˆ é™¤å¹¶æ–°å¢"><a href="#2-æŸ¥è¯¢åˆ é™¤å¹¶æ–°å¢" class="headerlink" title="2. æŸ¥è¯¢åˆ é™¤å¹¶æ–°å¢"></a>2. æŸ¥è¯¢åˆ é™¤å¹¶æ–°å¢</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># odooæºç é…±ç´«(account.account)</span></span><br><span class="line">  _sql_constraints = [</span><br><span class="line">       (<span class="string">'code_company_uniq'</span>, </span><br><span class="line">       <span class="string">'unique (code,company_id)'</span>, </span><br><span class="line">       <span class="string">'The code of the account must be unique per company !'</span>)</span><br><span class="line">   ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢åˆ é™¤å¹¶æ–°å¢é…±ç´«</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> odoo <span class="keyword">import</span> _, api, fields, models, modules</span><br><span class="line"><span class="keyword">from</span> odoo.exceptions <span class="keyword">import</span> ValidationError</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">_logger = logging.getLogger(__name__)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AcountAccountInherit</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    _inherit = <span class="string">'account.account'</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">@api.model_cr</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># åˆ é™¤Odooæºç  ç§‘ç›®è¡¨çš„çº¦æŸæ¡ä»¶</span></span><br><span class="line">        cr = self.env.cr</span><br><span class="line">        unique_name = <span class="string">'account_account_code_company_uniq'</span></span><br><span class="line">        table_name = <span class="string">'account_account'</span></span><br><span class="line">        cr.execute(<span class="string">"""SELECT 1 from pg_constraint cs JOIN pg_class cl ON (cs.conrelid = cl.oid)</span></span><br><span class="line"><span class="string">                                           WHERE cs.conname=%s and cl.relname=%s"""</span>, (unique_name, table_name))</span><br><span class="line">        <span class="keyword">if</span> cr.fetchone():</span><br><span class="line">            cr.execute(<span class="string">'ALTER TABLE "%s" DROP CONSTRAINT "%s"'</span> % (table_name, unique_name), )</span><br><span class="line">            _logger.info(<span class="string">'Dropped CONSTRAINT %s@%s'</span>, table_name, unique_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å¢æ–°çº¦æŸ</span></span><br><span class="line">    _sql_constraints = [</span><br><span class="line">        (<span class="string">'code_and_account_structure'</span>,</span><br><span class="line">         <span class="string">'UNIQUE(code,account_structure_id)'</span>,</span><br><span class="line">         _(<span class="string">"Code and account structure must be unique!"</span>)),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;h3 id=&quot;1-è¦†ç›–é‡å†™&quot;&gt;&lt;a href=&quot;#1-è¦†ç›–é‡å†™&quot; class=&quot;headerlink&quot; title=&quot;1. è¦†ç›–é‡å†™&quot;&gt;&lt;/a&gt;1. è¦†ç›–é‡å†™&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;ä¸¾ä¸ªğŸŒ°ï¼š
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# odooæºç é…±ç´«&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_sql_constraints = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       (&lt;span class=&quot;string&quot;&gt;&#39;code_and_name&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;UNIQUE(code,name)&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _(&lt;span class=&quot;string&quot;&gt;&quot;Code and Name must be unique!&quot;&lt;/span&gt;)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ç°åœ¨å˜æˆäº† code + company å”¯ä¸€çº¦æŸ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å¦‚æœå“¦æˆ‘ä»¬ä¸ä»‹æ„uniqueçš„åœ¨æ•°æ®åº“ä¸­çš„åç§° æˆ‘ä»¬å¯ä»¥é…±ç´«å†™&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_sql_constraints = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       (&lt;span class=&quot;string&quot;&gt;&#39;code_and_name&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;UNIQUE(code,company_id)&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _(&lt;span class=&quot;string&quot;&gt;&quot;Code and Company must be unique!&quot;&lt;/span&gt;)),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å³åç§°ç›¸åŒï¼Œç›´æ¥è¦†ç›– å¯ä»¥å–æ•°æ®åº“ä¸­æŸ¥çœ‹è¡¨çš„uniqueé€‰é¡¹ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;![è¦†ç›–é‡å†™](https://img-blog.csdnimg.cn/&lt;span class=&quot;number&quot;&gt;20190311140149173.&lt;/span&gt;png)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>Odoo12ä¸ªæ€§åŒ–æ¨¡å—è¦†ç›–æºç å­—æ®µçš„ç¿»è¯‘(i18n)</title>
    <link href="https://yangtiancheng.github.io/Odoo12%E4%B8%AA%E6%80%A7%E5%8C%96%E6%A8%A1%E5%9D%97%E8%A6%86%E7%9B%96%E6%BA%90%E7%A0%81%E5%AD%97%E6%AE%B5%E7%9A%84%E7%BF%BB%E8%AF%91-i18n/"/>
    <id>https://yangtiancheng.github.io/Odoo12ä¸ªæ€§åŒ–æ¨¡å—è¦†ç›–æºç å­—æ®µçš„ç¿»è¯‘-i18n/</id>
    <published>2019-04-06T08:52:18.000Z</published>
    <updated>2019-04-17T03:15:28.795Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h1><p>å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—æ®µ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æºç  analytic æ¨¡å—</span></span><br><span class="line"><span class="string">"""pyä»£ç """</span></span><br><span class="line">code = fields.Char(string=<span class="string">'Reference'</span>, index=<span class="literal">True</span>, track_visibility=<span class="string">'onchange'</span>)</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;poä»£ç &quot;&quot;&quot;</span><br><span class="line">#. module: analytic</span><br><span class="line">#: model:ir.model.fields,field_description:analytic.field_account_analytic_account__code</span><br><span class="line">msgid &quot;Reference&quot;</span><br><span class="line">msgstr &quot;å‚è€ƒ&quot;</span><br></pre></td></tr></table></figure><a id="more"></a>    <p>ç°åœ¨æˆ‘ä»¬éœ€è¦å°†Referenceç¿»è¯‘æˆ â€œç¼–ç å‚ç…§â€<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ªæ€§åŒ– new_module æ¨¡å—</span></span><br><span class="line"><span class="string">"""pyä»£ç """</span></span><br><span class="line"><span class="comment"># ç»§æ‰¿_get_import_cursoræ–¹æ³• å°†ç»§æ‰¿æ¨¡å—çš„ç¿»è¯‘æ›¿æ¢ å¯ç”¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IrTranslation</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    _inherit = <span class="string">'ir.translation'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_get_import_cursor</span><span class="params">(self)</span>:</span></span><br><span class="line">        context = self._context.copy()</span><br><span class="line">        context[<span class="string">'overwrite'</span>] = <span class="literal">True</span></span><br><span class="line">        self = self.with_context(context)</span><br><span class="line">        <span class="keyword">return</span> super(IrTranslation, self)._get_import_cursor()</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;poä»£ç  è¦†ç›–åŸç¿»è¯‘&quot;&quot;&quot;</span><br><span class="line">#. module: analytic</span><br><span class="line">#: model:ir.model.fields,field_description:analytic.field_account_analytic_account__code</span><br><span class="line">msgid &quot;Reference&quot;</span><br><span class="line">msgstr &quot;ç¼–ç å‚ç…§&quot;</span><br></pre></td></tr></table></figure><p>å…¶å®è¿™ä¸ªä¸æˆ‘ä»¬configæ–‡ä»¶ä¸­çš„ â€“i18n-overwrite =&gt; config[â€˜overwrite_existing_translationsâ€™] çš„é…ç½®å†…å®¹ç›¸åŒã€‚</p><p>è¿™æ ·å¤„ç†åï¼Œæˆ‘ä»¬éœ€è¦å‡çº§æˆ‘ä»¬çš„ä¸ªæ€§åŒ–æ¨¡å— new_module ï¼Œå‡çº§å®Œæˆåï¼Œç¿»è¯‘è¦†ç›–æˆåŠŸã€‚<br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š1. åŠ è½½ç¿»è¯‘ä¸ä¼šç”Ÿæ•ˆ 2. å‡çº§æ¨¡å—åç¿»è¯‘è¦†ç›–æˆåŠŸï¼Œä½†æ˜¯å¦‚æœå†æ¬¡åŠ è½½ç¿»è¯‘ï¼Œè¦†ç›–çš„ç¿»è¯‘ä¼šè¢«è¿˜åŸã€‚</p><pre><code>è®¨è®ºï¼šå¦‚ä½•å°†æºç çš„ç¿»è¯‘æ›¿æ¢æ‰ï¼Œå¹¶ä¸”è¿˜èƒ½æ‹¿æŒä¹…åŒ–ï¼Œå¦‚æœæœ‰å¥½çš„å»ºè®®è¯·æ‚¨æŒ‡ç‚¹ï¼</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åœºæ™¯&quot;&gt;&lt;a href=&quot;#åœºæ™¯&quot; class=&quot;headerlink&quot; title=&quot;åœºæ™¯&quot;&gt;&lt;/a&gt;åœºæ™¯&lt;/h1&gt;&lt;p&gt;å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—æ®µ&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æºç  analytic æ¨¡å—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;pyä»£ç &quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;code = fields.Char(string=&lt;span class=&quot;string&quot;&gt;&#39;Reference&#39;&lt;/span&gt;, index=&lt;span class=&quot;literal&quot;&gt;True&lt;/span&gt;, track_visibility=&lt;span class=&quot;string&quot;&gt;&#39;onchange&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;quot;&amp;quot;&amp;quot;poä»£ç &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#. module: analytic&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#: model:ir.model.fields,field_description:analytic.field_account_analytic_account__code&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;msgid &amp;quot;Reference&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;msgstr &amp;quot;å‚è€ƒ&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
  </entry>
  
  <entry>
    <title>odoo actioné¡µé¢è·³è½¬ç›´æ¥ä¸ºç¼–è¾‘çŠ¶æ€æ“ä½œ</title>
    <link href="https://yangtiancheng.github.io/odoo-action%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC%E7%9B%B4%E6%8E%A5%E4%B8%BA%E7%BC%96%E8%BE%91%E7%8A%B6%E6%80%81%E6%93%8D%E4%BD%9C/"/>
    <id>https://yangtiancheng.github.io/odoo-actioné¡µé¢è·³è½¬ç›´æ¥ä¸ºç¼–è¾‘çŠ¶æ€æ“ä½œ/</id>
    <published>2019-04-06T08:40:12.000Z</published>
    <updated>2019-04-17T05:00:06.011Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">return &#123;</span><br><span class="line">        &apos;type&apos;: &apos;ir.actions.act_window&apos;,</span><br><span class="line">        &apos;view_type&apos;: &apos;form&apos;,</span><br><span class="line">        &apos;view_mode&apos;: &apos;form&apos;,</span><br><span class="line">        &apos;res_model&apos;: &apos;ï¼›module.model_name&apos;,</span><br><span class="line">        &apos;res_id&apos;: self.id,</span><br><span class="line">        &apos;context&apos;: self.env.context,</span><br><span class="line">        &apos;flags&apos;: &#123;&apos;initial_mode&apos;: &apos;edit&apos;&#125;,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>åŠ ä¸Šè¿™å¥ï¼šâ€˜flagsâ€™: {â€˜initial_modeâ€™: â€˜editâ€™},<br><a id="more"></a></p><p>Odoo12ä½¿ç”¨ï¼š<br>context[â€˜form_view_initial_modeâ€™] = â€˜editâ€™</p><p><a href="https://www.cnblogs.com/hellojesson/p/8405539.html" target="_blank" rel="noopener">ç‰¹åˆ«æ„Ÿè°¢æŠ€æœ¯æä¾›æ¥æºURL</a></p>]]></content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;return &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;apos;type&amp;apos;: &amp;apos;ir.actions.act_window&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;apos;view_type&amp;apos;: &amp;apos;form&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;apos;view_mode&amp;apos;: &amp;apos;form&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;apos;res_model&amp;apos;: &amp;apos;ï¼›module.model_name&amp;apos;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;apos;res_id&amp;apos;: self.id,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;apos;context&amp;apos;: self.env.context,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;apos;flags&amp;apos;: &amp;#123;&amp;apos;initial_mode&amp;apos;: &amp;apos;edit&amp;apos;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åŠ ä¸Šè¿™å¥ï¼šâ€˜flagsâ€™: {â€˜initial_modeâ€™: â€˜editâ€™},&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/categories/Odoo/"/>
    
      <category term="XML" scheme="https://yangtiancheng.github.io/categories/Odoo/XML/"/>
    
    
      <category term="Odoo" scheme="https://yangtiancheng.github.io/tags/Odoo/"/>
    
      <category term="XML" scheme="https://yangtiancheng.github.io/tags/XML/"/>
    
  </entry>
  
  <entry>
    <title>hexoçš„å‘æ±‡æ€»</title>
    <link href="https://yangtiancheng.github.io/hexo%E7%9A%84%E5%9D%91%E6%B1%87%E6%80%BB/"/>
    <id>https://yangtiancheng.github.io/hexoçš„å‘æ±‡æ€»/</id>
    <published>2019-04-06T00:55:28.000Z</published>
    <updated>2019-04-17T03:13:30.015Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ é™¤hexoå·¥ç¨‹"><a href="#åˆ é™¤hexoå·¥ç¨‹" class="headerlink" title="åˆ é™¤hexoå·¥ç¨‹"></a>åˆ é™¤hexoå·¥ç¨‹</h2><p>æ‰‹åŠ¨rm -rf hexoå·¥ç¨‹ åï¼Œå‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œè™½ç„¶ç»‘å®šäº†github page,ä½†æ˜¯hexoå·¥ç¨‹çš„æºç å¹¶æ²¡æœ‰äº†ï¼Œ<br>ç›®å‰æ˜¯æ²¡å‘ç°ä»€ä¹ˆæ¢å¤çš„æ–¹å¼ã€‚</p><p>æ¨èå¤§å®¶ä½¿ç”¨pycharmç¼–å†™ï¼Œå°±ç®—rm -rf åˆ é™¤äº†å·¥ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥mkdir åŒåhexo<br>å·¥ç¨‹æ–‡ä»¶ï¼Œç„¶åå³å‡»æ–‡ä»¶ä¸Šé€‰æ‹©Local History,æ‰¾åˆ°ä¸€ä¸ªå†å²ç‚¹ï¼Œé€‰æ‹©Revertï¼Œè¿™æ—¶å€™å·¥ç¨‹å°±æ¢å¤åˆ°äº†å†å²ç‚¹ã€‚<br><a id="more"></a></p><h2 id="æ¨èä½¿ç”¨æ–¹å¼"><a href="#æ¨èä½¿ç”¨æ–¹å¼" class="headerlink" title="æ¨èä½¿ç”¨æ–¹å¼"></a>æ¨èä½¿ç”¨æ–¹å¼</h2><ol><li>ä½¿ç”¨pycharmç¼–è¾‘</li><li>ä½¿ç”¨gitä»“åº“ç®¡ç†ï¼Œå®šæ—¶ä¸Šä¼ hexoå·¥ç¨‹ä»£ç </li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;åˆ é™¤hexoå·¥ç¨‹&quot;&gt;&lt;a href=&quot;#åˆ é™¤hexoå·¥ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;åˆ é™¤hexoå·¥ç¨‹&quot;&gt;&lt;/a&gt;åˆ é™¤hexoå·¥ç¨‹&lt;/h2&gt;&lt;p&gt;æ‰‹åŠ¨rm -rf hexoå·¥ç¨‹ åï¼Œå‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œè™½ç„¶ç»‘å®šäº†github page,ä½†æ˜¯hexoå·¥ç¨‹çš„æºç å¹¶æ²¡æœ‰äº†ï¼Œ&lt;br&gt;ç›®å‰æ˜¯æ²¡å‘ç°ä»€ä¹ˆæ¢å¤çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æ¨èå¤§å®¶ä½¿ç”¨pycharmç¼–å†™ï¼Œå°±ç®—rm -rf åˆ é™¤äº†å·¥ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥mkdir åŒåhexo&lt;br&gt;å·¥ç¨‹æ–‡ä»¶ï¼Œç„¶åå³å‡»æ–‡ä»¶ä¸Šé€‰æ‹©Local History,æ‰¾åˆ°ä¸€ä¸ªå†å²ç‚¹ï¼Œé€‰æ‹©Revertï¼Œè¿™æ—¶å€™å·¥ç¨‹å°±æ¢å¤åˆ°äº†å†å²ç‚¹ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://yangtiancheng.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://yangtiancheng.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>npmåˆ‡æ¢å›½å†…æº</title>
    <link href="https://yangtiancheng.github.io/npm%E5%88%87%E6%8D%A2%E5%9B%BD%E5%86%85%E6%BA%90/"/>
    <id>https://yangtiancheng.github.io/npmåˆ‡æ¢å›½å†…æº/</id>
    <published>2019-04-05T22:17:35.000Z</published>
    <updated>2019-04-17T03:13:48.762Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ‡æ¢å›½å†…æº"><a href="#åˆ‡æ¢å›½å†…æº" class="headerlink" title="åˆ‡æ¢å›½å†…æº"></a>åˆ‡æ¢å›½å†…æº</h1><p>npm install -g cnpm â€“registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></p><p>cnpm install hexo-cli -g<br><a id="more"></a></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åˆ‡æ¢å›½å†…æº&quot;&gt;&lt;a href=&quot;#åˆ‡æ¢å›½å†…æº&quot; class=&quot;headerlink&quot; title=&quot;åˆ‡æ¢å›½å†…æº&quot;&gt;&lt;/a&gt;åˆ‡æ¢å›½å†…æº&lt;/h1&gt;&lt;p&gt;npm install -g cnpm â€“registry=&lt;a href=&quot;https://registry.npm.taobao.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://registry.npm.taobao.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;cnpm install hexo-cli -g&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="https://yangtiancheng.github.io/categories/linux/"/>
    
      <category term="npm" scheme="https://yangtiancheng.github.io/categories/linux/npm/"/>
    
    
      <category term="linux" scheme="https://yangtiancheng.github.io/tags/linux/"/>
    
      <category term="npm" scheme="https://yangtiancheng.github.io/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>PEP8å¿…é¡»å­¦ä¹ </title>
    <link href="https://yangtiancheng.github.io/PEP8%E5%BF%85%E9%A1%BB%E5%AD%A6%E4%B9%A0/"/>
    <id>https://yangtiancheng.github.io/PEP8å¿…é¡»å­¦ä¹ /</id>
    <published>2019-04-05T22:06:31.000Z</published>
    <updated>2019-04-17T03:15:28.773Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/ratsniper/article/details/78954852#introduction-%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener">URL-Chinese</a><br><a href="https://www.python.org/dev/peps/pep-0008/#introduction" target="_blank" rel="noopener">URL-English</a></p><h1 id="è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»"><a href="#è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»" class="headerlink" title="è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»"></a>è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»</h1><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/ratsniper/article/details/78954852#introduction-%E4%BB%8B%E7%BB%8D&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;URL-Chinese&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.python.org/dev/peps/pep-0008/#introduction&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;URL-English&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»&quot;&gt;&lt;a href=&quot;#è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»&quot; class=&quot;headerlink&quot; title=&quot;è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»&quot;&gt;&lt;/a&gt;è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»&lt;/h1&gt;
    
    </summary>
    
      <category term="Python" scheme="https://yangtiancheng.github.io/categories/Python/"/>
    
    
      <category term="Python" scheme="https://yangtiancheng.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Postgresql10æŒç»­å­¦ä¹ (ing)</title>
    <link href="https://yangtiancheng.github.io/Postgresql10%E6%8C%81%E7%BB%AD%E5%AD%A6%E4%B9%A0-ing/"/>
    <id>https://yangtiancheng.github.io/Postgresql10æŒç»­å­¦ä¹ -ing/</id>
    <published>2019-04-05T22:05:50.000Z</published>
    <updated>2019-04-17T03:15:28.808Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h1><ul><li>è§†å›¾æ˜¯ä¸ºäº†é¿å…æ¯æ¬¡æŸ¥è¯¢éƒ½è¦æ•²æ‰“sqlè€Œå‡ºç°çš„æ›¿ä»£ç‰©ï¼Œå®ƒå°±åƒä¸€å¼ è¡¨ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªå˜ä¹‹é—´çš„ç»“æ„å’Œæ•°æ®å…³ç³»ã€‚<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å­¦ç”Ÿé€‰è¯¾æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> myView <span class="keyword">AS</span></span><br><span class="line">    <span class="keyword">select</span> p.name,p.age,c.name</span><br><span class="line">        <span class="keyword">from</span> people p,course c</span><br><span class="line">        <span class="keyword">where</span> p.id = c.p_id</span><br></pre></td></tr></table></figure></li></ul><p>ä»¥åæˆ‘æƒ³æŸ¥è¯¢æ•°æ®ï¼Œæˆ‘åªéœ€è¦select * from myView;å°±èƒ½å®ç°æˆ‘çš„æ•´ä¸ªæŸ¥è¯¢ã€‚<br><a id="more"></a></p><h1 id="å¤–é”®"><a href="#å¤–é”®" class="headerlink" title="å¤–é”®"></a>å¤–é”®</h1><ul><li>å¯ä»¥çº¦æŸè¡¨çš„æ’å…¥æ•°æ®çš„å®Œæ•´æ€§</li></ul><h1 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h1><ul><li>äº‹åŠ¡æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯å®ƒå°†å¤šä¸ªæ­¥éª¤æ†ç»‘æˆäº†ä¸€ä¸ªå•ä¸€çš„ã€è¦ä¹ˆå…¨å®Œæˆè¦ä¹ˆå…¨ä¸å®Œæˆçš„æ“ä½œ</li><li>ä¸€ä¸ªäº‹åŠ¡è¢«æ•°æ®åº“ç³»ç»Ÿå®Œæˆå¹¶è®¤å¯ï¼Œå®ƒå°±è¢«æ°¸ä¹…åœ°è®°å½•ä¸‹æ¥ä¸”å³ä¾¿å…¶åå‘ç”Ÿå´©æºƒä¹Ÿä¸ä¼šè¢«ä¸¢å¤±</li><li>å½“å¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œæ—¶ï¼Œæ¯ä¸€ä¸ªéƒ½ä¸èƒ½çœ‹åˆ°å…¶ä»–äº‹åŠ¡æœªå®Œæˆçš„ä¿®æ”¹</li><li>ä¸€ç»„è¢«BEGINå’ŒCOMMITåŒ…å›´çš„è¯­å¥ä¹Ÿè¢«ç§°ä¸ºä¸€ä¸ªäº‹åŠ¡å—</li></ul><h2 id="ä¿å­˜å›æ»šç‚¹"><a href="#ä¿å­˜å›æ»šç‚¹" class="headerlink" title="ä¿å­˜å›æ»šç‚¹"></a>ä¿å­˜å›æ»šç‚¹</h2><ul><li>å›æ»šç‚¹å‰çš„æ•°æ®ä¾æ—§å­˜åœ¨ å›æ»šç‚¹åˆ°rollbackåŒºé—´çš„æ“ä½œä¸è®°å½•<br>savepoint å›æ»šç‚¹åç§°<br>rollback to å›æ»šç‚¹åç§°<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance = balance - <span class="number">100.00</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'Alice'</span>;</span><br><span class="line"><span class="keyword">SAVEPOINT</span> my_savepoint;</span><br><span class="line"><span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance = balance + <span class="number">100.00</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'Bob'</span>;</span><br><span class="line"><span class="comment">-- oops ... forget that and use Wally's account</span></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> my_savepoint;</span><br><span class="line"><span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance = balance + <span class="number">100.00</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'Wally'</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure></li></ul><h1 id="çª—å£å‡½æ•°"><a href="#çª—å£å‡½æ•°" class="headerlink" title="çª—å£å‡½æ•°"></a>çª—å£å‡½æ•°</h1><ul><li>çª—å£å‡½æ•°ä¸»è¦æ˜¯ç”¨èšé›†å‡½æ•°çš„ï¼Œä½†æ˜¯éœ€è¦éƒ¨åˆ†èšé›†ï¼Œç›¸åŒèšé›†å­—æ®µè®°å½•æ”¾ä¸€èµ·è¿›è¡Œèšé›†è®¡ç®—<br>OVER (ORDER BY å­—æ®µå ORDER BY å­—æ®µå) æ˜¯çª—å£å‡½æ•°çš„å®šä¹‰<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary, <span class="keyword">sum</span>(salary) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> salary) <span class="keyword">FROM</span> empsalary;</span><br></pre></td></tr></table></figure></li></ul><h1 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cities (</span><br><span class="line"><span class="keyword">name</span>       <span class="built_in">text</span>,</span><br><span class="line">population <span class="built_in">real</span>,</span><br><span class="line">altitude   <span class="built_in">int</span>     <span class="comment">-- (in ft)</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> capitals (</span><br><span class="line">state      <span class="built_in">char</span>(<span class="number">2</span>)</span><br><span class="line">) INHERITS (cities);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span>, altitude</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">ONLY</span> cities</span><br><span class="line"><span class="keyword">WHERE</span> altitude &gt; <span class="number">500</span>;</span><br></pre></td></tr></table></figure><ul><li>ONLYç”¨äºæŒ‡ç¤ºæŸ¥è¯¢åªåœ¨citiesè¡¨ä¸Šè¿›è¡Œè€Œä¸ä¼šæ¶‰åŠåˆ°ç»§æ‰¿å±‚æ¬¡ä¸­ä½äºcitiesä¹‹ä¸‹çš„å…¶ä»–è¡¨</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;è§†å›¾&quot;&gt;&lt;a href=&quot;#è§†å›¾&quot; class=&quot;headerlink&quot; title=&quot;è§†å›¾&quot;&gt;&lt;/a&gt;è§†å›¾&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;è§†å›¾æ˜¯ä¸ºäº†é¿å…æ¯æ¬¡æŸ¥è¯¢éƒ½è¦æ•²æ‰“sqlè€Œå‡ºç°çš„æ›¿ä»£ç‰©ï¼Œå®ƒå°±åƒä¸€å¼ è¡¨ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªå˜ä¹‹é—´çš„ç»“æ„å’Œæ•°æ®å…³ç³»ã€‚&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- å­¦ç”Ÿé€‰è¯¾æŸ¥è¯¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;view&lt;/span&gt; myView &lt;span class=&quot;keyword&quot;&gt;AS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; p.name,p.age,c.name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; people p,course c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; p.id = c.p_id&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥åæˆ‘æƒ³æŸ¥è¯¢æ•°æ®ï¼Œæˆ‘åªéœ€è¦select * from myView;å°±èƒ½å®ç°æˆ‘çš„æ•´ä¸ªæŸ¥è¯¢ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Postgresql" scheme="https://yangtiancheng.github.io/categories/Postgresql/"/>
    
    
      <category term="Postgresql" scheme="https://yangtiancheng.github.io/tags/Postgresql/"/>
    
  </entry>
  
</feed>
