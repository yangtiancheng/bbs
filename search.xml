<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[é‡å†™æºç action]]></title>
    <url>%2Fbbs.github.io%2Frewrite-action%2F</url>
    <content type="text"><![CDATA[é‡å†™æºç actionæˆ–è€…æ›´æ–°recordæ•°æ®æŸ„å±žæ€§åœºæ™¯ç®€è¿°ä¹Ÿè®¸ä¸€ä¸ªæºç çš„èœå•ï¼Œé™åˆ¶äº†å±•ç¤ºçš„å€¼èŒƒå›´ä¸ºid &gt; 100çš„æ•°æ® domain = [(â€˜idâ€™,â€™&gt;â€™,100)]åœ¨æˆ‘ä»¬è‡ªå·±çš„ä¸ªæ€§åŒ–ä»£ç ä¸­ï¼Œå¯èƒ½éœ€è¦å°†æ˜¾ç¤ºèŒƒå›´æ”¹æˆ id &gt; 200ã€‚ æ“ä½œåŠç†å¿µ Odooé€šè¿‡XMLäº§ç”Ÿçš„æ•°æ®ï¼Œä¸ä»…ä»…ä¼šåˆ›å»ºå¯¹åº”çš„æ¨¡åž‹è®°å½•æ•°æ®ï¼ŒåŒæ—¶ä¼šå°†æ•°æ®é›†ç»‘å®šåˆ›å»ºä¸€æ¡ir.model.dataçš„æ•°æ®ã€‚ æˆ‘ä»¬åªéœ€è¦åœ¨è‡ªå·±çš„ä¸ªæ€§åŒ–æ¨¡å—ä¸­é‡å†™å¯¹åº”çš„actionä¿®æ”¹domainå±žæ€§å³å¯ï¼Œä½†æ˜¯ç”±äºŽæ‰€å¤„æ¨¡å—(module)çš„ä¸åŒï¼Œæˆ‘ä»¬é‡å†™çš„actionå¿…é¡»æŒ‡å®šè¦è¦†ç›–çš„æ¨¡å—ã€‚ æ‰€ä»¥åœ¨å¤–éƒ¨ID-extend_idå‰é¢åŠ ä¸Šmoduleçš„å‰ç¼€ï¼Œå³module.action_extend_idæ ¼å¼å³å¯ã€‚ ä»£ç ç¤ºä¾‹ æŸ¥çœ‹ä¿¡æ¯12345-- æŸ¥è¯¢å½“å‰actionä¸Ždataçš„å…³é”®å‚æ•°select imd.id,imd.module æ‰€å¤„æ¨¡å—,iaw.id åŠ¨ä½œID, iaw.domain åŠ¨ä½œåŸŸfrom ir_model_data imd,ir_act_window iawwhere imd.res_id = iaw.idand imd.name = &apos;rounding_list_action&apos;; é‡å†™æ–¹æ³• 1234567891011121314151617181920212223&lt;!-- æ‰€å¤„æ¨¡å—(module)ä¸ºæºç account åŽŸå§‹action--&gt;&lt;record id="rounding_list_action" model="ir.actions.act_window"&gt; &lt;field name="name"&gt;Cash Roundings&lt;/field&gt; &lt;field name="res_model"&gt;account.cash.rounding&lt;/field&gt; &lt;field name="view_type"&gt;form&lt;/field&gt; &lt;field name="view_mode"&gt;tree,form&lt;/field&gt; &lt;field name="domain"&gt;[('id','&gt;',100)]&lt;/field&gt; &lt;field name="help" type="html"&gt; &lt;p class="o_view_nocontent_smiling_face"&gt;Create the first cash rounding&lt;/p&gt; &lt;/field&gt;&lt;/record&gt;&lt;!--æ‰€å¤„æ¨¡å—(module)ä¸ºä¸ªæ€§åŒ–my_module --&gt;&lt;record id="account.rounding_list_action" model="ir.actions.act_window"&gt; &lt;field name="name"&gt;Cash Roundings&lt;/field&gt; &lt;field name="res_model"&gt;account.cash.rounding&lt;/field&gt; &lt;field name="view_type"&gt;form&lt;/field&gt; &lt;field name="view_mode"&gt;tree,form&lt;/field&gt; &lt;field name="domain"&gt;[('id','&gt;',200)]&lt;/field&gt; &lt;field name="help" type="html"&gt; &lt;p class="o_view_nocontent_smiling_face"&gt;Create the first cash rounding&lt;/p&gt; &lt;/field&gt;&lt;/record&gt; å‡çº§åŽæŸ¥è¯¢]]></content>
      <categories>
        <category>Odoo,XML</category>
      </categories>
      <tags>
        <tag>Odoo,XML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[djangoæ–°æ‰‹å…¥é—¨01 - Model]]></title>
    <url>%2Fbbs.github.io%2Fdjango%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A801%2F</url>
    <content type="text"><![CDATA[Queriesã€ŒæŸ¥è¯¢ã€Create objects ã€Œåˆ›å»ºæ–°å¯¹è±¡ã€ä½¿ç”¨modelå®žä¾‹ç±» é€šè¿‡**kwargsèµ‹å€¼åˆ›å»ºå®žä¾‹ 123from blog.models import Blogb = Blog(name='Beatles Blog', tagline='All the latest Beatles news.')b.save() Saving changes to objects which already in DB(Normal UPDATE)12b.name = 'XXX'b.save() Saving ForeignKey and M2m Fields(Special Fields UPDATE)123456789101112131415161718# FKfrom blog.models import Blog, Entryentry = Entry.objects.get(pk=1)cheese_blog = Blog.objects.get(name="Cheddar Talk")entry.blog = cheese_blogentry.save()# M2m TODO:Use add()from blog.models import Authorjoe = Author.objects.create(name="Joe")entry.authors.add(joe)# M2m Multi add()john = Author.objects.create(name="John")paul = Author.objects.create(name="Paul")george = Author.objects.create(name="George")ringo = Author.objects.create(name="Ringo")entry.authors.add(john, paul, george, ringo) Notice: M2mä¸­addçš„objectså¦‚æžœç±»åž‹é”™è¯¯ï¼ŒDjangoå°†ä¼šæŠ¥é”™ã€‚ Search objects class_name.objects ä¸­ objectså°±æ˜¯å½“å‰ç±»çš„Managerï¼Œåˆ‡è®°å®žä¾‹æ— æ³•ä½¿ç”¨objects. QuerySetæ˜¯Selectï¼Œè€Œfiltersæ˜¯Whereã€‚ Class.objects.all() æŸ¥æ‰¾å½“å‰è¡¨çš„æ‰€æœ‰è®°å½•ã€‚ filter(**kwargs) ç­›é€‰ Entry.objects.filter(pub_date__year=2006) ç­‰ä»· Entry.objects.all().filter(pub_date__year=2006) exclude(**kwargs) æŽ’é™¤ Entry.objects.exclude(pub_date__year=2006) ç­‰ä»· Entry.objects.all().exclude(pub_date__year=2006) 4å’Œ5å¯ä»¥è¿žåœ¨ä¸€èµ·ç”¨ Entry.objects.filter(pub_date__year=2006).exclude(pub_date__year=2007) 4å’Œ5å°½é‡åˆ†å¼€å¤„ç†ï¼Œç”¨å˜é‡å­˜å‚¨ã€‚ å®šä¹‰filterå’Œexcludeçš„æ—¶å€™ï¼Œä»£ç å¹¶ä¸ä¼šæ‰§è¡Œï¼Œé™¤éžè°ƒç”¨å½“å‰ç­›é€‰é€»è¾‘ æ¯”å¦‚print(X) get()1one_entry = Entry.objects.get(pk=1) get()æœ‰ä¸”å¿…é¡»åªèƒ½æ‰¾åˆ°1æ¡è®°å½•ã€‚ get()çš„ç”¨æ³•å’Œfilter()ç›¸åŒï¼Œä¸åŒçš„æ˜¯å¦‚æžœget()èŽ·å–ä¸åˆ°å¯¹è±¡ï¼Œåˆ™ä¼šè¿”å›ž DoesNotExist å¼‚å¸¸ã€‚ å¦‚æžœèŽ·å–åˆ°å¤šä¸ªè®°å½•ï¼Œåˆ™ä¼šè¿”å›ž MultipleObjectsReturned å¼‚å¸¸ã€‚ é™¤è¿‡allã€getã€filterã€exclude æ›´å¤šè¯·æŸ¥é˜…QuerySet API Limit QuerySets1234Entry.objects.all()[Offset:Limit:Step]Entry.objects.all()[:5]Entry.objects.all()[:5:10]Entry.objects.all()[:10:2] # - ä½¿ç”¨stepä¼šé‡æ–°ä»Žæ•°æ®åº“æ‰§è¡ŒæŸ¥è¯¢ å…¶ä»–åªæ˜¯querysetsåˆ‡ç‰‡æˆnew querysets. Field Lookups field__exact=1 ç­‰ä»·SQL-WHERE: field=1 field__iexact=1 ä¸åŒºåˆ†å¤§å°å†™ field__contains=â€™Lennonâ€™ ç­‰ä»·SQL-WHERE:SELECT â€¦ WHERE headline LIKE â€˜%Lennon%â€™; field__icontains=â€™Lennonâ€™ ä¸åŒºåˆ†å¤§å°å†™ startswith\endswith\istartswith\iendswithç­‰. æ›´å¤šå‚é˜…[é“¾æŽ¥](https://docs.djangoproject.com/en/2.2/ref/models/querysets/#field-lookups) æ”¯æŒè·¨è¶Šå…³ç³»ï¼ˆå¤–é”®è¡¨ï¼‰æŒ‡å®š Blog.objects.filter(entry__headline__contains=â€™Lennonâ€™) æ”¯æŒåå‘æœç´¢(å°å†™classåç§°) CURRENT ENDSWITH : Spanning multi-valued relationshipsÂ¶é“¾æŽ¥]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gevent+prefork]]></title>
    <url>%2Fbbs.github.io%2Fgevent-prefork%2F</url>
    <content type="text"><![CDATA[osos.fork()]]></content>
  </entry>
  <entry>
    <title><![CDATA[åŸºç¡€å­—æ®µç”¨æ³•æç¤º]]></title>
    <url>%2Fbbs.github.io%2F%E5%9F%BA%E7%A1%80%E5%AD%97%E6%AE%B5%E7%94%A8%E6%B3%95%E6%8F%90%E7%A4%BA%2F</url>
    <content type="text"><![CDATA[å­—æ®µdefault=function123456789@api.modeldef _get_company(self): if 1 == 1: return self.env.user.company_id.id else: return False# å…¬å¸company_id = fields.Many2one(comodel_name='res.company', string='Company', help="Company", index=True, default=_get_company) æ³¨æ„_get_companyçš„æ–¹æ³•ä¸€èˆ¬ç”¨api.modelè£…é¥°å™¨ä¿®é¥°ï¼Œdefaultçš„å±žæ€§æŽ¥æ”¶å€¼æ˜¯å¯¹åº”æ•°æ®çš„IDï¼Œä¸æ˜¯å¯¹è±¡ï¼Œåˆ‡è®°!!! å­—æ®µdomainå‰åŽç”¨æ³•]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŠ¨æ€æ˜¾ç¤ºSelectionçš„é€‰é¡¹åŸŸ]]></title>
    <url>%2Fbbs.github.io%2F%E5%8A%A8%E6%80%81%E6%98%BE%E7%A4%BASelection%E7%9A%84%E9%80%89%E9%A1%B9%E5%9F%9F%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹ä¸€ä¸ªæ¨¡åž‹ï¼Œä¸¤ä¸ªformè§†å›¾ï¼Œå¯¹åº”çš„selectionå­—æ®µå€¼åŸŸä¸åŒ ç›´æŽ¥ä»£ç ä¸Šä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950odoo.define('select_hide.hide_selection_units', function (require) &#123; "use strict"; var registry = require('web.field_registry'); var relational_fields = require('web.relational_fields'); var FieldSelection = relational_fields.FieldSelection; var rpc = require('web.rpc'); var select_hide_by_condition = FieldSelection.extend(&#123; _renderEdit: function () &#123; self = this; // model function_model function_name field_name var function_name = self.attrs.function; var value = this.value; if (self.$el[0].options.length == 0) &#123; if (this.field.type === 'selection') &#123; rpc.query(&#123; "model": this.model, "method": function_name, "args": [&#123;'args': this.recordData&#125;], &#125;).then(function (result) &#123; if (!!result) &#123; self.$el.empty(); for (var i = 0; i &lt; result.length; i++) &#123; self.$el.append($('&lt;option/&gt;', &#123; value: JSON.stringify(result[i][0]), text: result[i][1] &#125;)); &#125; &#125; &#125;); &#125; else &#123; for (var i = 0; i &lt; this.field.selection.length; i++) &#123; this.$el.append($('&lt;option/&gt;', &#123; value: JSON.stringify(this.field.selection[i][0]), text: this.field.selection[i][1] &#125;)); &#125; &#125; &#125; if (this.field.type === 'many2one' &amp;&amp; value) &#123; value = value.data.id; &#125; &#125;, &#125;); registry .add('select_hide_by_condition', select_hide_by_condition);&#125;); 1&lt;field name="source_type" widget="select_hide_by_condition" function="select_hide_by_condition"/&gt; 1234567891011121314151617181920@api.modeldef select_hide_by_condition(self, datas): """ æ¥æºç±»åž‹ é€‰æ‹©æ¡†æ•°æ®é™åˆ¶ :param datas: å½“å‰æ•°æ®è¡Œçš„æ‰€æœ‰å­—æ®µä¿¡æ¯ :return: æ–°çš„é€‰æ‹©æ¡†å€¼åŸŸ """ if datas['args']['XXX']: return [ ('table_item', _('Table Item')), ('code', _('Code')), ('mapping_table', _('Mapping Table')), ] else: return [ ('', ''), ('table_item', _('Table Item')), ('code', _('Code')), ('mapping_table', _('Mapping Table')), ]]]></content>
      <categories>
        <category>Odoo,JS,Selection</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[res.users]]></title>
    <url>%2Fbbs.github.io%2Fres-users%2F</url>
    <content type="text"><![CDATA[function has_groupå‚æ•°group_ext_id - ç»„ å¤–éƒ¨ID]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[modelæ–‡ä»¶]]></title>
    <url>%2Fbbs.github.io%2Fmodel%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[function readå‚æ•°ï¼šfields - è®°å½•è¿”å›žå­—æ®µåˆ—è¡¨load - æš‚æ—¶ä¸çŸ¥ ç®€ä»‹ï¼šReadæ–¹æ³•å…¶å®žå°±æ˜¯è¯»æŒ‡å®šselfä¸­å­—æ®µçš„æ•°æ®è®°å½•ï¼Œé€šå¸¸åœ¨pythonä»£ç é‡Œç”¨browseæ–¹æ³•ä»£æ›¿å¯èƒ½ä¼šå‡ºçŽ°å¼‚å¸¸: ç»™å®šçš„è®°å½•å½“å‰ç”¨æˆ·æ²¡æœ‰å¯è¯»çš„æƒé™ é¦–å…ˆæ£€æŸ¥ç”¨æˆ·å¯¹æ¨¡åž‹çš„è®¿é—®æƒé™ check_access_rights æ£€æŸ¥ç”¨æˆ·å¯¹å­—æ®µæ¨¡åž‹çš„è®¿é—®æƒé™ check_field_access_rights function check_access_rightså‚æ•°ï¼šoperation - æ“ä½œæ–¹å¼ read\write\create\unlinkraise_exception - å¼‚å¸¸æ˜¯å¦æŠ›å‡º é»˜è®¤t ç®€ä»‹ï¼šæŸ¥è¯¢å½“å‰ç”¨æˆ·å¯¹äºŽå½“å‰æ¨¡åž‹æ˜¯å¦æœ‰ç›¸å…³çš„æƒé™ function check_field_access_rightså‚æ•°ï¼šoperation - æ“ä½œæ–¹å¼ read\write\create\unlinkfields - æ£€æŸ¥çš„å­—æ®µ ç®€ä»‹ï¼šæ£€æŸ¥å½“å‰ç”¨æˆ·å¯¹ç»™å®šçš„å­—æ®µæ˜¯å¦æœ‰è®¿é—®æƒé™ï¼Œå¦‚æžœæ²¡æœ‰æŠ›å‡ºä¾‹å¤–ï¼Œå¦åˆ™å°†ä¼šè¿”å›žå­—æ®µåˆ—è¡¨ è¶…çº§ç®¡ç†å‘˜ç›´æŽ¥è¿”å›žéšå½±çš„å­—æ®µ æ™®é€šäººå‘˜ å¯¹äºŽæ²¡æä¾›fieldså‚æ•°å­—æ®µæ—¶ï¼ŒæŸ¥è¯¢å½“å‰è®°å½•çš„æ‰€æœ‰å­—æ®µ_fields,å¹¶éªŒè¯æ¯ä¸€ä¸ªå­—æ®µæ˜¯å¦æœ‰æ•ˆ(valid) å°†æä¾›çš„å­—æ®µåˆ†ä¸º å­˜å‚¨ã€ç»§æ‰¿ã€è®¡ç®— ä¸‰ç§ç±»åž‹ï¼Œåˆ‡è®°fieldsä¸­ä¸èƒ½å‡ºçŽ°ä¸å±žäºŽå½“å‰æ¨¡åž‹çš„å­—æ®µå å¯¹äºŽå­˜å‚¨å’Œç»§æ‰¿çš„å­—æ®µï¼Œé€šè¿‡æ•°æ®åº“æŸ¥æ‰¾ _read_from_database å†…éƒ¨æ–¹æ³•ï¼šfunction validå‚æ•°ï¼šfname - å­—æ®µåç§° ç®€ä»‹ï¼šé€šè¿‡å­—æ®µæ˜¯å¦æœ‰ç»„æƒé™ï¼Œå¦‚æžœæœ‰ï¼Œæ£€æŸ¥ç”¨æˆ·æœ‰æ²¡æœ‰è¿™äº›ç»„æƒé™ user_has_groupsã€‚ function user_has_groupså‚æ•°ï¼šgroups - (str)å®Œæ•´çš„ç»„å¤–éƒ¨æ•°æ®è®°å½•ï¼Œé€šè¿‡é€—å·åˆ†éš” ä¾‹å¦‚ï¼šbase.group_user,base.group_system,æ¯ä¸€ä¸ªç»„å‰é¢å¯é€‰åŠ æ„Ÿå¹å·â€™!â€™ï¼Œä¾‹å¦‚ï¼š!base.group_user,!base.group_system è¿”å›ž - å¦‚æžœå½“å‰ç”¨æˆ·æ˜¯ç»™å®šç»„(éž!å‰ç¼€)çš„æˆå‘˜ï¼Œå¹¶ä¸”ä¸æ˜¯ä»»ä½•ç»„ç»™å®šå‰ç¼€ç»„(!å‰ç¼€)çš„æˆå‘˜ï¼Œè¿”å›žtç®€å•ç†è§£å°±æ˜¯ï¼šç»™äº†ç»„ï¼Œç”¨æˆ·æ˜¯éž!å‰ç¼€ç»„çš„æˆå‘˜ï¼Œå¹¶ä¸”ä¸æ˜¯ä»»ä½•!å‰ç¼€ç»„çš„æˆå‘˜ã€‚ ç®€ä»‹ï¼šå¦‚æžœç”¨æˆ·æ˜¯â€œgroupsâ€ä¸­è‡³å°‘ä¸€ä¸ªç»„çš„æˆå‘˜ï¼Œå¹¶ä¸”â€œgroupsâ€ä¸æ˜¯ä¸­ä»¥â€œ!â€å¼€å¤´çš„ä»»ä½•ç»„çš„æˆå‘˜ï¼Œåˆ™è¿”å›žtrueï¼é€šå¸¸ç”¨äºŽè§£æžè§†å›¾å’Œæ¨¡åž‹å®šä¹‰ä¸­çš„â€œgroupsâ€å±žæ€§ã€‚ é¦–å…ˆå°†groupsæ ¹æ®é€—å·åˆ†å¼€ï¼Œå¯¹æ¯ä¸€ä¸ªç»„å¤–éƒ¨IDåŽ»é™¤ç©ºæ ¼ã€æ¢è¡Œç¬¦ã€‚ å°†æä¾›çš„groupsåˆ†æˆ!å‰ç¼€ç»„é›†åˆnot_has_groups(æ·»åŠ æ—¶åŽ»æŽ‰å‰ç¼€!)ï¼Œå’Œæ²¡æœ‰!å‰ç¼€çš„ç»„é›†åˆhas_groupsã€‚ æ£€æŸ¥not_has_groupsä¸­çš„æ¯ä¸€ä¸ªç»„3.1 å¦‚æžœæ˜¯â€™base.group_no_oneâ€™ç»„ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨â€™base.group_no_oneâ€™ç»„ä¸­ï¼ŒçŽ¯å¢ƒæ ˆä¸­æ˜¯å¦æ˜¯debugæ¨¡å¼ï¼Œæ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œè¿”å›ž False ï¼Œå› ä¸ºæ˜¯not_has_groups3.2 å¦‚æžœæ˜¯å…¶ä»–ç»„ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨å½“å‰ç»„å†…ï¼Œå¦‚æžœåœ¨ï¼Œè¿”å›ž False ä¸Šé¢æ¡ä»¶éƒ½okçš„æƒ…å†µä¸‹ï¼Œæ£€æŸ¥has_groupsä¸­çš„æ¯ä¸€ä¸ªç»„4.1 å¦‚æžœæ˜¯â€™base.group_no_oneâ€™ç»„ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨â€™base.group_no_oneâ€™ç»„ä¸­ï¼ŒçŽ¯å¢ƒæ ˆä¸­æ˜¯å¦æ˜¯debugæ¨¡å¼ï¼Œæ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œè¿”å›ž True ï¼Œå› ä¸ºæ˜¯has_groups4.2 å¦‚æžœæ˜¯å…¶ä»–ç»„ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨å½“å‰ç»„å†…ï¼Œå¦‚æžœåœ¨ï¼Œè¿”å›ž True å¦‚æžœæ²¡æœ‰æä¾›groupså‚æ•°å€¼ï¼Œè¿”å›ž True function _read_from_databaseå‚æ•°field_names - å­˜å‚¨å­—æ®µåç§°åˆ—è¡¨inherited_field_names - ç»§æ‰¿å­—æ®µåç§°åˆ—è¡¨ ç®€ä»‹æŸ¥è¯¢selfå¯¹åº”çš„æ•°æ®åº“å­—æ®µï¼Œå°†ç»“æžœå­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€å¦‚æžœæœ‰é”™è¯¯ä¹Ÿå­˜åœ¨ç¼“å­˜ä¸­ å¦‚æžœselfæ²¡æœ‰è®°å½•å°±è·³å‡ºï¼Œ function _where_calcå‚æ•°domain - åŸŸactive_test - æ˜¯å¦ç”¨activeå­—æ®µç­›é€‰ é»˜è®¤tè¿”å›ž - QueryæŸ¥è¯¢å¯¹è±¡ ç®€ä»‹å¦‚æžœæ¨¡åž‹æœ‰activeå­—æ®µï¼Œå‚æ•°active_testæŽ§åˆ¶æ˜¯å¦æ·»åŠ domain -&gt; (â€˜activeâ€™, â€˜=â€™, 1) class expressionfunction initå‚æ•°domain - åŸŸåˆ—è¡¨model - æ¨¡åž‹è®°å½• ### function sudo]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½ ä¸çŸ¥é“çš„Many2many]]></title>
    <url>%2Fbbs.github.io%2F%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84Many2many%2F</url>
    <content type="text"><![CDATA[ä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œæˆ‘ä»¬åŒç”¨ä¸€ä¸ªrelation1. ä¸¾ä¸ªðŸŒ°12_name = "res.groups"users = fields.Many2many('res.users', 'res_groups_users_rel', 'gid', 'uid') 12_name = "res.users"groups_id = fields.Many2many('res.groups', 'res_groups_users_rel', 'uid', 'gid') 2. åˆ†æžä»Žä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ªå­—æ®µä½¿ç”¨äº†åŒä¸€ä¸ªrelation(res_groups_users_rel),ä¹‹å‰è¯´å¥½çš„relationå”¯ä¸€ ä¸èƒ½å’Œä»»ä½•è¡¨åé‡å¤å—? å¯¹ï¼Œè¿™ä¹Ÿæ²¡é—®é¢˜ã€‚å…¶å®žm2mæœ¬æ¥å°±æ˜¯ä¸¤å¼ è¡¨æ•°æ®å­˜åœ¨çš„ä¸€ç§äº’ç›¸å¤šå…³è”å…³ç³»ï¼Œä½ å…³è”æˆ‘ï¼Œæˆ‘å…³è”ä½ ï¼Œåªè¦æˆ‘ä»¬å¯¹åº”çš„æ•°æ®ä½ç½®ä¿æŒä¸€è‡´å°±è¡Œã€‚æ•°æ®ä¿æŒä¸€è‡´ï¼Œå°±è¦æ±‚column1å¿…é¡»æ˜¯æœ¬æ¨¡åž‹modelçš„æ•°æ®ï¼Œcolumn2å¿…é¡»æ˜¯å…³è”è¡¨æ¨¡åž‹comodel_nameçš„æ•°æ®ï¼Œåˆ‡è®°ä¸èƒ½å†™é”™å’¯~]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ir.rule]]></title>
    <url>%2Fbbs.github.io%2Fir-rule%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯ir.ruleå‰é¢æˆ‘ä»¬è®²è¿‡äº†æ¨¡åž‹è®¿é—®è§„åˆ™ir.model.accessï¼Œè¿™é‡Œçš„ir.ruleæ˜¯æ•°æ®å±è”½è§„åˆ™ï¼Œç®€å•çš„è¯´å°±æ˜¯è°èƒ½çœ‹è§å“ªäº›æ•°æ®ã€‚ å­—æ®µname - åç§°active - æœ‰æ•ˆæ€§model_id - æ¨¡åž‹groups - ç»„domain_force - å¯è®¿é—®æ¡ä»¶åŸŸperm_read - å¯è¯»perm_write - å¯å†™perm_create - å¯åˆ›perm_unlink - å¯åˆ  æç¤ºï¼šperm = permission(è®¸å¯) æ‰¹é‡å†™data.xmlçš„æƒé™éƒ¨åˆ†1234567891011121314151617181920212223242526272829303132333435363738def test(): models = [ 'account.account', 'account.move', 'account.move.line', ] """ -- ç”¨è¿™ä¸ªSQLå¯ä»¥æŸ¥åˆ°å¯¹åº” æœ‰å…¬å¸å­—æ®µä¸”ä¸ºcompany_idçš„model select model from ir_model_fields imf where model in ( 'account.account', 'account.move', 'account.move.line', ) and ttype='many2one' and name = 'company_id' and relation = 'res.company'; """ print('&lt;data noupdate="1"&gt;') for model in models: print(""" &lt;record id="&#123;0&#125;" model="ir.rule"&gt; &lt;field name="name"&gt;&#123;1&#125;&lt;/field&gt; &lt;field name="model_id" ref="&#123;2&#125;"/&gt; &lt;field name="global" eval="True"/&gt; &lt;field name="domain_force"&gt; ['|',('company_id', '=', False),'&amp;amp;', ('company_id', 'child_of', [user.company_id.id]), ('company_id', 'in', user.company_ids.ids)] &lt;/field&gt; &lt;/record&gt;""".format(model_name_transfor_table_name('rule_'+model),model_name_transfor_table_name(model+'_rule'),model_name_transfor_table_name('model_'+model))) print('&lt;/data&gt;')# æ¨¡åž‹è½¬è¡¨def model_name_transfor_table_name(model_name): return model_name.replace('.', '_')test()]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ir.model.access]]></title>
    <url>%2Fbbs.github.io%2Fir-model-access%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯ir.model.accessç®€å•çš„è¯´ï¼ŒERPçš„èµ„æºç®¡ç†ï¼Œå…¶å®žä¸å¤–å››ç§æƒ…å†µï¼ˆå¢žåˆ æ”¹æŸ¥ï¼‰ï¼Œé‚£ä¹ˆå¯¹äºŽç™»å½•ç”¨æˆ·æ¥è¯´ï¼Œä½ æœ‰æƒé™åšè¿™äº›æ“ä½œç ï¼Ÿå¦‚æžœä¸åšé™åˆ¶ï¼Œå²‚ä¸æ˜¯éšä¾¿çš„ä¸€ä¸ªç”¨æˆ·å°±èƒ½è½»æ˜“çš„åŠ¨ç³»ç»Ÿçš„æ•°æ®ï¼Œè¿™æ˜¯å¾ˆå¯æ€•çš„ã€‚ æ¨¡åž‹æƒé™æ–‡ä»¶æœ‰name,active,model_id(éžTransientModelæ¨¡åž‹),group_id,perm_read,perm_write,perm_create,perm_unlinkå‡ ä¸ªå­—æ®µã€‚ function check_groupså‚æ•°ï¼šgroup =&gt; module.group_ext_id æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦åœ¨æ‰€æä¾›çš„ç»„é‡Œï¼Œè¿”å›žt/f function check_groupå‚æ•°ï¼šmodel - æ¨¡åž‹å(å¦‚æžœä¼ å…¥æ¨¡åž‹å¯¹è±¡ å°†æ¨¡åž‹å model.name å–å‡º)mode - æ£€æŸ¥æ–¹å¼group_ids - ç»„ æ£€æŸ¥æ”¹æ¨¡åž‹modelæ˜¯å¦å¯ä»¥è¢«æä¾›çš„ç»„group_ids æˆ– ç»„ä¸ºç©ºæ—¶è®¿é—®ï¼Œè¿”å›žt/f function group_names_with_accesså‚æ•°ï¼šmodel_name - æ¨¡åž‹åaccess_mode - æ£€æŸ¥æ–¹å¼ æŸ¥è¯¢å½“å‰æ¨¡åž‹æ˜¯å¦æœ‰æ»¡è¶³æ£€æŸ¥æ–¹å¼access_modeçš„ç»„è®°å½•ï¼Œå¦‚æžœæœ‰ï¼Œå°†è¿™äº›ç»„ä»¥ module_category/group_nameçš„åˆ—è¡¨å½¢å¼è¿”å›ž function check1. adminç”¨æˆ·è¶…çº§ç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æƒé™ è·³è¿‡æ ¡éªŒ 2. æ™®é€šç”¨æˆ· å¯¹äºŽTransientModelæ¨¡åž‹,æ‰€æœ‰ç”¨æˆ·å¯è·³è¿‡æ ¡éªŒ å¯¹äºŽæ™®é€šæ¨¡åž‹ï¼Œæ£€æŸ¥ç”¨æˆ·æƒé™ç»„æ˜¯å¦å­˜åœ¨ç¬¦åˆæ­¤æƒé™çš„æœ‰æ•ˆè®°å½•å¦‚æžœæ²¡æœ‰ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨ç»„ä¸ºç©ºçš„æœ‰æ•ˆæƒé™è®°å½•ã€‚å¦‚æžœæ²¡æœ‰æŸ¥æ‰¾åˆ°è®°å½•ï¼ŒæŸ¥ä¸€ä¸‹ç³»ç»Ÿä¸­æ˜¯å¦æœ‰å¯ä»¥è®¿é—®è¯¥modelçš„ç»„! å¦‚æžœæœ‰ï¼š12_(&quot;Sorry, you are not allowed to [access/modify/create/delete] this document.&quot;),åªæœ‰ä»¥ä¸‹è®¿é—®ç­‰çº§(ç»„)çš„ç”¨æˆ·å¯æ‰åšè¿™ï¼šcategory_id1/group1ï¼Œcategory_id2/group2... å¦‚æžœæ²¡æœ‰ï¼š 12_(&quot;Sorry, you are not allowed to [access/modify/create/delete] this document.&quot;),å¦‚æžœä½ è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œè¯·è”ç³»ä½ çš„ç³»ç»Ÿç®¡ç†å‘˜ã€‚ ç±»å˜é‡_cache_clearing_methods = set() function register_cache_clearing_methodå‚æ•°ï¼šmodel - æ¨¡åž‹åmethod - æ–¹æ³•å å°†(model,method)æ·»åŠ åˆ°ç±»å˜é‡__cache_clearing_methodsä¸­ function unregister_cache_clearing_methodå‚æ•°ï¼šmodel - æ¨¡åž‹åmethod - æ–¹æ³•å å°†(model,method)ä»Žç±»å˜é‡__cache_clearing_methodsä¸­ç§»é™¤ function call_cache_clearing_methods æ¸…ç©ºå½“å‰ir.model.accessæ¨¡åž‹è®°å½•çš„ç¼“å­˜ æ¸…ç©ºir.model.accessçš„checkæ–¹æ³•çš„ç¼“å­˜ __cache_clearing_methodså˜é‡ä¸­çš„æ¨¡åž‹æ–¹æ³• ç»Ÿä¸€æ‰§è¡Œä¸€é(æµ‹è¯•çœ‹éƒ½æ˜¯åœ¨æ¸…é™¤ç¼“å­˜) function create/write/unlinkéƒ½ä¼šå…ˆæ‰§è¡Œcall_cache_clearing_methodæ¸…ä¸€éç¼“å­˜ï¼Œå†æ‰§è¡ŒORMæ“ä½œã€‚ é—®é¢˜ï¼šæœ€åŽçš„æ¸…æ¥šç¼“å­˜éƒ¨åˆ†ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿå¸Œæœ›æœ‰çŸ¥é“çš„odooerå¸®å¿™æŒ‡ç‚¹è¿·æ´¥~]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQLçš„!=å’Œis not NULL]]></title>
    <url>%2Fbbs.github.io%2FSQL%E7%9A%84-%E5%92%8Cis-not-NULL%2F</url>
    <content type="text"><![CDATA[!=12select type,*where type != 'normal' SQLçš„Whereè¯­å¥å¦‚æžœå‡ºçŽ°!=åˆ¤æ–­ç¬¦ï¼ŒDBä¼šå°†æ•°æ®ä¸­typeæœ‰å€¼ä¸”ä¸ç­‰äºŽnormalçš„è®°å½•æŸ¥å‡ºï¼Œä½†å¦‚æžœè®°å½•ä¸­å¯¹åº”çš„typeå­—æ®µæ˜¯NULLçš„è¯ï¼Œæ•°æ®å°†ä¸ä¼šè¢«æŸ¥å‡ºæ¥ã€‚ is not NULL12select type,*where type is not NULL å°†æŸ¥å‡ºtypeéžç©ºçš„è®°å½• è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„ç­›é€‰æ•°æ®æ—¶ï¼Œæœ€å¥½ä¸è¦ç”¨!=ï¼Œé™¤éžç‰¹åˆ«ç¡®è®¤è¿™ä¸ªå­—æ®µä¸€å®šæ˜¯å¿…è¾“å­—æ®µã€‚]]></content>
      <categories>
        <category>SQL</category>
      </categories>
      <tags>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo æµ…è°ˆOdooæä¾›çš„é™„ä»¶æœºåˆ¶]]></title>
    <url>%2Fbbs.github.io%2FOdoo-%E6%B5%85%E8%B0%88Odoo%E6%8F%90%E4%BE%9B%E7%9A%84%E9%99%84%E4%BB%B6%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[Odooæä¾›çš„é™„ä»¶æœºåˆ¶ å­˜å‚¨ä½ç½®å¯é…ç½®ï¼š&emsp;&emsp;é€šè¿‡ è®¾ç½®-å‚æ•°-ç³»ç»Ÿå‚æ•° å®šä¹‰çš„å…³é”®å­—ir_attachment.locationæ¥æŽ§åˆ¶é™„ä»¶çš„å­˜å‚¨æ–¹å¼ã€‚ 1.å¦‚æžœæœªç»´æŠ¤è®°å½•æˆ–è€…ç»´æŠ¤è®°å½•å€¼ä¸ä¸ºdbï¼Œé»˜è®¤å­˜å‚¨è·¯å¾„ä¸ºåº”ç”¨æœåŠ¡å™¨ä¸Šçš„/var/lib/odoo/filestore/æ•°æ®åº“åç§°/æ–‡ä»¶å¤¹,ä¾‹å¦‚/var/lib/odoo/filestore/ 868/9cã€‚ 2.å°†æ–‡ä»¶çš„è·¯å¾„å†™å…¥store_fnameå­—æ®µï¼Œfile_sizeè¡¨ç¤ºæ–‡ä»¶å¤§å°ï¼Œdb_datasè¡¨ç¤ºæ–‡ä»¶ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨åœ¨æ•°æ®åº“ä¸­(è¿™é‡Œä¸ºç©º)ã€‚ 3.å¦‚æžœç»´æŠ¤è®°å½•å€¼ä¸ºdbï¼Œåˆ™ä»¥binaryçš„å½¢å¼å­˜å‚¨åœ¨æ•°æ®åº“è¡¨db_datasä¸­ã€‚ ä¸ªäººæ€»ç»“ å¯é…ç½®å­˜å‚¨æ–¹å¼:æˆ‘ä»¬çš„æ‰€æœ‰é™„ä»¶æ•°æ®å¯ä»¥é€‰æ‹©ä¿å­˜åœ¨æ•°æ®åº“db_datasä¸­ï¼Œè¿˜æ˜¯åº”ç”¨æœåŠ¡å™¨/var/lib/odoo/æ•°æ®åº“å/sha1[:2]ä¸­ã€‚å¦‚æžœä¿å­˜åœ¨åº”ç”¨æœåŠ¡å™¨ä¸­ï¼Œç³»ç»Ÿçš„æ•°æ®åº“ä¼šæ›´åŠ è½»ä¾¿ï¼Œè€Œä¸”é™„ä»¶ä½¿ç”¨base64ç¼–ç æ–‡ä»¶ï¼Œé€šè¿‡sha1æ–¹å¼ç»™æ¯ä¸€ä¸ªé™„ä»¶æ–‡ä»¶æ ‡å®šä¸ºå”¯ä¸€çš„è®°å½•datas_fnameï¼Œå¦‚æžœä¸Šä¼ ç›¸åŒçš„æ–‡ä»¶ï¼Œæ•°æ®åº“store_fnameè®°å½•åªéœ€è¦æ”¾å…¥æ–‡ä»¶çš„æœåŠ¡å™¨è½¯åœ°å€ï¼Œä¸éœ€è¦å†å°†æ–‡ä»¶ä¸Šä¼ ï¼ŒåŠ é€Ÿäº†ä¸Šä¼ çš„æ•ˆçŽ‡ã€‚ åŒä¸€è®°å½•å•æˆ–ä¸åŒè®°å½•å•ï¼Œç›¸åŒçš„æ–‡ä»¶åªä¼šä¸Šä¼ ä¸€æ¬¡:æ•°æ®åº“è®°å½•åªéœ€è¦æ”¾å…¥ç›¸å…³çš„è®¿é—®åœ°å€ï¼Œéœ€è¦æ—¶ç›´æŽ¥è¯»å–ï¼Œé˜²æ­¢å¤šä½™çš„ç©ºé—´æµå¤±ã€‚HRPçŽ°æœ‰çš„èµ„è´¨çš„é™„ä»¶ä¸Šä¼ æ–¹å¼ï¼Œé‡‡ç”¨æ•°æ®åº“ç›´æŽ¥å­˜å–äºŒè¿›åˆ¶æ–‡ä»¶å½¢å¼ï¼Œä¸Šä¼ æ–‡ä»¶å°±æŽ¥æ”¶ï¼Œä¸æ ¡éªŒï¼Œä¸æ™ºèƒ½ï¼Œæ•°æ®å†—ä½™ï¼Œä½¿å¾—æ•°æ®åº“è‡ƒè‚¿ä¸å ªã€‚ æƒé™æ£€æŸ¥-æ›´å®‰å…¨ï¼šå¯¹ç³»ç»Ÿé™„ä»¶çš„æ¯ä¸€ç§ç±»åž‹çš„æ“ä½œï¼Œodooæºç é™„ä»¶æœºåˆ¶éƒ½ä¼šæ£€éªŒæƒé™æ˜¯å¦æ»¡è¶³ï¼Œåªæœ‰é™„ä»¶ä¸Šä¼ è€…ã€è¶…çº§ç®¡ç†å‘˜ã€ç®¡ç†ç»„ç”¨æˆ·æ‰å¯ä»¥å¯¹ç›¸å…³é™„ä»¶è¿›è¡Œé«˜çº§æ“ä½œï¼Œä¿è¯äº†æ“ä½œé™„ä»¶çš„å®‰å…¨æ€§ã€‚ ä¸æ˜“ä¸¢å¤±:é€‰æ‹©åº”ç”¨æœåŠ¡å™¨ä¿å­˜é™„ä»¶ï¼Œæžç«¯æƒ…å†µä¸‹ï¼Œå½“æ•°æ®åº“æ•°æ®ä¸¢å¤±æˆ–æŸåæ—¶ï¼Œå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„é™„ä»¶ä¸ä¼šå—åˆ°æ³¢åŠï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚ å¼‚æ­¥å¤‡ä»½ï¼šè™½ç„¶çœ‹èµ·æ¥æ—¢è¦å¤‡ä»½æ•°æ®åº“ï¼Œåˆè¦å¤‡ä»½åº”ç”¨æœåŠ¡å™¨çš„é™„ä»¶éƒ¨åˆ†ï¼Œæ“ä½œæ­¥éª¤å˜å¤šäº†ã€‚ä½†åˆ†æ­¥å¤‡ä»½ä¿è¯äº†æ•°æ®åº“å¿«é€Ÿå¤‡ä»½ï¼ŒæœåŠ¡å™¨é™„ä»¶ä¼ è¾“è¦æ±‚å¹¶ä¸åƒæ•°æ®åº“å¤‡ä»½æ—¶ï¼Œè¦æ±‚å¿«é€Ÿã€è½»ä¾¿ï¼Œæ‰€ä»¥è¿™æ ·çš„æœºåˆ¶æ›´é€‚åˆ ###å¦‚æœ‰ç†è§£é”™è¯¯çš„åœ°æ–¹ï¼Œè¯·å¤§å®¶æŒ‡æ­£.]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo12-M2må­—æ®µæ·»åŠ ä¸€è¡Œå¼¹å‡ºæ¡†å†…å®¹ä¸ªæ€§åŒ–æŒ‡å®šè§†å›¾+actionè‡ªå®šä¹‰æŒ‡å®šè§†å›¾]]></title>
    <url>%2Fbbs.github.io%2FOdoo12-M2m%E5%AD%97%E6%AE%B5%E6%B7%BB%E5%8A%A0%E4%B8%80%E8%A1%8C%E5%BC%B9%E5%87%BA%E6%A1%86%E5%86%85%E5%AE%B9%E4%B8%AA%E6%80%A7%E5%8C%96%E6%8C%87%E5%AE%9A%E8%A7%86%E5%9B%BE-action%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E5%AE%9A%E8%A7%86%E5%9B%BE%2F</url>
    <content type="text"><![CDATA[m2må­—æ®µçš„contextå±žæ€§æŽ¥æ”¶ä¸€ä¸ª tree_view_ref å±žæ€§ï¼Œé€šè¿‡å®ƒæŒ‡å®šç‰¹å®šçš„æ‰“å¼€è§†å›¾å³å¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼š 1. é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‰“å¼€å­—æ®µæ¨¡åž‹çš„treeè§†å›¾ï¼š123456789101112&lt;!--Tree M2M Select View--&gt; &lt;record model="ir.ui.view" id="&#123;tree_id&#125;"&gt; &lt;field name="name"&gt;Tree M2M Select View&lt;/field&gt; &lt;field name="model"&gt;&#123;model_name&#125;&lt;/field&gt; &lt;field name="priority" eval="20"/&gt; &lt;field name="arch" type="xml"&gt; &lt;tree&gt; &lt;field name="name"/&gt; &lt;field name="active_flag"/&gt; &lt;/tree&gt; &lt;/field&gt; &lt;/record&gt; æ³¨æ„ï¼š&emsp;&emsp;æœ€å¥½æŒ‡å®šä¸€ä¸ªpriorityå±žæ€§å€¼&gt;16ï¼Œå¦åˆ™å¯èƒ½ä¼šå°†ä½ åŽŸæ¥modelçš„treeè§†å›¾ä¹Ÿè·³è½¬åˆ°æ–°å†™çš„treeä¸Šäº†(odoo8ä¸­ä¼šå‡ºçŽ°è¿™ä¸ªæƒ…å†µ é»˜è®¤å€¼16 åŠ è½½é»˜è®¤å–æœ€æ–°çš„è§†å›¾)ï¼›æˆ–è€…ï¼Œä½ å¯ä»¥åœ¨actionä¸ŠæŒ‡å®šä¸€ä¸ªview_ids,ä¿è¯åŽŸç”Ÿçš„è§†å›¾ä¸€å®šè¿žæŽ¥åˆ°å¯¹åº”çš„ç±»åž‹è§†å›¾ï¼š1234&lt;field name="view_ids" eval="[(5, 0, 0), (0, 0, &#123;'view_mode': 'tree', 'view_id': ref('&#123;module_name&#125;.&#123;tree_view_id&#125;')&#125;), (0, 0, &#123;'view_mode': 'form', 'view_id': ref('&#123;module_name&#125;.&#123;form_view_id&#125;')&#125;)]"/&gt; 2. åœ¨å¯¹åº”çš„m2må­—æ®µä¸ŠæŒ‡å®šè§†å›¾1&lt;field name="element_ids" context="&#123;'tree_view_ref': '&#123;module_name&#125;.&#123;tree_id&#125;'&#125;"&gt; ç®€å•çš„æ€»ç»“ï¼Œå°±åˆ°è¿™é‡Œå§ï¼Œå¤§å®¶å¦‚æžœæœ‰æ›´å¥½çš„æ–¹å¼è¯·åˆ†äº«ç»™æˆ‘~]]></content>
      <categories>
        <category>Odoo</category>
        <category>XML</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
        <tag>XML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo12çš„æ•°æ®åº“è¡¨çº¦æŸå˜åŒ–æ—¶å¦‚ä½•æ›´æ–°çº¦æŸ(_sql_constraints)]]></title>
    <url>%2Fbbs.github.io%2FOdoo12%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%BA%A6%E6%9D%9F%E5%8F%98%E5%8C%96%E6%97%B6%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%E7%BA%A6%E6%9D%9F-sql-constraints%2F</url>
    <content type="text"><![CDATA[ä¸¤ç§æ–¹å¼ï¼š 1. è¦†ç›–é‡å†™ä¸¾ä¸ªðŸŒ°ï¼š 12345678910111213141516# odooæºç é…±ç´«_sql_constraints = [ ('code_and_name', 'UNIQUE(code,name)', _("Code and Name must be unique!")), ]# çŽ°åœ¨å˜æˆäº† code + company å”¯ä¸€çº¦æŸ# å¦‚æžœå“¦æˆ‘ä»¬ä¸ä»‹æ„uniqueçš„åœ¨æ•°æ®åº“ä¸­çš„åç§° æˆ‘ä»¬å¯ä»¥é…±ç´«å†™_sql_constraints = [ ('code_and_name', 'UNIQUE(code,company_id)', _("Code and Company must be unique!")), ]# å³åç§°ç›¸åŒï¼Œç›´æŽ¥è¦†ç›– å¯ä»¥å–æ•°æ®åº“ä¸­æŸ¥çœ‹è¡¨çš„uniqueé€‰é¡¹ ![è¦†ç›–é‡å†™](https://img-blog.csdnimg.cn/20190311140149173.png) 2. æŸ¥è¯¢åˆ é™¤å¹¶æ–°å¢ž1234567891011121314151617181920212223242526272829303132333435# odooæºç é…±ç´«(account.account) _sql_constraints = [ ('code_company_uniq', 'unique (code,company_id)', 'The code of the account must be unique per company !') ]# æŸ¥è¯¢åˆ é™¤å¹¶æ–°å¢žé…±ç´«# -*- coding: utf-8 -*-from odoo import _, api, fields, models, modulesfrom odoo.exceptions import ValidationErrorimport logging_logger = logging.getLogger(__name__)class AcountAccountInherit(models.Model): _inherit = 'account.account' @api.model_cr def init(self): # åˆ é™¤Odooæºç  ç§‘ç›®è¡¨çš„çº¦æŸæ¡ä»¶ cr = self.env.cr unique_name = 'account_account_code_company_uniq' table_name = 'account_account' cr.execute("""SELECT 1 from pg_constraint cs JOIN pg_class cl ON (cs.conrelid = cl.oid) WHERE cs.conname=%s and cl.relname=%s""", (unique_name, table_name)) if cr.fetchone(): cr.execute('ALTER TABLE "%s" DROP CONSTRAINT "%s"' % (table_name, unique_name), ) _logger.info('Dropped CONSTRAINT %s@%s', table_name, unique_name) # æ–°å¢žæ–°çº¦æŸ _sql_constraints = [ ('code_and_account_structure', 'UNIQUE(code,account_structure_id)', _("Code and account structure must be unique!")), ]]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo12ä¸ªæ€§åŒ–æ¨¡å—è¦†ç›–æºç å­—æ®µçš„ç¿»è¯‘(i18n)]]></title>
    <url>%2Fbbs.github.io%2FOdoo12%E4%B8%AA%E6%80%A7%E5%8C%96%E6%A8%A1%E5%9D%97%E8%A6%86%E7%9B%96%E6%BA%90%E7%A0%81%E5%AD%97%E6%AE%B5%E7%9A%84%E7%BF%BB%E8%AF%91-i18n%2F</url>
    <content type="text"><![CDATA[åœºæ™¯å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—æ®µ123# æºç  analytic æ¨¡å—"""pyä»£ç """code = fields.Char(string='Reference', index=True, track_visibility='onchange') 12345&quot;&quot;&quot;poä»£ç &quot;&quot;&quot;#. module: analytic#: model:ir.model.fields,field_description:analytic.field_account_analytic_account__codemsgid &quot;Reference&quot;msgstr &quot;å‚è€ƒ&quot; çŽ°åœ¨æˆ‘ä»¬éœ€è¦å°†Referenceç¿»è¯‘æˆ â€œç¼–ç å‚ç…§â€1234567891011# ä¸ªæ€§åŒ– new_module æ¨¡å—"""pyä»£ç """# ç»§æ‰¿_get_import_cursoræ–¹æ³• å°†ç»§æ‰¿æ¨¡å—çš„ç¿»è¯‘æ›¿æ¢ å¯ç”¨class IrTranslation(models.Model): _inherit = 'ir.translation' def _get_import_cursor(self): context = self._context.copy() context['overwrite'] = True self = self.with_context(context) return super(IrTranslation, self)._get_import_cursor() 12345&quot;&quot;&quot;poä»£ç  è¦†ç›–åŽŸç¿»è¯‘&quot;&quot;&quot;#. module: analytic#: model:ir.model.fields,field_description:analytic.field_account_analytic_account__codemsgid &quot;Reference&quot;msgstr &quot;ç¼–ç å‚ç…§&quot; å…¶å®žè¿™ä¸ªä¸Žæˆ‘ä»¬configæ–‡ä»¶ä¸­çš„ â€“i18n-overwrite =&gt; config[â€˜overwrite_existing_translationsâ€™] çš„é…ç½®å†…å®¹ç›¸åŒã€‚ è¿™æ ·å¤„ç†åŽï¼Œæˆ‘ä»¬éœ€è¦å‡çº§æˆ‘ä»¬çš„ä¸ªæ€§åŒ–æ¨¡å— new_module ï¼Œå‡çº§å®ŒæˆåŽï¼Œç¿»è¯‘è¦†ç›–æˆåŠŸã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š1. åŠ è½½ç¿»è¯‘ä¸ä¼šç”Ÿæ•ˆ 2. å‡çº§æ¨¡å—åŽç¿»è¯‘è¦†ç›–æˆåŠŸï¼Œä½†æ˜¯å¦‚æžœå†æ¬¡åŠ è½½ç¿»è¯‘ï¼Œè¦†ç›–çš„ç¿»è¯‘ä¼šè¢«è¿˜åŽŸã€‚ è®¨è®ºï¼šå¦‚ä½•å°†æºç çš„ç¿»è¯‘æ›¿æ¢æŽ‰ï¼Œå¹¶ä¸”è¿˜èƒ½æ‹¿æŒä¹…åŒ–ï¼Œå¦‚æžœæœ‰å¥½çš„å»ºè®®è¯·æ‚¨æŒ‡ç‚¹ï¼]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[odoo actioné¡µé¢è·³è½¬ç›´æŽ¥ä¸ºç¼–è¾‘çŠ¶æ€æ“ä½œ]]></title>
    <url>%2Fbbs.github.io%2Fodoo-action%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC%E7%9B%B4%E6%8E%A5%E4%B8%BA%E7%BC%96%E8%BE%91%E7%8A%B6%E6%80%81%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[123456789return &#123; &apos;type&apos;: &apos;ir.actions.act_window&apos;, &apos;view_type&apos;: &apos;form&apos;, &apos;view_mode&apos;: &apos;form&apos;, &apos;res_model&apos;: &apos;ï¼›module.model_name&apos;, &apos;res_id&apos;: self.id, &apos;context&apos;: self.env.context, &apos;flags&apos;: &#123;&apos;initial_mode&apos;: &apos;edit&apos;&#125;, &#125; åŠ ä¸Šè¿™å¥ï¼šâ€˜flagsâ€™: {â€˜initial_modeâ€™: â€˜editâ€™}, Odoo12ä½¿ç”¨ï¼šcontext[â€˜form_view_initial_modeâ€™] = â€˜editâ€™ ç‰¹åˆ«æ„Ÿè°¢æŠ€æœ¯æä¾›æ¥æºURL]]></content>
      <categories>
        <category>Odoo</category>
        <category>XML</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
        <tag>XML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexoçš„å‘æ±‡æ€»]]></title>
    <url>%2Fbbs.github.io%2Fhexo%E7%9A%84%E5%9D%91%E6%B1%87%E6%80%BB%2F</url>
    <content type="text"><![CDATA[åˆ é™¤hexoå·¥ç¨‹æ‰‹åŠ¨rm -rf hexoå·¥ç¨‹ åŽï¼Œå‘çŽ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œè™½ç„¶ç»‘å®šäº†github page,ä½†æ˜¯hexoå·¥ç¨‹çš„æºç å¹¶æ²¡æœ‰äº†ï¼Œç›®å‰æ˜¯æ²¡å‘çŽ°ä»€ä¹ˆæ¢å¤çš„æ–¹å¼ã€‚ æŽ¨èå¤§å®¶ä½¿ç”¨pycharmç¼–å†™ï¼Œå°±ç®—rm -rf åˆ é™¤äº†å·¥ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥mkdir åŒåhexoå·¥ç¨‹æ–‡ä»¶ï¼Œç„¶åŽå³å‡»æ–‡ä»¶ä¸Šé€‰æ‹©Local History,æ‰¾åˆ°ä¸€ä¸ªåŽ†å²ç‚¹ï¼Œé€‰æ‹©Revertï¼Œè¿™æ—¶å€™å·¥ç¨‹å°±æ¢å¤åˆ°äº†åŽ†å²ç‚¹ã€‚ æŽ¨èä½¿ç”¨æ–¹å¼ ä½¿ç”¨pycharmç¼–è¾‘ ä½¿ç”¨gitä»“åº“ç®¡ç†ï¼Œå®šæ—¶ä¸Šä¼ hexoå·¥ç¨‹ä»£ç ]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[npmåˆ‡æ¢å›½å†…æº]]></title>
    <url>%2Fbbs.github.io%2Fnpm%E5%88%87%E6%8D%A2%E5%9B%BD%E5%86%85%E6%BA%90%2F</url>
    <content type="text"><![CDATA[åˆ‡æ¢å›½å†…æºnpm install -g cnpm â€“registry=https://registry.npm.taobao.org cnpm install hexo-cli -g]]></content>
      <categories>
        <category>linux</category>
        <category>npm</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PEP8å¿…é¡»å­¦ä¹ ]]></title>
    <url>%2Fbbs.github.io%2FPEP8%E5%BF%85%E9%A1%BB%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[URL-ChineseURL-English è¿™äº›å¼€å‘è§„èŒƒè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œå¿…è¯»]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Postgresql10æŒç»­å­¦ä¹ (ing)]]></title>
    <url>%2Fbbs.github.io%2FPostgresql10%E6%8C%81%E7%BB%AD%E5%AD%A6%E4%B9%A0-ing%2F</url>
    <content type="text"><![CDATA[è§†å›¾ è§†å›¾æ˜¯ä¸ºäº†é¿å…æ¯æ¬¡æŸ¥è¯¢éƒ½è¦æ•²æ‰“sqlè€Œå‡ºçŽ°çš„æ›¿ä»£ç‰©ï¼Œå®ƒå°±åƒä¸€å¼ è¡¨ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªå˜ä¹‹é—´çš„ç»“æž„å’Œæ•°æ®å…³ç³»ã€‚12345-- å­¦ç”Ÿé€‰è¯¾æŸ¥è¯¢create view myView AS select p.name,p.age,c.name from people p,course c where p.id = c.p_id ä»¥åŽæˆ‘æƒ³æŸ¥è¯¢æ•°æ®ï¼Œæˆ‘åªéœ€è¦select * from myView;å°±èƒ½å®žçŽ°æˆ‘çš„æ•´ä¸ªæŸ¥è¯¢ã€‚ å¤–é”® å¯ä»¥çº¦æŸè¡¨çš„æ’å…¥æ•°æ®çš„å®Œæ•´æ€§ äº‹åŠ¡ äº‹åŠ¡æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯å®ƒå°†å¤šä¸ªæ­¥éª¤æ†ç»‘æˆäº†ä¸€ä¸ªå•ä¸€çš„ã€è¦ä¹ˆå…¨å®Œæˆè¦ä¹ˆå…¨ä¸å®Œæˆçš„æ“ä½œ ä¸€ä¸ªäº‹åŠ¡è¢«æ•°æ®åº“ç³»ç»Ÿå®Œæˆå¹¶è®¤å¯ï¼Œå®ƒå°±è¢«æ°¸ä¹…åœ°è®°å½•ä¸‹æ¥ä¸”å³ä¾¿å…¶åŽå‘ç”Ÿå´©æºƒä¹Ÿä¸ä¼šè¢«ä¸¢å¤± å½“å¤šä¸ªäº‹åŠ¡å¹¶å‘è¿è¡Œæ—¶ï¼Œæ¯ä¸€ä¸ªéƒ½ä¸èƒ½çœ‹åˆ°å…¶ä»–äº‹åŠ¡æœªå®Œæˆçš„ä¿®æ”¹ ä¸€ç»„è¢«BEGINå’ŒCOMMITåŒ…å›´çš„è¯­å¥ä¹Ÿè¢«ç§°ä¸ºä¸€ä¸ªäº‹åŠ¡å— ä¿å­˜å›žæ»šç‚¹ å›žæ»šç‚¹å‰çš„æ•°æ®ä¾æ—§å­˜åœ¨ å›žæ»šç‚¹åˆ°rollbackåŒºé—´çš„æ“ä½œä¸è®°å½•savepoint å›žæ»šç‚¹åç§°rollback to å›žæ»šç‚¹åç§°1234567891011BEGIN;UPDATE accounts SET balance = balance - 100.00WHERE name = 'Alice';SAVEPOINT my_savepoint;UPDATE accounts SET balance = balance + 100.00WHERE name = 'Bob';-- oops ... forget that and use Wally's accountROLLBACK TO my_savepoint;UPDATE accounts SET balance = balance + 100.00WHERE name = 'Wally';COMMIT; çª—å£å‡½æ•° çª—å£å‡½æ•°ä¸»è¦æ˜¯ç”¨èšé›†å‡½æ•°çš„ï¼Œä½†æ˜¯éœ€è¦éƒ¨åˆ†èšé›†ï¼Œç›¸åŒèšé›†å­—æ®µè®°å½•æ”¾ä¸€èµ·è¿›è¡Œèšé›†è®¡ç®—OVER (ORDER BY å­—æ®µå ORDER BY å­—æ®µå) æ˜¯çª—å£å‡½æ•°çš„å®šä¹‰1SELECT salary, sum(salary) OVER (ORDER BY salary) FROM empsalary; ç»§æ‰¿123456789CREATE TABLE cities (name text,population real,altitude int -- (in ft));CREATE TABLE capitals (state char(2)) INHERITS (cities); 123SELECT name, altitudeFROM ONLY citiesWHERE altitude &gt; 500; ONLYç”¨äºŽæŒ‡ç¤ºæŸ¥è¯¢åªåœ¨citiesè¡¨ä¸Šè¿›è¡Œè€Œä¸ä¼šæ¶‰åŠåˆ°ç»§æ‰¿å±‚æ¬¡ä¸­ä½äºŽcitiesä¹‹ä¸‹çš„å…¶ä»–è¡¨]]></content>
      <categories>
        <category>Postgresql</category>
      </categories>
      <tags>
        <tag>Postgresql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo12-å¯åŠ¨æŒç»­åˆ†æž(ing)]]></title>
    <url>%2Fbbs.github.io%2FOdoo12-%E5%90%AF%E5%8A%A8%E6%8C%81%E7%BB%AD%E5%88%86%E6%9E%90-ing%2F</url>
    <content type="text"><![CDATA[sys.argv:ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰§è¡Œçš„æ–‡ä»¶å…¨è·¯å¾„ï¼ŒåŽé¢çš„å‚æ•°æ˜¯æ‰§è¡Œæ–‡ä»¶æ—¶çš„å‚æ•° OptionContainer12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152æŠ½è±¡ç±»ç±»å±žæ€§ï¼š standard_option_list - ä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºŽåˆ—å‡ºå…¬å…±çš„é€‰é¡¹ï¼Œä¸€èˆ¬åœ¨ç»§æ‰¿çš„å­ç±»ä¸­å®žçŽ° å®žä¾‹å±žæ€§ï¼š option_listï¼š é€‰é¡¹å¯¹è±¡åˆ—è¡¨ _short_optï¼š&#123;string:Opthon&#125; ç®€å†™ _long_optï¼š&#123;string:Opthon&#125; å…¨ç§° defaultsï¼š&#123;string:any&#125; å…¶ä»–é»˜è®¤æŒ‡ä»¤æ˜ å°„æ–¹æ³•ï¼š __init__: self._create_option_list() self.option_class = option_class# é€‰é¡¹ç±» self.set_conflict_handler(conflict_handler)# å†²çªç±» self.set_description(description) # æè¿° _create_option_mappings: # åˆå§‹åŒ–ä¸‰ä¸ªå®žä¾‹å±žæ€§ self._short_opt = &#123;&#125; # single letter -&gt; Option instance self._long_opt = &#123;&#125; # long option -&gt; Option instance self.defaults = &#123;&#125; # maps option dest -&gt; default value _share_option_mappingsï¼š # è®¾ç½®ä¸‰ä¸ªå®žä¾‹å±žæ€§ set_conflict_handlerï¼š # è®¾ç½®å†²çªå¤„ç† å‚æ•°ï¼š handler - error/resolve conflict_handler = handler set_descriptionï¼š # è®¾ç½®æè¿° get_descriptionï¼š # èŽ·å–æè¿° def destroy(self): # ä¸‰ä¸ªå®žä¾‹å‚æ•°é”€æ¯ &quot;&quot;&quot;see OptionParser.destroy().&quot;&quot;&quot; del self._short_opt del self._long_opt del self.defaults _check_conflictï¼š éªŒè¯å½“å‰é€‰é¡¹æ˜¯å¦å·²ç»å­˜åœ¨ add_optionï¼š å•ä¸ªé€‰é¡¹æ·»åŠ  add_optionsï¼š å‚æ•°ï¼š option_list æ‰¹é‡é€‰é¡¹æ·»åŠ  OptionParserodoo.tools.config.parse_config(args)æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ odoo-bin import odoo åŒ…å¼•å…¥ï¼Œå‚æ•°åˆå§‹åŒ– odoo.cli.main()å¯åŠ¨æœåŠ¡ command.py args - æ‹¿åˆ°å¯¹åº”çš„å¯åŠ¨å‚æ•° commands - å¯è°ƒç”¨å‡½æ•°é›†åˆ o - å®žä¾‹åŒ–Serverç±» o.run(args) - å¯åŠ¨æœåŠ¡ cli/server.py/main(args) cli/server.py(åªæåŠä¸»è¦éƒ¨åˆ†) check_root_user() æ£€æŸ¥å½“å‰æ“ä½œæœºå™¨ç”¨æˆ·ä¸èƒ½ä¸ºroot é™åˆ¶æƒé™ odoo.tools.config.parse_config(args)# åŠ è½½â€“configæ–‡ä»¶å†…å®¹åˆ°å…¨å±€å˜é‡ æˆ–è€…åˆ›å»ºä¸€ä¸ª./configæ–‡ä»¶ check_postgres_user()#postçš„ç”¨æˆ·ä¸èƒ½æ˜¯postgres report_configuration()# æ‰“å°é…ç½®ä¿¡æ¯ config å°±æ˜¯å½“å‰åŠ è½½è¿‡configæ–‡ä»¶ ç³»ç»Ÿçš„é…ç½®å‚æ•°å®žä¾‹ config - pidfileæ–‡ä»¶å­˜åœ¨çš„è¯ï¼Œå¦‚æžœargså‚æ•°ç¬¬äºŒä¸ªä¸ºeventedï¼Œæ‰“å¼€æ–‡ä»¶å­˜å‚¨ä¸»çº¿ç¨‹ç›¸å…³ odoo.service.server.startå¯åŠ¨wsgi load_server_wide_modules åŠ è½½æœåŠ¡å™¨é¢„æ”¯æ¨¡å—baseã€web initialize_sys_path()åˆå§‹åŒ–é…ç½®çš„ç³»ç»Ÿè·¯å¾„addons_path æŒ‚è½½é’©å­ sys.meta_path å’Œ hooked=True]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonç»Ÿè®¡æ–‡ä»¶è¡Œæ•°]]></title>
    <url>%2Fbbs.github.io%2FPython%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E8%A1%8C%E6%95%B0%2F</url>
    <content type="text"><![CDATA[basedirs = [â€˜/Users/tc/code/odoo8/hrpâ€™]filelists = [] æŒ‡å®šæƒ³è¦ç»Ÿè®¡çš„æ–‡ä»¶ç±»åž‹whitelist = [â€˜xmlâ€™, â€˜pyâ€™, â€˜jsâ€™, â€˜cssâ€™] éåŽ†æ–‡ä»¶, é€’å½’éåŽ†æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰12345678910111213def getFile(basedir): global filelists local_filelists = [] for parent,dirnames,filenames in os.walk(basedir): #for dirname in dirnames: # getFile(os.path.join(parent,dirname)) #é€’å½’ for filename in filenames: ext = filename.split('.')[-1] #åªç»Ÿè®¡æŒ‡å®šçš„æ–‡ä»¶ç±»åž‹ï¼Œç•¥è¿‡ä¸€äº›logå’Œcacheæ–‡ä»¶ if ext in whitelist: local_filelists.append(os.path.join(parent,filename)) filelists.append(os.path.join(parent,filename)) return local_filelists ç»Ÿè®¡ä¸€ä¸ªæ–‡ä»¶çš„è¡Œæ•°def countLine(fname): count = 0 for file_line in open(fname).xreadlines(): if file_line != â€˜â€™ and file_line != â€˜\nâ€™: #è¿‡æ»¤æŽ‰ç©ºè¡Œ count += 1 return countif name == â€˜mainâ€˜ : startTime = time.clock() all_line = 0 for basedir in basedirs: local_filelists = getFile(basedir) totalline = 0 for filelist in local_filelists: totalline = totalline + countLine(filelist) all_line += totalline print str(basedir.split(â€œ/â€œ)[-1])+â€™,â€™,totalline print â€˜ =&gt; ALL LINES:â€™+str(all_line)]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-Xmlrpc]]></title>
    <url>%2Fbbs.github.io%2FOdoo-Xmlrpc%2F</url>
    <content type="text"><![CDATA[XMLRPC çœ‹ä¾‹å­1234å¤–éƒ¨è°ƒç”¨url:http://localhost:8069/xmlrpc/2/objectmethod:postapplication/xml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;!--XMLè¯·æ±‚æŠ¥æ–‡ç»“æž„--&gt;&lt;methodCall&gt; &lt;!-- used to call methods of odoo models --&gt; &lt;methodName&gt;execute&lt;/methodName&gt; &lt;params&gt; &lt;param&gt; &lt;!--æ•°æ®åº“åç§°--&gt; &lt;value&gt;&lt;string&gt;zocx919&lt;/string&gt;&lt;/value&gt; &lt;/param&gt; &lt;param&gt; &lt;!--ç™»å½•ç”¨æˆ·ID--&gt; &lt;value&gt;&lt;int&gt;ç”¨æˆ·ID&lt;/int&gt;&lt;/value&gt; &lt;/param&gt; &lt;param&gt; &lt;!--ç”¨æˆ·ç™»å½•å¯†ç --&gt; &lt;value&gt; &lt;string&gt;zochrp&lt;/string&gt; &lt;/value&gt; &lt;/param&gt; &lt;param&gt; &lt;!--è°ƒç”¨æ–¹æ³•å­˜åœ¨çš„æ¨¡åž‹--&gt; &lt;value&gt; &lt;string&gt;account.asset.asset&lt;/string&gt; &lt;/value&gt; &lt;/param&gt; &lt;param&gt; &lt;!--è°ƒç”¨æ–¹æ³•çš„åç§°--&gt; &lt;value&gt; &lt;string&gt;get_datas&lt;/string&gt; &lt;/value&gt; &lt;/param&gt; &lt;!--ä¼ å…¥æ–¹æ³•çš„å‚æ•°--&gt; &lt;param&gt; &lt;array&gt; &lt;struct&gt; &lt;member&gt; &lt;!--Key ä¸ç”¨å†™string å¦åˆ™æŠ¥é”™--&gt; &lt;name&gt;name&lt;/name&gt; &lt;!--Value--&gt; &lt;value&gt;&lt;string&gt;LiMing&lt;/string&gt;&lt;/value&gt; &lt;/member&gt; &lt;/struct&gt; &lt;value&gt;&lt;int&gt;1&lt;/int&gt;&lt;/value&gt; &lt;/array&gt; &lt;/param&gt; &lt;/params&gt;&lt;/methodCall&gt; 123456789# å“åº”æ–¹æ³•class HrpZocAccountAssetAsset(models.Model): _inherit = "account.asset.asset" @api.model def get_datas(self, vals): print 'ok............' return vals # è¿”å›žå€¼ è¦æ‹¼æŽ¥æˆ å­—å…¸ ç±»åž‹ï¼Œ xmlrpcè‡ªåŠ¨è§£æžè¿”å›žxmlæ ¼å¼å“åº”æŠ¥æ–‡ åˆ†æž1ã€è°ƒç”¨çš„æ•°æ®ä¸­è®°å¾—å¿…é¡»ä½¿ç”¨çš„æ˜¯object2ã€XMLè¯·æ±‚æŠ¥æ–‡ä¸­ arrayæ ‡ç­¾ç±»ä¼¼äºŽpythonä¸­çš„åˆ—è¡¨ï¼Œstructæ ‡ç­¾ç±»ä¼¼äºŽpythonä¸­çš„å­—å…¸ï¼Œstructç»“æž„ä¸­åªèƒ½å‡ºçŽ°æ ¼å¼: 1234&lt;member&gt; &lt;name&gt;xxx&lt;/name&gt; &lt;value&gt;xxx&lt;/value&gt;&lt;/member&gt; 3ã€pythonä»£ç ä¸­éœ€è¦å®šä¹‰ç‰¹å®šçš„æŽ¥æ”¶æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›žä¸€ä¸ªæ•°æ®å­—å…¸ å…¶ä»–æš‚æ— ]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-Jsonrpc]]></title>
    <url>%2Fbbs.github.io%2FOdoo-Jsonrpc%2F</url>
    <content type="text"><![CDATA[JSONRPC çœ‹ä¾‹å­1234å¤–éƒ¨è°ƒç”¨url:http://localhost:8069/jsonrpcmethod:postapplication/json 12345678910111213&#123; "jsonrpc": "2.0", "method": "call", "params": &#123; "service": "object", "method": "execute", "args": ["æ•°æ®åº“åç§°", ç™»å½•ç”¨æˆ·ID, "ç™»å½•ç”¨æˆ·å¯†ç ", "æ¨¡åž‹", "æ–¹æ³•", [ 'å‚æ•°åŠåˆ' ] ] &#125;&#125; 123456789# å“åº”æ–¹æ³•class HrpZocAccountAssetAsset(models.Model): _inherit = "account.asset.asset" @api.model def get_datas(self, vals): print 'ok............' return vals # è¿”å›žå€¼ è¦æ‹¼æŽ¥æˆ å­—å…¸ ç±»åž‹å“åº”æŠ¥æ–‡]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-QWeb]]></title>
    <url>%2Fbbs.github.io%2FOdoo-QWeb%2F</url>
    <content type="text"><![CDATA[Base Template /static/src/xml/*.xml å®šä¹‰æ¨¡æ¿ã€‚ openerp.pyçš„qwebä¸­æ³¨å†Œ*.xmlæ–‡ä»¶ JSåŠ è½½æ¨¡æ¿(ä¸¤ç§) QWeb.render(æ¨¡æ¿åç§°) template: â€œæ¨¡æ¿åç§°â€ JSè°ƒç”¨æ¨¡æ¿ä¼ å‚(ä¸¤ç§) QWeb.render(æ¨¡æ¿åç§°,å‚æ•°å­—å…¸) templateæŽ¥æ”¶æ˜¾ç¤º\ template: â€œæ¨¡æ¿åç§°â€ é€šè¿‡initæ–¹æ³•åˆå§‹åŒ–å‚æ•°,é€šè¿‡thisä¼ é€’(æ³¨æ„parentå‚æ•°å’Œç»§æ‰¿_superæ–¹æ³•å¿…é¡»ä½¿ç”¨)1234init: function(parent) &#123; this._super(parent); this.name = "Mordecai"; &#125;, templateæŽ¥æ”¶æ˜¾ç¤º\]]></content>
      <categories>
        <category>Odoo</category>
        <category>Qweb</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
        <tag>Qweb</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-æŠ¥è¡¨]]></title>
    <url>%2Fbbs.github.io%2FOdoo-%E6%8A%A5%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[pdfæŠ¥è¡¨PDFæŠ¥è¡¨ç»“æž„ ä¸€ä¸ªXMLæ•°æ®é…ç½®æ–‡ä»¶ ä¸€ä¸ªpyæ–‡ä»¶ OdooåŽŸç”Ÿçš„æŠ¥è¡¨é€šè¿‡HTMLæˆ–è€…QWebå®šä¹‰ï¼Œå¯ä»¥é€šè¿‡QwebæŽ§åˆ¶æµå·¥å…·ï¼Œä½¿ç”¨wkhtmltopdfæ¥æ³¨å†Œpdfã€‚å®šä¹‰ä¸€ä¸ªæŠ¥è¡¨çš„ä¸»è¦éœ€è¦å®šä¹‰1.æŠ¥è¡¨ 2.æŠ¥è¡¨æ¨¡æ¿ 3.å¯ä»¥ä¸ªæ€§åŒ–æ ¼å¼ 4.å¯ä»¥å®¢æˆ·åŒ–classæ¥ä¸ºæŠ¥è¡¨çš„æ•°æ®æœåŠ¡ Report æŠ¥è¡¨éƒ½éœ€è¦å®šä¹‰ä¸€ä¸ª report_actionï¼š å¯ä»¥é€šè¿‡ä¸€ä¸ªæ ‡ç­¾æ¥å®šä¹‰ report_action.æ ¼å¼å®šä¹‰ï¼š id - æ˜¯report_actionçš„å¤–éƒ¨ID(ir_model_dataå¯æŸ¥) name(å¿…è¾“) - æ•°æ®åº“ä¸­çš„report_name ç”¨äºŽå¯¹åº”æŠ¥è¡¨æ¨¡æ¿çš„å¤–éƒ¨ID file - æ•°æ®åº“ä¸­çš„report_file ä¸Žnameç›¸åŒ string - PDFæŠ¥è¡¨åç§° actionçš„ä¸‹æ‹‰åç§° model(å¿…è¾“) - æŠ¥è¡¨æ”¾é‚£ä¸ªmodelçš„ç•Œé¢ä¸Š report_type(å¿…è¾“) - æŠ¥è¡¨ç±»åž‹ ç›®å‰æˆ‘ä»¬è®¤ä¸ºå®ƒåªæœ‰ä¸¤ç§æ‰“å°PDFçš„qweb-pdfã€å’Œæ‰“å°HTMLçš„qweb-html. report_name - æŠ¥è¡¨åç§° è¾“å‡ºæŠ¥è¡¨çš„åå­— groups - ç»„æƒé™æŽ§åˆ¶ å“ªä¸ªå¯¹åº”çš„ç”¨æˆ·ç»„èƒ½å¤Ÿè§¦å‘æŠ¥è¡¨æ“ä½œ attachment_use - bool(true/false) å¦‚æžœè®¾ç½®æˆTrueåˆ™ä¼šå°†æ‰“å°çš„æŠ¥è¡¨ä»¥é™„ä»¶attachmentçš„å½¢å¼å­˜å‚¨åœ¨ç³»ç»Ÿçš„é™„ä»¶ç³»ç»Ÿä¸­ï¼Œç”¨äºŽä¸€æ¬¡ä½¿ç”¨ï¼Œéœ€è¦æµ‹è¯•ã€‚ attachment - pythoné€»è¾‘èµ‹å€¼è¡¨è¾¾å¼ï¼Œç”¨æ¥å®šä¹‰é™„ä»¶å­˜å‚¨çš„æ–‡ä»¶åç§° å¯ä½¿ç”¨ä¸€å®šçš„é€»è¾‘åˆ¤æ–­èµ‹å€¼ã€‚ paperformat - é»˜è®¤å®šä¹‰ä¸ºå…¬å¸ä¸‹çš„çº¸å¼ æ ¼å¼ å¦‚æžœæœ‰ç‰¹æ®Šéœ€è¦å¯ä»¥è‡ªå®šä¹‰çº¸å¼ æ ¼å¼ã€‚ 1234567891011&lt;report id="account_invoices" model="account.invoice" string="Invoices" report_type="qweb-pdf" name="account.report_invoice" file="account.report_invoice" attachment_use="True" attachment="(object.state in ('open','paid')) and ('INV'+(object.number or '').replace('/','')+'.pdf')"/&gt; Report Template æŠ¥è¡¨æ¨¡æ¿ä¸­callå¤–éƒ¨å¸ƒå±€æ ·å¼ï¼Œå®ƒå°†æ·»åŠ é»˜è®¤çš„æŠ¥è¡¨å¤´å’ŒæŠ¥è¡¨å°¾ã€‚PDFæŠ¥è¡¨ä½“æ±ŸåŒ—åŒ…å«åœ¨æ ‡ç­¾ä¸­ï¼Œtemplateçš„å¤–éƒ¨idå¿…é¡»ç¬¦åˆæŠ¥è¡¨å®šä¹‰è§„åˆ™ï¼Œä»ŽQwebæ¨¡æ¿ä¸­ï¼Œèƒ½å¤Ÿé€šè¿‡docsè®¿é—®å¯¹è±¡åŒ…å«çš„æ‰€æœ‰å­—æ®µã€‚ æŠ¥è¡¨ä¸­æœ‰ä¸€äº›ç‰¹å®šçš„å˜é‡: docs - å½“å‰æŠ¥è¡¨çš„è®°å½•é›†åˆ(æ•°æ®) doc_ids - å½“å‰æŠ¥è¡¨çš„è®°å½•é›†åˆçš„idsåˆ—è¡¨ doc_model - docsåŒ…å«çš„æ•°æ®è®°å½•æ¥æºmodel time - ä»Žpythonæ ‡å‡†åº“ä¸­å¼•ç”¨çš„timeå¯¹è±¡ user - æ‰“å°æŠ¥è¡¨çš„ç”¨æˆ· res_company - å½“å‰æ‰“å°æŠ¥è¡¨ç”¨æˆ·å¯¹åº”å…¬å¸ å¦‚æžœéœ€è¦è®¿é—®å…¶ä»–æ¨¡åž‹çš„è®°å½•é›†ï¼Œå¯ä»¥å…³æ³¨åŽç»­çš„å®¢æˆ·è¯æŠ¥è¡¨ã€‚ Translatable Templates(å¯ç¿»è¯‘çš„æ¨¡æ¿)å¦‚æžœéœ€è¦æ ¹æ®ä¸šåŠ¡ä¼™ä¼´çš„è¯­è¨€æ¥æ‰“å°å¯¹åº”è¯­è¨€æ ¼å¼çš„æŠ¥è¡¨ï¼Œéœ€è¦å®šä¹‰ä¸¤ä¸ªæ¨¡æ¿ã€‚ ä¸»æŠ¥è¡¨æ¨¡æ¿ å¯ç¿»è¯‘çš„æ–‡ä»¶ å¯ä»¥åœ¨ä¸»æŠ¥è¡¨æ¨¡æ¿ä¸­åŠ å…¥t-langå±žæ€§è®¾ç½®è¯­è¨€æ¥ç›´æŽ¥è°ƒç”¨ç¿»è¯‘æ–‡ä»¶ï¼Œå¦‚æžœéœ€è¦å¯¹ä½¿ç”¨çš„å­—æ®µç­‰è¿›è¡Œç¿»è¯‘ï¼Œå¯ä»¥å¯¹å­—æ®µé™„å±žçš„å¯¹è±¡ä¼ å…¥ç›¸åº”çš„contextå‚æ•°ï¼Œä½¿å¯¹è±¡å˜çš„å¯ç¿»è¯‘ã€‚1å¦‚æžœæ²¡æœ‰æƒ³è¦ç¿»è¯‘ï¼Œæœ€å¥½ä¸å†™ï¼Œå› ä¸ºå†™å…¥ä¼šé‡è¯»è®°å½•ï¼Œå½±å“æ‰“å°æ•ˆçŽ‡ 1234567891011121314151617181920212223242526&lt;!-- Main template --&gt;&lt;template id="report_saleorder"&gt; &lt;t t-call="web.html_container"&gt; &lt;t t-foreach="docs" t-as="doc"&gt; &lt;t t-call="sale.report_saleorder_document" t-lang="doc.partner_id.lang"/&gt; &lt;/t&gt; &lt;/t&gt;&lt;/template&gt;&lt;!-- Translatable template --&gt;&lt;template id="report_saleorder_document"&gt; &lt;!-- Re-browse of the record with the partner lang --&gt; &lt;t t-set="doc" t-value="doc.with_context(&#123;'lang':doc.partner_id.lang&#125;)" /&gt; &lt;t t-call="web.external_layout"&gt; &lt;div class="page"&gt; &lt;div class="oe_structure"/&gt; &lt;div class="row"&gt; &lt;div class="col-xs-6"&gt; &lt;strong t-if="doc.partner_shipping_id == doc.partner_invoice_id"&gt;Invoice and shipping address:&lt;/strong&gt; &lt;strong t-if="doc.partner_shipping_id != doc.partner_invoice_id"&gt;Invoice address:&lt;/strong&gt; &lt;div t-field="doc.partner_invoice_id" t-options="&#123;&amp;quot;no_marker&amp;quot;: True&#125;"/&gt; &lt;...&gt; &lt;div class="oe_structure"/&gt; &lt;/div&gt; &lt;/t&gt;&lt;/template&gt; è§£é‡Šä¸€ä¸‹:ä¸»æŠ¥è¡¨æ¨¡æ¿è°ƒç”¨é™„åŠ contextå±žæ€§t-langä¸ºdoc.partner_id.lang çš„ç¿»è¯‘æ¨¡æ¿ï¼Œè¿™æ ·å°±ä¼šè¢«å¯¹åº”çš„è¯­è¨€æ¸²æŸ“ã€‚è¿™æ ·çš„è¯ï¼ŒæŠ¥è¡¨å°±ä¼šæ‰“å°æˆå¯¹åº”ä¸šåŠ¡ä¼™ä¼´è¯­è¨€çš„æŠ¥è¡¨ã€‚å¦‚æžœåªéœ€è¦è½¬æ¢æŠ¥è¡¨ä½“å†…å®¹è€Œä¸åŠ¨æŠ¥è¡¨å¤´/å°¾éƒ¨åˆ†ï¼Œå¯ä»¥ï¼š1&lt;t t-call="web.external_layout" t-lang="en_US"&gt; Barcodes(æ¡å½¢ç )å¯ä»¥å¾ˆæ–¹ä¾¿çš„å€ŸåŠ©Qwebçš„è¯­æ³•å°†æ¡å½¢ç åµŒå…¥åˆ°æ¨¡æ¿ä¸­1&lt;img t-att-src="'/report/barcode/QR/%s' % 'My text in qr code'"/&gt; å¯ä»¥ä¼ é€’ä¸€äº›å‚æ•°ï¼š12&lt;img t-att-src="'/report/barcode/? type=%s&amp;value=%s&amp;width=%s&amp;height=%s'%('QR', 'text', 200, 200)"/&gt; Useful Remarks(æœ‰æ•ˆçš„è¯­æ³•) Report Templateå¯ä»¥ä½¿ç”¨Twitter Bootstrap å’Œ FontAwesomeç±»æ¥æ¸²æŸ“ã€‚ æœ¬åœ°CSSå¯ä»¥åœ¨Templateä¸­ä½¿ç”¨ã€‚ å¯ä»¥é€šè¿‡ç»§æ‰¿ä¸»æŠ¥è¡¨æ ·å¼æ¥æ’å…¥åˆ°æˆ‘ä»¬çš„cssä¸­ã€‚ 123456789&lt;template id="report_saleorder_style" inherit_id="report.style"&gt; &lt;xpath expr="."&gt; &lt;t&gt; .example-css-class &#123; background-color: red; &#125; &lt;/t&gt; &lt;/xpath&gt;&lt;/template&gt; Paper Format(çº¸å¼ æ ¼å¼)æŠ¥è¡¨æ ¼å¼æ˜¯report.paperformatå¯¹è±¡çš„è®°å½•ï¼Œå®ƒä»¬ç»å¸¸åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªå‚æ•°: name(å¿…è¾“) - å¯æ ‡è¯†æ ·æ¿æ ¼å¼çš„ç®€è¦åç§° description - å¯¹æ ·æ¿ç®€çŸ­çš„ä»‹ç» format - é¢„å®šä¹‰æ ¼å¼A0-A9 B0-B9 Legal Letter Tabloidâ€¦ é»˜è®¤æ˜¯A4ï¼Œå¦‚æžœå®šä¹‰äº†è¿™ä¸ªå‚æ•°å°†æ— æ³•ä½¿ç”¨ä¸ªæ€§åŒ–çš„æ ¼å¼ã€‚ dpi - è¾“å‡ºçš„DPI é»˜è®¤ä¸º90 margin_top, margin_bottom, margin_left, margin_right - è¾¹è·å¤§å°é»˜è®¤å•ä½mm page_height , page_width - é¡µé¢å°ºå¯¸ é»˜è®¤å•ä½mm orientation - Landscape æˆ–è€… Portrait header_line - å¸ƒå°”å€¼ æ˜¯å¦æ˜¾ç¤ºå¤´è¡Œ header_spacing - å¤´ç©ºé—´ é»˜è®¤å•ä½mm 123456789101112131415&lt;record id="paperformat_frenchcheck" model="report.paperformat"&gt; &lt;field name="name"&gt;French Bank Check&lt;/field&gt; &lt;field name="default" eval="True"/&gt; &lt;field name="format"&gt;custom&lt;/field&gt; &lt;field name="page_height"&gt;80&lt;/field&gt; &lt;field name="page_width"&gt;175&lt;/field&gt; &lt;field name="orientation"&gt;Portrait&lt;/field&gt; &lt;field name="margin_top"&gt;3&lt;/field&gt; &lt;field name="margin_bottom"&gt;3&lt;/field&gt; &lt;field name="margin_left"&gt;3&lt;/field&gt; &lt;field name="margin_right"&gt;3&lt;/field&gt; &lt;field name="header_line" eval="False"/&gt; &lt;field name="header_spacing"&gt;3&lt;/field&gt; &lt;field name="dpi"&gt;80&lt;/field&gt;&lt;/record&gt; å®¢æˆ·åŒ–æŠ¥è¡¨æŠ¥è¡¨modelæœ‰ä¸€ä¸ªget_htmlæ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡report.{module.report_name}æ¥å¯»æ‰¾å®¢æˆ·åŒ–æŠ¥è¡¨modelï¼Œå¦‚æžœæ‰¾åˆ°çš„è¯ï¼Œå°†ä½¿ç”¨æ‰¾åˆ°çš„è¿™ä¸ªç±»æ¥è°ƒç”¨Qwebå¼•æ“Ž,å¦åˆ™å°±è°ƒç”¨é»˜è®¤æ–¹æ³•ã€‚å¦‚æžœå¸Œæœ›å®¢æˆ·åŒ–ä¸€ä¸ªåŒ…å«äº†å„ç§é¡¹çš„æŠ¥è¡¨æ¨¡æ¿ï¼Œå°±å¯ä»¥å®šä¹‰è¿™ä¸ªmodelï¼Œé‡å†™render_htmlæ–¹æ³•ï¼Œå¹¶ä¸”åœ¨docargsåˆ—è¡¨ä¸­ä¼ é€’æ•°æ®ã€‚ æŠ¥è¡¨éƒ½å¯ä»¥åœ¨webé¡µé¢ä¸Šæ˜¾ç¤ºå¯ä»¥é€šè¿‡ä¾‹å¦‚:http:///report/html/sale.report_saleorder/38http:///report/pdf/sale.report_saleorder/38å¦‚ä¸Šæ–¹å¼è®¿é—®html/pdfçš„æŠ¥è¡¨ Odoo11 PDFæŠ¥è¡¨å®žä¾‹æµç¨‹1.åˆ›å»ºä¸€ä¸ªir.actions.reportå¯¹è±¡12345678&lt;report string="ç•Œé¢æ‰“å°ä¸‹æ‹‰æ¡†å¤„æ˜¾ç¤ºçš„æ–‡å­—" id="ir_model_dataè¡¨ä¸­åˆ›å»ºçš„æ•°æ®è®°å½•name å…¶å®žå°±æ˜¯å¤–éƒ¨idâ‘ " model="æŠ¥è¡¨ç»‘å®šçš„model åœ¨å“ªä¸ªç•Œé¢ä¸Šæ˜¾ç¤º" report_type="æŠ¥è¡¨ç±»åˆ«/qweb-pdf" name="hrp_asset.report_asset_transfer_application" file="hrp_asset.report_asset_transfer_application"/&gt; XMLæ–‡ä»¶ä¸­ é¦–å…ˆä»‹ç»ä¸€ä¸‹XMLæ–‡ä»¶ä¸­çš„åŸºç¡€æ ¼å¼: 12345&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;openerp&gt; &lt;data&gt; &lt;/data&gt;&lt;/openerp&gt; åˆå§‹åŒ–ä¸€ä¸ªreportæ•°æ®é¡¹: 12345678&lt;report string="ç•Œé¢æ‰“å°ä¸‹æ‹‰æ¡†å¤„æ˜¾ç¤ºçš„æ–‡å­—" id="ir_model_dataè¡¨ä¸­åˆ›å»ºçš„æ•°æ®è®°å½•name å…¶å®žå°±æ˜¯å¤–éƒ¨idâ‘ " model="æŠ¥è¡¨ç»‘å®šçš„model åœ¨å“ªä¸ªç•Œé¢ä¸Šæ˜¾ç¤º" report_type="æŠ¥è¡¨ç±»åˆ«/qweb-pdf" name="hrp_asset.report_asset_transfer_application" file="hrp_asset.report_asset_transfer_application"/&gt; å¯¹reporté¡¹ç»‘å®šä¸€ä¸ªæ•°æ®æ¨¡æ¿ï¼Œpaperformat_idæ¥è‡ªäºŽreport.paperformat: 123&lt;record id="ir_model_dataè¡¨ä¸­åˆ›å»ºçš„æ•°æ®è®°å½•name å…¶å®žå°±æ˜¯å¤–éƒ¨idâ‘ " model="ir.actions.report.xml"&gt; &lt;field name="paperformat_id" ref="hrp_base.paperformat_horizontal_A4"/&gt;&lt;/record&gt; æ³¨:è¿™é‡Œçš„paperformatå¯ä»¥è‡ªè¡Œå®šä¹‰æ ·å¼]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-Excelä¸‹è½½]]></title>
    <url>%2Fbbs.github.io%2FExcel%E4%B8%8B%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[excelä¸‹è½½ç»“æž„class inherit_report_xls(report_xls)â‘ class inherit_rml_parse(report_sxw.rml_parse)â‘¡ ç¬¬ä¸€ä¸ªpythonç±»classç»§æ‰¿report_xls,ç”¨äºŽæŽ§åˆ¶ç•Œé¢æ ·å¼è°ƒæ•´ï¼Œä¸»è¦æ˜¯é‡å†™ç»§æ‰¿ç±»report_xlsä¸­çš„generate_xls_reportæ–¹æ³•ã€‚ç»§æ‰¿report_xlsç±»çš„classåˆå§‹åŒ–ã€‚ ç¬¬äºŒä¸ªpythonç±»classç”¨äºŽåŸºç¡€æ•°æ®èŽ·å–ä¸Žä¼ é€’åŠŸèƒ½ã€‚å°±æ˜¯æ–‡ä¸­çš„_p ä¸€ä¸ªodooç±»classç”¨äºŽä½¿ç”¨odooçš„ORMæˆ–æ–¹æ³•å®šä¹‰èŽ·å–å¯¹åº”çš„æ•°æ®é›†åˆã€‚ 12å¦å¤–:å¤§å¤šæ•°æŠ¥è¡¨éƒ½æœ‰ç›¸åº”çš„å¼¹å‡ºç•Œé¢é€‰æ‹©åŠŸèƒ½ï¼Œå¯¹åº”çš„å¯ä»¥ä½¿ç”¨è¿™ä¸ªclassåŽ»å®šä¹‰ä¸€äº›å¼¹å‡ºæ¡†çš„é€‰æ‹©å­—æ®µï¼Œç”¨ä½œç­›é€‰æ¡ä»¶ã€‚æ€»ä¹‹ï¼Œè¿™ä¸ªclasså°±æ˜¯ç”¨äºŽå„ç§æ•°æ®é€»è¾‘å¤„ç†çš„æ¨¡åž‹ã€‚ å®žä¾‹åŒ–ç¬¬ä¸€ä¸ªreport_xlsç±»ï¼Œç”¨äºŽæ³¨å†Œä½¿ç”¨ã€‚inherit_report_xls(â€˜report.report_nameâ€™â‘¢,â€™æŠ¥è¡¨å®šä¹‰çš„modelâ€™â‘£,â€™inherit_rml_parseâ€™â‘¤) ä¸€ä¸ªXML,ç”¨äºŽå®šä¹‰formå¼¹çª—ç›¸å…³çš„Acionã€Formã€Reportä¸Žæ¨¡åž‹è¿›è¡Œç»‘å®š æµç¨‹ï¼š 123456789101112å®žçŽ°æµç¨‹ï¼š åˆ›å»ºreport_xlsçš„ç»§æ‰¿ç±»å’Œreport_sxw.rml_parseçš„ç»§æ‰¿ç±»ã€‚ å®žä¾‹åŒ–report_xlsç»§æ‰¿ç±» åˆ›å»ºodooçš„classå®šä¹‰å­—æ®µã€å†™å„ç§æ–¹æ³•(ä¾‹å¦‚èŽ·å–æ•°æ®ä¸‹è½½æŠ¥è¡¨æ–¹æ³•print_reportï¼Œæ‰“å¼€æŠ¥è¡¨é€‰æ‹©é¡µé¢çš„actionæ–¹æ³•ç­‰)ã€‚ åˆ›å»ºXMLæ¥ä¸ªæ€§åŒ–å¼¹å‡ºæ¡†ä¸Žé€‰æ‹©æ¡ä»¶ï¼Œå®šä¹‰ä¸€ä¸ªprint_reportæŒ‰é’®ï¼Œå®šä¹‰ä¸€ä¸ªè¿žæŽ¥æ•°æ®å¯¹è±¡ã€‚ æ“ä½œæµç¨‹: ç‚¹å‡»æŠ¥è¡¨èœå• - å¼¹å‡ºä¸€ä¸ªformç•Œé¢(å¯èƒ½æœ‰å‚æ•°é€‰æ‹©) - å®ŒæˆåŽç‚¹å‡»æ‰“å°æŒ‰é’®(print_report) - æŠ¥è¡¨æ‰“å° å¦å¤–:12345return &#123; &apos;type&apos;: &apos;ir.actions.report.xml&apos;, &apos;report_name&apos;: &apos;nov.account.journal.xls&apos;, &apos;datas&apos;: datas, &apos;context&apos;:self.env.context&#125; ç›´æŽ¥returnè°ƒç”¨report_nameçš„æŠ¥è¡¨ï¼Œæœ‰æ—¶å€™å›žä½¿ç”¨ä¸€ä¸‹contextä¼ ç‚¹ä¸ªæ€§åŒ–çš„å‚æ•°ã€‚ 12345678&lt;record id="action_import_move_line_details_xls" model="ir.actions.report.xml"&gt; &lt;field name="name"&gt;Import Move Line Details&lt;/field&gt; &lt;field name="model"&gt;hrp.account.gl.account.move&lt;/field&gt; &lt;field name="type"&gt;ir.actions.report.xml&lt;/field&gt; &lt;field name="report_name"&gt;import.move.line.details.xls&lt;/field&gt; &lt;field name="report_type"&gt;xls&lt;/field&gt; &lt;field name="auto" eval="False"/&gt; &lt;/record&gt; é‡è¦çš„æ˜¯modelï¼Œreport_name,report_typeï¼š modelç›®å‰æˆ‘æ˜¯é»˜è®¤å†™çš„objectsæŒ‚è½½çš„æ¨¡åž‹ï¼Œå’Œæ³¨å†Œä¸­çš„modelåç§°ç›¸åŒã€‚(åŽç»­äº†è§£ir.act.report.xmlçœ‹çœ‹modelæ˜¯ç”¨æ¥å¹²å•¥çš„) report_name:pythonä»£ç ä¸­returnè°ƒç”¨çš„xlsï¼Œå…¶å®žå°±æ˜¯ir.act.report.xmlçš„å”¯ä¸€å±žæ€§ã€‚ report_type:æ˜¯æŠ¥è¡¨æ”¯æŒçš„ç±»åž‹ï¼Œqweb-pdfã€qweb-htmlã€pdfã€xlsã€xlsxç­‰ã€‚ 1234&apos;name&apos;: &#123; &apos;header&apos;: [1, 25, &apos;text&apos;, _render(&quot;_(&apos;Name&apos;)&quot;)], &apos;lines&apos;: [1, 0, &apos;text&apos;, _render(&quot;line[&apos;name&apos;] or &apos;&apos;&quot;)], &apos;totals&apos;: [1, 0, &apos;text&apos;, None]&#125;, â€™textâ€™é‚£ä¸ªä½ç½®æ˜¯ç”¨æ¥åˆ¤æ–­åˆå§‹åŒ–çš„ â€˜â€™ 123import_move_line_details_xls(&apos;report.import.move.line.details.xls&apos;, &apos;hrp.account.gl.account.move&apos;, parser=import_move_line_details_xls_parser) æ ¼å¼ï¼šreport_xlsç»§æ‰¿ç±»(â€˜xlsåç§°â€™,â€™objectsæŒ‚è½½æ¨¡åž‹â€™,â€™parserå¯¹è±¡â€™)objectsæŒ‚è½½æ¨¡åž‹çš„æ„æ€æ˜¯ï¼Œæˆ‘ä»¬excelçš„æ•°æ®å–å€¼æ˜¯é€šè¿‡å¯¹åº”çš„è®°å½•æ¥å–å€¼çš„ï¼Œè¿™é‡Œå¿…é¡»é€‰æ‹©å–æ•°é€»è¾‘çš„model.æˆ‘ä»¬å¯ä»¥å‘çŽ°å®ƒç›´æŽ¥å®šä½åˆ°äº†æˆ‘ä»¬æ‰“å°çš„å•æ®æ•°æ®ï¼Œå½“ç„¶è¿™æ˜¯åœ¨formä¸Šæˆ–è€…é€šè¿‡formçš„ä¸€ä¸ªæŒ‰é’®æ‰“å¼€ä¸€ä¸ªTransationçš„modelæ¥æ‰“å°æŠ¥è¡¨çš„ï¼Œå¦‚æžœæ˜¯é‚£ç§æ”¾åœ¨â€™æ›´å¤šâ€™ä¸­çš„æ‰¹é‡æ•°æ®æ‰“å°ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç›¸åº”çš„åšä¸€äº›contextçš„å¤„ç†ã€‚ é€æ­¥ç†è§£ä¸­â€¦]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo8-JSå°è®°]]></title>
    <url>%2Fbbs.github.io%2FOdoo8-JS%E5%B0%8F%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[JS - åŸºç¡€å…¥é—¨ç†è§£ å®šä¹‰ir.action.client å¸¦tag ä¸Žç»‘å®šçš„èœå•å¯¹è±¡123456789101112131415161718192021&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;openerp&gt; &lt;data&gt; &lt;record id="widget_menu_action" model="ir.actions.client"&gt; &lt;field name="name"&gt;Widget Menu Action&lt;/field&gt; &lt;field name="tag"&gt;tps_widget.widget_menu&lt;/field&gt; &lt;/record&gt; &lt;menuitem id="tps_widget_top_menu" name="Widget Top Menu" sequence="10"/&gt; &lt;menuitem id="tps_widget_sub_menu" name="Widget Sub Menu" parent="tps_widget_top_menu" sequence="10"/&gt; &lt;menuitem id="tps_widget_func_menu" name="Widget Func Menu" parent="tps_widget_sub_menu" action="widget_menu_action" sequence="10"/&gt; &lt;/data&gt;&lt;/openerp&gt; å®šä¹‰ä¸€ä¸ªjsæ–‡ä»¶ - extend_widget.js åŒ…å«contentï¼š 12345678910111213openerp.tps_widget = function (instance, local) &#123; var _t = instance.web._t, _lt = instance.web._lt; var QWeb = instance.web.qweb; local.MyWidget = instance.Widget.extend(&#123; start: function () &#123; console.log("load Mywidget.") &#125; &#125;); //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯tag ç¬¬äºŒä¸ªå‚æ•°æ˜¯widgetçš„å®Œæ•´åœ°å€ instance.web.client_actions.add('tps_widget.widget_menu', 'instance.MyWidget');&#125; å¼•å…¥jsæ–‡ä»¶ï¼Œå®šä¹‰ä¸€ä¸ªxmlviews/xxx_template.xml 12345678910&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;openerp&gt; &lt;data&gt; &lt;template id="assets_backend" name="tps_widget" inherit_id="web.assets_backend"&gt; &lt;xpath expr="." position="inside"&gt; &lt;script type="text/javascript" src="/tps_widget/static/js/extend_widget.js"&gt;&lt;/script&gt; &lt;/xpath&gt; &lt;/template&gt; &lt;/data&gt;&lt;/openerp&gt; æ³¨æ„è¿™é‡Œæš‚æ—¶æ²¡æœ‰pyæ–‡ä»¶ï¼Œä½†æ˜¯xmlæ–‡ä»¶éœ€è¦åœ¨openerp.pyä¸­æ³¨å†Œ[å®šä¹‰èœå•çš„xml å’Œ å¼•å…¥jsçš„xml]ã€‚ ç”¨æ³• this this.$el ob.appendTo(this.$el) this.getParent().$el this.getChildren()[0].$el JS - æŒ‚ä»¶o2m_uniqueo2mä¸­çš„ä¸»æ•°æ®å­—æ®µï¼Œæ¯å¼ å•æ®åªèƒ½é€‰ä¸€æ¬¡ï¼Œå”¯ä¸€æ€§å¤„ç†ã€‚ many2many_tagm2må•æ®æ•°æ®æŽ’åˆ—ç»„åˆä¸å¯é‡å¤]]></content>
      <categories>
        <category>Odoo</category>
        <category>JS</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
        <tag>JS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitåŸºæœ¬æ“ä½œæŒ‡ä»¤ç¬”è®°]]></title>
    <url>%2Fbbs.github.io%2Fgit%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[åŸºæœ¬æ“ä½œåŸºæœ¬å‘½ä»¤git clone url git checkout -b T1 git checkout T1git checkout . git branch git branch -D T1 git branch -m T1 git status git diff git add . git commit [-m â€˜messageâ€™] git push origin T1 git fetch origin T1:T1 git merge â€“no-ff master-branch git reset â€“mixed HEAD^ git commit â€“amend å¯ä»¥å¯¹ä¸Šä¸€æ¬¡çš„æäº¤åšä¿®æ”¹ git clean -df ä»£ç å†²çªè§£å†³æµç¨‹ git checkout test git pull origin test git checkout ä»»åŠ¡åˆ†æ”¯ git checkout -b ä»»åŠ¡åˆ†æ”¯-1 git merge â€“no-ff test ä»£ç ä¸­è§£å†³å†²çª git add . git commit git push origin ä»»åŠ¡åˆ†æ”¯-1 gitlabä¸Šåˆå¹¶ ä»»åŠ¡åˆ†æ”¯-1 åˆ° test]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-ç¿»è¯‘]]></title>
    <url>%2Fbbs.github.io%2FOdoo-%E7%BF%BB%E8%AF%91%2F</url>
    <content type="text"><![CDATA[ir_translationç®€ç« [å­—æ®µ]langsrcnameres_idmodulestatecommentsvaluetype å‡ ç§ç¿»è¯‘çš„åŠ è½½æ–¹å¼æ™®é€šæŒ‰é’®ç¿»è¯‘ ç›´æŽ¥åŠ è½½ç¿»è¯‘ æ³¨:(XMLä¸Šçš„æŒ‰é’®ç¿»è¯‘æ—§æºä¸è®¤è¯†ä¸‹åˆ’çº¿_) æŠ¥è¡¨ç¿»è¯‘report:report_name:0 ç›´æŽ¥åŠ è½½ç¿»è¯‘ èœå•ç¿»è¯‘é‡å¯ - å‡çº§ - åŠ è½½ç¿»è¯‘ å­—æ®µç¿»è¯‘ç›´æŽ¥åŠ è½½ç¿»è¯‘ ### ä¾‹å­ï¼š 12345#. module: dy_fin_stock#: model:ir.model.fields,field_description:dy_fin_stock.field_dy_fin_create_move_stock_wizard__summary_rule_id#: model:ir.model.fields,help:dy_fin_stock.field_dy_fin_create_move_stock_wizard__summary_rule_idmsgid &quot;Summary Rule&quot;msgstr &quot;åˆå¹¶è§„åˆ™&quot; codeç¿»è¯‘ç›´æŽ¥åŠ è½½ç¿»è¯‘ moduleä¿¡æ¯ç¿»è¯‘æ‰‹åŠ¨åˆ é™¤æ‰€æœ‰ç¿»è¯‘ï¼Œé‡æ–°åŠ è½½ç¿»è¯‘ xxx_data.xmlæ–‡ä»¶ç¿»è¯‘ä¾‹å­ï¼š123456789#. module: dy_fin_stock#: model:res.groups,name:dy_fin_stock.account_move_linkmsgid &quot;Account Move Link Group&quot;msgstr &quot;æŸ¥çœ‹å‡­è¯æƒé™ç»„&quot;#. module: dy_fin_stock#: model:res.groups,comment:dy_fin_stock.account_move_linkmsgid &quot;Account Move Linkï¼&quot;msgstr &quot;æ‹¥æœ‰åº“å­˜ç§»åŠ¨å‡­è¯çŠ¶æ€æŸ¥çœ‹æƒé™ï¼&quot; è§£é‡Š1234#. module: [module]#: model:[model],[field_name]:[module].[external_id]msgid &quot;ç¿»è¯‘æº&quot;msgstr &quot;ç¿»è¯‘å€¼&quot; é‡å†™æºç çš„å­—æ®µç¿»è¯‘ç›´æŽ¥åœ¨ç»§æ‰¿çš„å°æ¨¡å—i18nä¸­é‡å†™ module:å†™åŽŸæ¥çš„æˆ–ä½†é’±æ¨¡å—çš„éƒ½å¯ä»¥ æœ€åŽåœ¨æ•°æ®åº“ä¸­ä¼šè¢«è½¬æ¢æˆå°æ¨¡å—çš„ ä¾‹å¦‚:hrp_accountç¿»è¯‘çš„æ˜¾ç¤ºå€¼ä½¿ç”¨çš„æ˜¯idæœ€å¤§çš„é‚£ä¸€ä¸ªåŒ¹é…å€¼1234#. module: account#: selection:account.invoice,state:0msgid &quot;Open&quot;msgstr &quot;å·²å®¡æ‰¹&quot;]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo,XML]]></title>
    <url>%2Fbbs.github.io%2FOdoo-XML%2F</url>
    <content type="text"><![CDATA[xmldataæ–‡ä»¶åˆå§‹åŒ–ä¸­çš„çŸ¥è¯†ç‚¹1.ç»“æž„123456789&lt;openerp&gt; &lt;data&gt; &lt;record&gt; &lt;filed&gt;&lt;/filed&gt; &lt;/record&gt; &lt;/data&gt; &lt;data&gt;...&lt;/data&gt; ...&lt;/openerp&gt; å±žæ€§ç¯‡attrs(å…¬å…±å±žæ€§) invisible:å½±è—ç»„ä»¶ã€‚ required:ç»„ä»¶å¿…é¡»æœ‰å€¼ã€‚ readonly:ç»„ä»¶åªè¯»ä¸å¯ç¼–è¾‘(onchangeè¿‡æ¥çš„å€¼ä¸ä¼šè¢«ä¿å­˜ï¼Œéœ€è¦åœ¨create/writeæ–¹æ³•ä¸­åŠ å…¥åˆ°valsä¸­ï¼Œæˆ–è€…å¼€å‘ä¸ªæ€§åŒ–readonlyå­˜å‚¨æŒ‚ä»¶ï¼Œä¾‹å¦‚:readonly_by_pass)ã€‚ å¦‚æžœåŽé¢çš„æ¡ä»¶æ˜¯ç±»ä¼¼domainå½¢å¼çš„ï¼Œé‚£ä¹ˆ[(A,â€™OPâ€™,B)]ä¸­ï¼ŒAæ˜¯ä¸€ä¸ªå¯é€‰çš„å­—æ®µï¼Œä½†æ˜¯è¿™ä¸ªå­—æ®µä¸èƒ½åƒpyä¸­çš„domainï¼Œå®ƒä¸èƒ½ä½¿ç”¨A.bè¿™æ ·çš„å­—æ®µå¼•ç”¨å…³ç³»ã€‚æ‰€ä»¥å¦‚æžœæˆ‘ä»¬éœ€è¦æŠŠè¿™æ ·çš„A.bå­—æ®µåœ¨æˆ‘ä»¬çš„æ¨¡åž‹ä¸­å®šä¹‰ä¸€ä¸ªrelatedå­—æ®µï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨xmlä¸­ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„è¾…åŠ©å­—æ®µã€‚&gt; noupdate - forcecreate noupdate - å±žäºŽdataçš„æ ‡ç­¾å±žæ€§ forcecreate - å±žäºŽrecordçš„æ ‡ç­¾å±žæ€§123456789ä½œç”¨ï¼š noupdateä¸»è¦ç”¨äºŽdataå—é‡Œçš„recordè®°å½•åˆå§‹åŒ–ï¼Œè¿™äº›è®°å½•éƒ½ä¼šæœ‰ä¸€ä¸ªExtendIDï¼Œä¹Ÿå°±æ˜¯recordä¸Šæ‰€è°“çš„id,åœ¨ir_module_dataä¸Šå”¯ä¸€ã€‚ noupdateçš„ä¸»è¦åŠŸèƒ½æ˜¯åˆå§‹åŒ–ä¸€éæ•°æ®ï¼Œå¦‚æžœä¹‹åŽå¯¹XMLæ•°æ®å®šä¹‰ä¿®æ”¹äº†ï¼Œå†å‡çº§ï¼Œè¿™äº›æ•°å€¼æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œä¾æ—§ä¿æŒç¬¬ä¸€æ¬¡ä¸Šæ¥çš„æ ·å­ã€‚ ä½†æ˜¯å¦‚æžœä½ åœ¨ç•Œé¢åˆ é™¤äº†åˆå§‹åŒ–çš„æ•°æ®ï¼Œé‚£ä¹ˆä¸‹æ¬¡å‡çº§æ¨¡å—ï¼Œè¿™äº›æ•°æ®å°±ä¼šä»¥ä¿®æ”¹åŽçš„XMLæ•°æ®ä¸ºåŸºç¡€åˆ›å»ºã€‚ å¦‚æžœåªæƒ³æ•°æ®ç¬¬ä¸€æ¬¡åˆå§‹åŒ–è¿›æ¥ï¼Œä»¥åŽä¸æ”¹å˜ï¼Œå¹¶ä¸”å°±ç®—è¢«åˆ æŽ‰åŽï¼Œå¸Œæœ›å‡çº§åŽä¹Ÿä¸è¦å‡ºçŽ°ï¼Œé‚£ä¹ˆå°±ç»™å¯¹åº”çš„recordè®°å½•ä¸Šï¼Œ å†™forcecreate=&apos;false&apos;,è¿™æ ·å°±èƒ½ä¿è¯æ¨¡å—å®‰è£…åˆå§‹åŒ–ä¸Šæ¥çš„æ•°æ®ï¼Œä¸ä¼šè¢«ä»»ä½•æƒ…å†µä¿®æ”¹æ›´æ–°ï¼Œåˆ é™¤åŽä¸å†åˆ›å»ºã€‚ forcecreateå¿…é¡»ç»‘å®šåœ¨noupdateä¸­æ‰ç”Ÿæ•ˆ,noupdateä¿æŒå·²æœ‰æ•°æ®ä¸æ›´æ–°ï¼Œforcecreateä¿è¯æ•°æ®åˆ é™¤ï¼Œå‡çº§ä¸åˆ›å»ºã€‚å¦‚æžœåˆ é™¤äº†noupdateå—ä¸­dataæ–‡ä»¶åˆå§‹åŒ–çš„æ•°æ®è®°å½•ï¼Œç„¶åŽä½ é‡æ–°æ›´æ–°å®ƒä¸é‡ç½®ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ir_module_dataè¡¨ï¼Œå¯¹åº”çš„dataå—å¤–éƒ¨idè®°å½•ä¸­ï¼Œnoupdate=True,æŠŠé‚£æ¡è®°å½•åˆ é™¤å†å‡çº§å°±å‡ºæ¥äº†ã€‚ options(m2oå…³ç³»å­—æ®µå±žæ€§) no_create_edit:å…³ç³»å­—æ®µä¸å…è®¸åœ¨å½“å‰ç•Œé¢åˆ›å»ºè¿™ä¸ªå­—æ®µå¯¹åº”çš„æ¨¡åž‹è®°å½•ã€‚ no_create:ä¸å…è®¸ç›´æŽ¥åœ¨å½“å‰ç•Œé¢åˆ›å»ºå­—æ®µå¯¹åº”çš„æ¨¡åž‹è®°å½•(ä»Žä»£ç ä¸­çœ‹no_create_editå’Œno_createé€»è¾‘ä¸€æ ·)ã€‚ no_open:ä¸å…è®¸æ‰“å¼€å…³ç³»å­—æ®µåŽé¢å¯¹åº”çš„å•æ®ã€‚ æ³¨æ„ï¼šæœ€å¥½ç”¨no_open:True/Falseï¼Œä¸è¦è¿‡åº¦ä½¿ç”¨no_open:â€™0â€™/â€˜1â€™,ç»è¿‡æµ‹è¯•[â€˜0â€™ == â€˜1â€™ == True] options(o2må…³ç³»å­—æ®µå±žæ€§) no_edit_no_open:å…³ç³»å­—æ®µä¸å…è®¸åœ¨å½“å‰ç•Œæ‰“å¼€å¯¹åº”è®°å½•çš„formç•Œé¢ã€‚ æ‰¹é‡æ·»åŠ  1.batch_add(æ–°å¼€å‘jsæŒ‚ä»¶éžåŽŸç”Ÿ) ç›´æŽ¥åœ¨o2mçš„XMLå­—æ®µå±žæ€§ä¸ŠæŒ‚è½½batch_add=&quot;true&quot;å³å¯ã€‚ 2.ids_select è¿™ä¸ªæ¯”è¾ƒå¤æ‚: 1.é¦–å…ˆåœ¨pyæ–‡ä»¶çš„å¤´è¡Œç»“æž„ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªå¤´å­—æ®µids_select,å­—æ®µå±žæ€§å®šä¹‰å¦‚ä¸‹: ids_select = fields.Char(string=&apos;ids&apos;, help=&apos;This id is to get ids of multiple select of one2many&apos;) 2.ç„¶åŽå†XMLçš„å¤´éƒ¨æ”¾å…¥ids_selectå­—æ®µï¼Œå¯å½±è—ï¼Œå­—æ®µå®šä¹‰å¦‚ä¸‹: &lt;field name=&quot;ids_select&quot; class=&quot;oe_o2mx&quot; invisible=&quot;1&quot; on_change=&quot;updateLines(ids_select,o2m_filed,context)&quot;/&gt; 3.ç»‘å®šå¯¹åº”çš„o2må­—æ®µï¼Œå°†æŒ‚ä»¶ widget=&quot;o2mx&quot; åŠ åˆ°XMLå­—æ®µå±žæ€§å®šä¹‰ä¸­ã€‚å¯¹åº”éœ€o2m_filedçš„treeä¸Šè¦æ‰¹é‡æ·»åŠ çš„ä¸»ä½“å­—æ®µ(m2o_field)æŒ‚è½½ multiple_selection=&quot;true&quot; å±žæ€§ã€‚ 4.å¯¹ids_selectå®šä¹‰on_changeçš„æ–¹æ³•updateLinesè¿›è¡Œé€»è¾‘å¤„ç†: - é€šç”¨ç»“æž„: if not ids_select: return 0 selected_ids = ids_select.split(&apos;,&apos;) if len(o2m_filed) == 1: change_line = False o2m_filed = self.o2m_filed.browse(o2m_filed[0][2]) else: change_line = True o2m_filed = map(lambda x: x[2], filter(lambda x: x[2], o2m_filed)) res = [] old_value = [] add_ids = [] line_number = 0 for line in o2m_filed: line_number += 1 m2o_field = change_line and line[&apos;m2o_field&apos;] or line.m2o_field.id old_value.append({ &apos;line_number&apos;:line_number, &apos;m2o_field&apos;: m2o_field, &apos;field1&apos;: field1, &apos;field2&apos;: field2, &apos;field3&apos;: field3, ... }) add_ids.append(m2o_field) for id in selected_ids: line = self.env[&apos;selected_ids_model&apos;].browse(int(id)) if int(id) not in add_ids: line_number += 1 res.append({ &apos;line_number&apos;: line_number, &apos;m2o_field&apos;: line.m2o_field.id or False, &apos;field1&apos;: line.field1, &apos;field2&apos;: line.field2, &apos;field3&apos;: line.field3, ... }) if res: return {&apos;value&apos;: {&apos;invoice_detail_ids&apos;: old_value + res}} - æ™®é€š è‡ªåŠ¨é€’å¢ž é€’å¢žé—´éš” æœ€å¼€å§‹çš„å€¼ Domain XMLå®šä¹‰çš„domainä¼šè¦†ç›–å­—æ®µå®šä¹‰çš„domain ir.actions.act_window[å‚æ•°] src_modelï¼š æ¥æºæ¨¡åž‹è¿™ä¸ªåŠ¨ä½œåº”è¯¥æ”¾åœ¨å“ªä¸ªå¯è§çš„å¯¹è±¡å¯é€‰æ¨¡åž‹åç§°(ç»‘å®šåˆ°å“ªä¸ªæ¨¡åž‹ä¸Šæ˜¾ç¤º) res_modelï¼š ç›®æ ‡æ¨¡åž‹åœ¨è§†å›¾çª—å£ä¸­æ‰“å¼€çš„å¯¹è±¡çš„æ¨¡åž‹åç§°(æ‰“å¼€çš„wizardæ¨¡åž‹) context: search_default_å­—æ®µåç§°: display_filter:åœ¨wizardçš„actionä¸Šå®šä¹‰å¦‚: context=â€{â€˜display_filterâ€™:â€™invoice_form_viewâ€™}â€åœ¨å¯¹åº”çš„ç»‘å®šæ¨¡åž‹ä¸­çš„contextä¸­å†™å…¥å¦‚ï¼šcontext=â€{â€˜invoice_form_viewâ€™:1â€™}â€å¯¹åº”ç»‘å®šçš„actionåœ¨é™åˆ¶äº†view_id,é‚£ä¹ˆè¿™ä¸ªwizardå°±å”¯ä¸€ç»‘å®šåœ¨äº†è¿™ä¸ªå¯¹åº”çš„è§†å›¾ä¸Š,åŒæ¨¡åž‹çš„å…¶ä»–è§†å›¾ä¸Šä¸æ˜¾ç¤º(ä¸€æ¨¡åž‹å¤šèœå•å¤šè§†å›¾æ¨¡å¼)ã€‚ execute_method:åœ¨wizardçš„actionä¸Šå®šä¹‰å¦‚: context=â€{â€˜execute_methodâ€™:â€™invoice_execute_methodâ€™}â€è§¦å‘actionæ—¶ä¼šç›´æŽ¥æ‰§è¡Œinvoice_execute_methodæ–¹æ³•ï¼Œä½†æ˜¯æ‰§è¡Œäº†è¿™ä¸ªæ–¹æ³•å°±ä¸ä¼šç›´æŽ¥è·³è½¬è§†å›¾äº†ï¼Œä½ éœ€è¦åœ¨æ‰§è¡Œçš„æ–¹æ³•ä¸­returnè·³è½¬è§†å›¾çš„actionã€‚ â€˜clear_breadcrumbsâ€™ â€˜clear_breadcrumbsâ€™:Trueå¯ä»¥åœ¨è§†å›¾ä¸Šéšè—åˆ—æ ‡é¢˜ã€‚ res_model: ç›®æ ‡æ¨¡åž‹ src_model: åŽŸå§‹æ¨¡åž‹ views: å®šä¹‰è§†å›¾ç±»åˆ«å¼•ç”¨ref view_id: å®šä¹‰é»˜è®¤æ‰“å¼€è§†å›¾å¼•ç”¨ref ir.actions.act_window.view æ­¤æ¨¡åž‹å®žé™…æ˜¯view_idsçš„ç»‘å®šæ¨¡åž‹,å¯ä»¥é€šè¿‡åˆå§‹åŒ–act_windowçš„view_idsæŒ‚åœ¨å±žæ€§å€¼,æ¥æŽ§åˆ¶å¤šä¸ªèœå•å…¬ç”¨ä¸€ä¸ªmodel,ä½†æ˜¯æ‰“å¼€çš„æ˜¯å¯¹åº”çš„treeã€formã€searchç­‰æ¨¡åž‹ã€‚ 1.å®šä¹‰ä¸€ä¸ªaction12345678910&lt;record model="ir.actions.act_window" id="hrp_payment_preparation_action"&gt; &lt;field name="name"&gt;Payment Preparation&lt;/field&gt; &lt;field name="res_model"&gt;hrp.payment.request&lt;/field&gt; &lt;field name="view_type"&gt;form&lt;/field&gt; &lt;field name="view_mode"&gt;tree,form&lt;/field&gt; &lt;field name="search_view_id" ref="hrp_payment_preparation_search"/&gt; &lt;field name="domain"&gt;[('state','in',['approved','paying','paid'])]&lt;/field&gt; &lt;field name="context"&gt;&#123;'readonly_by_pass':['company_id','total_amount','invoice_detail_ids','supplier_id','supplier_category_id', 'invoice_date','date_due','payment_method_id','original_amount','open_amount']&#125;&lt;/field&gt;&lt;/record&gt; 2.åœ¨actionä¸Šç»‘å®šå¯¹åº”ç±»åž‹çš„è§†å›¾å¤–éƒ¨å¼•ç”¨å¯¹è±¡1234567&lt;!--ä¾›åº”å•†é¢„ä»˜æ¬¾ç”³è¯·ç•Œé¢treeè§†å›¾æŒ‡å®š--&gt;&lt;record id="hrp_payment_preparation_tree_view" model="ir.actions.act_window.view"&gt; &lt;field eval="1" name="sequence"/&gt; &lt;field name="view_mode"&gt;tree&lt;/field&gt; &lt;field name="view_id" ref="hrp_payment_preparation_tree"/&gt; &lt;field name="act_window_id" ref="hrp_payment_preparation_action"/&gt;&lt;/record&gt; 1234567&lt;!--ä¾›åº”å•†é¢„ä»˜æ¬¾ç”³è¯·ç•Œé¢formè§†å›¾æŒ‡å®š--&gt;&lt;record id="hrp_payment_preparation_form_view" model="ir.actions.act_window.view"&gt; &lt;field eval="2" name="sequence"/&gt; &lt;field name="view_mode"&gt;form&lt;/field&gt; &lt;field name="view_id" ref="hrp_payment_preparation_form"/&gt; &lt;field name="act_window_id" ref="hrp_payment_preparation_action"/&gt;&lt;/record&gt; 3.è¿™æ—¶å€™å°±ç®—ä¸€ä¸ªmodelä¸Šæœ‰å¤šä¸ªtreeè§†å›¾ã€å¤šä¸ªformè§†å›¾,ç”šè‡³æ˜¯å¤šä¸ªsearchè§†å›¾ç­‰,åªè¦ç»‘å®šå¥½å°±ä¼šç›´æŽ¥æ‰“å¼€å¯¹åº”çš„è§†å›¾ç•Œé¢,ä¸ä¼šæ‰“å¼€é”™å’¯. 4.å¦‚æžœå‡ºçŽ°è®°å½•å•æ®è¢«é€šè¿‡M2Oå­—æ®µé“¾æŽ¥çš„å½¢å¼è·³è½¬è¿‡åŽ»ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½å‡ºçŽ°é”™è¯¯ï¼Œå› ä¸ºç‚¹å‡»äº‹ä»¶è°ƒç”¨äº†get_formview_actionæ–¹æ³•ï¼Œé»˜è®¤èŽ·å–å¯¹åº”ç±»åž‹è§†å›¾çš„viewç•Œé¢ï¼Œä¸ºäº†åœ¨è¿™ç§æƒ…å†µä¸‹ä¸å‡ºçŽ°é”™è¯¯ï¼Œæˆ‘ä»¬å¿…é¡»é‡å†™get_formview_actionæ–¹æ³•ï¼Œæä¾›æ­£ç¡®çš„returnå¯¼å‘ï¼Œä¹Ÿè®¸è¿™é‡Œæ˜¯ç”¨çš„odoo7çš„å†™æ³•ï¼Œåœ¨æ–°å†™æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å°è£…@api.v7è£…é¥°å™¨ï¼Œæ¥é‡è½½æ–¹æ³•ï¼Œè¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ã€‚]]></content>
      <categories>
        <category>Odoo</category>
        <category>XML</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
        <tag>XML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-onchangeçš„åŠ¨æ€domain]]></title>
    <url>%2Fbbs.github.io%2FOdoo-onchange%E7%9A%84%E5%8A%A8%E6%80%81domain%2F</url>
    <content type="text"><![CDATA[onchangeçš„åŠ¨æ€domainOnchangeå‡½æ•°å¯ä»¥è¿”å›žä¸€ä¸ªå­—å…¸1234567891011121314on_change in OpenERP has 3 possible values returned finally in a dictionary or a &#123;&#125; .1: The value dictionary i.e &#123;field1:value1,field2:value2&#125;2: The domain dictionary i.e &#123;field1:domain1&#125;3: The warningSyntax:res = &#123;&apos;value&apos;:&#123;&#125;,&apos;domain&apos;:&#123;&#125;,&apos;warning&apos;:&apos;Warning Message&apos;&#125;According to your case add this to the return dictionary.&#123;&apos;domain&apos;:&#123;&apos;partner_id&apos;:[(&apos;customer&apos;,&apos;=&apos;,True)]&#125;&#125; é€šè¿‡[1]æˆ‘ä»¬å¯ä»¥æ”¹å˜ç•Œé¢ä¸Šçš„æ•°å€¼,é€šè¿‡[2]æˆ‘ä»¬å¯ä»¥æ”¹å˜ç•Œé¢å–å€¼çš„åŸŸ(åŠ¨æ€domain),é€šè¿‡[3]å¯ä»¥å®šä¹‰ä¸€ä¸ªè­¦å‘Šä¿¡æ¯]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-åŽå°ä»»åŠ¡]]></title>
    <url>%2Fbbs.github.io%2FOdoo-%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[åŽå°ä»»åŠ¡ç›®å‰åŽå°ä»»åŠ¡åˆ†ä¸ºä¸‰ç§: è‡ªåŠ¨åŒ–ä»»åŠ¡12345678910111213# - èŽ·å–cron_jobå¯¹è±¡hrp_cron_job_obj = self.env['hrp.cron.job']# - å®šä¹‰å»¶æ—¶æ‰§è¡Œçš„æ—¶é—´cron_job_date = fields.Datetime.to_string(datetime.now() + timedelta(seconds=30))# - ç›´æŽ¥æ‰§è¡Œä¸èµ°cron_jobçš„æ–¹æ³•(å‰æœŸæµ‹è¯•ä½¿ç”¨)# self.create_asset_acceptance_account_move(args)# - å»¶æ—¶å‡­è¯ç”Ÿæˆçš„æ–¹æ³• å¿…é¡»æœ‰éœ€è¦ç”Ÿæˆçš„æ•°æ®é¡¹ è¿™é‡Œargså¦‚æžœæ²¡æœ‰æ•°æ® ä¹ŸåŒæ ·ä¼šè¢«å°è£…æˆ å…ƒç»„|æ‰€ä»¥éœ€è¦åšä¸€ä¸ªåˆ¤æ–­if len(args) &gt; 0 and len(args[0]) &gt; 0: hrp_cron_job_obj.run_by_cron(_("Create Asset Receiving Account Move"),# è‡ªåŠ¨åŒ–ä»»åŠ¡åç§° 'hrp.asset.receiving.application',# è‡ªåŠ¨åŒ–ä»»åŠ¡éœ€è¦è°ƒç”¨çš„æ–¹æ³•æ‰€åœ¨model 'create_asset_acceptance_account_move',# æ–¹æ³•å [args],# å‚æ•° date_created=cron_job_date)# å»¶æ—¶æ—¶é—´ åˆ†æžä¸€ä¸‹æ–¹æ³•ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051def run_by_cron(self, name, model, function, args, priority=10, user_id=False, date_created=False): &quot;&quot;&quot; name - è‡ªåŠ¨åŒ–ä»»åŠ¡åç§° model - æ‰§è¡Œæ–¹æ³•æ¨¡åž‹ function - æ‰§è¡Œçš„æ–¹æ³•åç§° args - å‚æ•° priority - ä¼˜å…ˆçº§ user_id - æ‰§è¡Œç”¨æˆ· date_created - å¼€å§‹æ‰§è¡Œæ—¶é—´ &quot;&quot;&quot; # - å¦‚æžœæ²¡æœ‰é…ç½®æ—¶é—´ é»˜è®¤ç«‹å³åˆ›å»ºå¯åŠ¨æ‰§è¡Œ if not date_created: date_created = fields.Datetime.now() # - å¦‚æžœæ²¡æœ‰æ‰§è¡Œç”¨æˆ· é»˜è®¤å½“å‰ç™»å½•ç”¨æˆ· if not user_id: user_id = self.env.user.id # - è§£æžå‚æ•° è¿™é‡Œçš„å‚æ•°æœ€å¥½çš„æ ¼å¼æ˜¯ä¸€ä¸ªåˆ—è¡¨ä¼ å…¥ args = [repr(arg) for arg in args] # - åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–ä»»åŠ¡ self.create(&#123; &apos;name&apos;: name, &apos;model&apos;: model, &apos;function&apos;: function, &apos;args&apos;: &apos;(%s,)&apos; % (&apos;, &apos;.join(args)), &apos;date_created&apos;: date_created, &apos;user_id&apos;: user_id, &apos;priority&apos;: priority, &#125;) # åœ¨è‡ªåŠ¨åŒ–ä»»åŠ¡çš„createæ–¹æ³•ä¸­ï¼Œç›´æŽ¥åˆ›å»ºäº†ir.cronè®°å½•: @api.model def create(self, vals): # åˆ›å»ºir_cron ir_cron_obj = self.env[&apos;ir.cron&apos;] res = super(HrpCronJob, self).create(vals) ir_cron = &#123; &apos;name&apos;: vals[&apos;name&apos;], &apos;active&apos;: True, &apos;user_id&apos;: vals[&apos;user_id&apos;], &apos;priority&apos;: vals[&apos;priority&apos;], &apos;interval_type&apos;: &apos;minutes&apos;, &apos;nextcall&apos;: vals[&apos;date_created&apos;], &apos;numbercall&apos;: 1, &apos;doall&apos;: True, &apos;model&apos;: vals[&apos;model&apos;], &apos;function&apos;: vals[&apos;function&apos;], &apos;args&apos;: vals[&apos;args&apos;], &apos;hrp_cron_job_id&apos;: res.id, &#125; ir_cron_obj.create(ir_cron) return res é˜Ÿåˆ—ä»»åŠ¡ å¹¶å‘ç®¡ç†å™¨]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[name_get]]></title>
    <url>%2Fbbs.github.io%2Fname-get%2F</url>
    <content type="text"><![CDATA[æ•°æ®ç­›é€‰é€šå¸¸æˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®ç­›é€‰ï¼Œå¯èƒ½æ˜¯é€šè¿‡æŸä¸€ä¸ªå­—æ®µAå…³è”çš„å­—æ®µèŒƒå›´ï¼Œæ¥æŽ§åˆ¶Bå­—æ®µçš„å–å€¼ï¼Œå¸¸è§çš„æ–¹å¼å°±æ˜¯ä»¥æ·»åŠ computeå­—æ®µçš„m2mè¾…åŠ©å­—æ®µæ¥é™åˆ¶Bå­—æ®µçš„å–å€¼èŒƒå›´ã€‚è¿™æ ·å¯èƒ½ä¼šå› ä¸ºè¾…åŠ©å­—æ®µä¸Šå­˜åœ¨_idæˆ–è€…_idsçš„å­—æ®µï¼Œè€Œä½¿å¾—å‰å°ç•Œé¢åŠ è½½å‡ åæ¬¡å¯¹åº”çš„name_getè€Œè½¬åœˆã€‚æ›¿æ¢æ–¹å¼ï¼ŒåŽ»æŽ‰è¾…åŠ©å­—æ®µï¼Œåœ¨éœ€è¦è¢«é™åˆ¶å­—æ®µçš„XMLè§†å›¾å®šä¹‰ä¸­åŠ å…¥ç›¸åº”çš„contextï¼Œç„¶åŽåœ¨ç›¸åº”çš„name_searchæ–¹æ³•ä¸­ï¼ŒèŽ·å–contextï¼Œé€šè¿‡ä¸­é—´ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ•°æ®èŽ·å–åˆ¤æ–­åŽæ‹¼æŽ¥domainï¼Œä½¿å¾—ç•Œé¢çš„å€¼åŸŸè¢«ä¿®æ­£ã€‚ä¾‹å¦‚:1234&lt;field name="partner_id" options="&#123;'no_create_edit':'1','no_create':'1','no_open':'1'&#125;" attrs="&#123;'required':[('partner_force_analytic','=',True)]&#125;" context="&#123;'display_name_and_code':Trueï¼Œ'account_id':account_id&#125;"/&gt; 123456789101112131415161718192021222324252627282930313233@api.modeldef name_search(self, name='', args=[], operator='ilike', limit=100): # å¦‚æžœä¸šåŠ¡ä¼™ä¼´æ˜¯é€šè¿‡ç§‘ç›®ä¸Šçš„ä¸šåŠ¡ä¼™ä¼´æ ¸ç®—é™åˆ¶èŒƒå›´çš„è¯ æˆ‘ä»¬å¯ä»¥ç›´æŽ¥ç”¨name_searchä¼ å…¥contextå€¼é™åˆ¶èŒƒå›´ if self._context.has_key('account_id'): account_id = self._context.get('account_id') if account_id: domain = self._get_account_id_limit_domain(account_id) args += domain else: args = [('id', '=', -1)]@api.modeldef _get_account_id_limit_domain(self,account_id=None): # é€šè¿‡ç§‘ç›®ä¸Šçš„ä¸šåŠ¡ä¼™ä¼´é™åˆ¶domainå€¼é›† account = self.env['account.account'].browse(account_id) supplier = False customer = False employee = False domain = ['|', ('parent_id', '=', False), ('is_company', '=', True)] if account and account.partner_force_analytic: for record in account.partner_force_analytic: if record.code == 'supplier': supplier = True if record.code == 'customer': customer = True if record.code == 'employee': employee = True # ç§‘ç›®ä¸Šä¸šåŠ¡ä¼™ä¼´å€¼é›†domainæ‹¼æŽ¥ domain += supplier and [('supplier', '=', True)] or [('supplier', '=', False)] domain += customer and [('customer', '=', True)] or [('customer', '=', False)] domain += supplier and [('employee', '=', True)] or [('employee', '=', False)] print domain return domain å‚è€ƒæ–‡ç« ]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ir_sequenceåºåˆ—]]></title>
    <url>%2Fbbs.github.io%2Fir-sequence%E5%BA%8F%E5%88%97%2F</url>
    <content type="text"><![CDATA[ir_sequenceä¿®æ”¹åºåˆ—åˆ†æžä¸€ä¸‹ï¼Œç³»ç»Ÿä¸­çš„åºåˆ—ir.sequenceæœ€ç»ˆè¿˜æ˜¯ä½¿ç”¨çš„postgresqlçš„sequence,æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥æ‰¾pg_class,é€šè¿‡ir_sequence_(odooçš„ir_sequenceå¯¹åº”è®°å½•çš„id),12345678910ä¸¾ä¸ªä¾‹å­,æ€»è´¦å‡­è¯åºåˆ—å·ç»´æŠ¤åœ¨å…¬å¸çš„é…ç½®é¡µç­¾ä¸Š: 1. æˆ‘ä»¬å–åˆ°è¿™ä¸ªåºåˆ—çš„ID: sequence_id = self.env[&apos;res.company&apos;].sequence.id 2. æ‹¼æŽ¥è¿™ä¸ªåºåˆ—åœ¨pg_classä¸­çš„åºåˆ—è®°å½•åç§°: seq_name = &apos;ir_sequence_%03d&apos; % (sequence_id,) 3. æˆ‘ä»¬å°è¯•ç€åŽ»ä¿®æ”¹å¯¹åº”çš„åºåˆ—å¼€å§‹åºå·: next_number = 10 &quot;ALTER SEQUENCE %s RESTART WITH %d;&quot; % (seq_name,next_number)]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odoo-å®‰è£…]]></title>
    <url>%2Fbbs.github.io%2FOdoo-%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[å®‰è£…Odoo10 - Windows - Install1.èŽ·å–githubæºç ï¼Œ(githubåœ°å€) 2.é€šè¿‡cloneèŽ·å–v10æºä»£ç git clone https://www.github.com/odoo/odoo â€“depth 1 â€“branch 10.0 â€“single-branch odoo10 å®‰è£…åº•å±‚åº”ç”¨ä¾èµ–èµ„æºï¼š 1234567891011121314151617181920212223242526272829303132331.å®‰è£…pythonçŽ¯å¢ƒè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨annacoda3(https://www.anaconda.com/download/#windows)ï¼Œç”±äºŽodoo10ä»¥ä¸Šç‰ˆæœ¬éœ€è¦ä½¿ç”¨python3.xï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨condaæŒ‡ä»¤åˆ›å»ºpython3.6è™šæ‹ŸçŽ¯å¢ƒ &apos;conda create -n py3od11 python=3.6&apos;2. é…ç½®çŽ¯å¢ƒå˜é‡path(å’Œpythonçš„ä¸€æ · åªä¸è¿‡éœ€è¦é…ç½®çš„æ—¶åˆ›å»ºçš„è™šæ‹ŸçŽ¯å¢ƒçš„è·¯å¾„ ä¾‹å¦‚:D:\Anaconda3\envs\py3od11 å’Œ D:\Anaconda3\envs\py3od11\Script)3. pythonæ”¹å ä¾‹å¦‚è™šæ‹ŸçŽ¯å¢ƒè·¯å¾„ä¸­ï¼šD:\Anaconda3\envs\py3od11 python.exe -&gt; python36.extpythonw.exe -&gt; pythonw36.ext 4. å®‰è£…åŸºç¡€å¿…è¦æ’ä»¶ python36 -m pip install [package_name] Package_nameåŒ…æœ‰å¦‚ä¸‹: pypiwin32 Pillow-3.4.2-cp36-cp36m-win_amd64.whl gevent-1.2.2-cp36-cp36m-win_amd64.whl lxml-3.8.0-cp36-cp36m-win_amd64.whl psutil-5.3.1-cp36-cp36m-win_amd64.whl psycopg2-2.7.3-cp36-cp36m-win_amd64.whl pyldap-2.4.37-cp36-cp36m-win_amd64.whl reportlab-3.4.0-cp36-cp36m-win_amd64.whl 5. å®‰è£…odooå¿…è¦æ’ä»¶ åˆ‡æ¢åˆ°odooç›®å½•ä¸‹ï¼Œä½ ä¼šå‘çŽ°æœ‰ä¸€ä¸ªrequirements.txtçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å®‰è£…å®ƒå†…éƒ¨çš„æ’ä»¶: python36 -m pip install -r requirements.txt python36 -m pip install -U werkzeug å®‰è£…å¿…è¦çš„pdfæ‰“å°æ’ä»¶ ä¸‹è½½wkhtmltopdf ä¸‹è½½ä¸€ä¸ªpostgresqlçš„navicatæ•°æ®åº“ç®¡ç†è½¯ä»¶. ä¸‹è½½å¹¶å®‰è£…postgres10.å¯¹åº”pgçš„ç«¯å£è¯·é…ç½®å¥½ ä¾‹å¦‚(ç«¯å£ï¼š5432 å¯†ç ï¼š123456)Postgresä¸‹è½½è·¯å¾„ 7.åœ¨navicatä¸­è¿žæŽ¥postgresqlæ•°æ®åº“. 8.åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰createdbæƒé™çš„ç”¨æˆ· ä¾‹å¦‚ï¼šuser:odoo pwd:odoo å¯åŠ¨æœåŠ¡é€šè¿‡CMDåˆ‡æ¢åˆ°odooçš„æ–‡ä»¶ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ python36 odoo-bin -sè¿™æ ·ä¼šåœ¨odooçš„æ–‡ä»¶ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªodoo.confçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œé…ç½®ä¿®æ”¹. å®‰è£…å®Œæˆè¿è¡Œæ—¶å‘çŽ°ç¼ºå°‘ä¸€äº›å…³ç³»åŒ… è™½ç„¶è¿™äº›åœ¨requirements.txtåŒ…å«ï¼Œä½†æ˜¯ä¼°è®¡æ‰¹é‡æ²¡å®‰è£…æˆåŠŸ æˆ‘ä»¬æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹python36 -m pip install åŒ…å å¦‚ï¼šPyPDF2 passlib python-dateutil pywin32 PyYAML Pillow jinja2 html2text num2wordsç­‰ï¼Œè¿è¡Œæ—¶æŠ¥é”™ç¼ºä»€ä¹ˆå°±è£…ä»€ä¹ˆ ä¸ºäº†å¯åŠ¨èƒ½å¤Ÿè¿žæŽ¥åˆ°å¯¹åº”çš„æ•°æ®åº“ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹å¯¹åº”çš„odoo.confæ–‡ä»¶ä¾‹å¦‚æˆ‘ä¿®æ”¹åŽçš„é…ç½®æ–‡ä»¶:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556[options]addons_path = D:\odoo11plus\odoo\odoo\addons,D:\odoo11plus\odoo\addonsadmin_passwd = handhandcsv_internal_sep = ,data_dir = D:\odoo11plus\data_dirdb_host = localhostdb_maxconn = 64db_name = Falsedb_password = odoodb_port = 5432db_sslmode = preferdb_template = template1db_user = odoodemo = &#123;&#125;email_from = Falsegeoip_database = /usr/share/GeoIP/GeoLite2-City.mmdbhttp_enable = Truehttp_interface = http_port = 8069import_partial = limit_memory_hard = Nonelimit_memory_soft = Nonelimit_request = Nonelimit_time_cpu = Nonelimit_time_real = Nonelimit_time_real_cron = Nonelist_db = Truelog_db = Falselog_db_level = warninglog_handler = :INFOlog_level = infologfile = Falselogrotate = Falselongpolling_port = 8072max_cron_threads = 2osv_memory_age_limit = 1.0osv_memory_count_limit = Falsepg_path = C:\Program Files\PostgreSQL\10\binpidfile = Falseproxy_mode = Falsereportgz = Falseserver_wide_modules = websmtp_password = Falsesmtp_port = 25smtp_server = localhostsmtp_ssl = Falsesmtp_user = Falsesyslog = Falsetest_commit = Falsetest_enable = Falsetest_file = Falsetest_report_directory = Falsetranslate_modules = [&apos;all&apos;]unaccent = Falsewithout_demo = Falseworkers = None å¿…é¡»é…ç½®çš„æœ‰: admin_passwdã€db_hostã€db_portã€db_userã€db_passwordã€pg_path å…¶ä»–çš„æŒ‰æƒ…å†µé…ç½®. 12.ä¸ºäº†å·¥ç¨‹åŒ–æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨pycharmä¸­ç›´æŽ¥åˆ›å»ºä¸€ä¸ªå¯åŠ¨é¡¹: ä¹‹åŽæˆ‘ä»¬åªéœ€è¦åœ¨pycharmé€‰æ‹©å¯¹åº”çš„å¯åŠ¨æœåŠ¡ï¼Œç‚¹å‡»è¿è¡Œ å°±å¯ä»¥ä½¿ç”¨odooæœåŠ¡äº†ã€‚ å‰å°åˆ›å»ºæ•°æ®åº“å¹¶ç™»å…¥: åŽè®°ï¼šå†™çš„ç²—ç³™ï¼ŒåŽæœŸç»§ç»­ç»†åŒ–ï¼Œå¦å¤–å¦‚æžœæŠŠpythonçš„åº”ç”¨æ”¾åˆ°dockeré•œåƒä¸­ï¼Œåœ¨æœ¬åœ°ä½¿ç”¨postgresql10çš„æ•°æ®åº“æœåŠ¡ï¼Œé‚£æ ·çš„å¼€å‘åº”è¯¥æ˜¯æœ€é€‚åˆçš„ï¼Œä»¥åŽè¡¥å……ã€‚ Odoo12å®‰è£…è¡¥å……é¦–å…ˆOdoo12é‡‡ç”¨çš„ä¸å†æ˜¯lessçš„cssåŠ è½½ï¼Œè€Œæ˜¯node-sassc.pip3 install libsass Odooå®‰è£…å®å˜± æ¨¡å—ä¸Šdemoå°±ç®—æƒ³ä½¿ç”¨demoæ–‡ä»¶ï¼Œä¹Ÿé…ç½®äº† ç»“æžœå®‰è£…åŽå°±æ˜¯ä¸ç”Ÿæ•ˆ:å› ä¸ºä»Žå‰å°åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitbookä½¿ç”¨]]></title>
    <url>%2Fbbs.github.io%2FGitbook%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨è¯´æ˜Žæ–‡æ¡£å®‰è£…æµç¨‹ é¦–å…ˆåœ¨ä½ çš„æœ¬åœ°éœ€è¦å¦‚ä¸‹è½¯ä»¶ï¼š Git â‘  ã€Gitbook Editor â‘¡ ä¸‹è½½å®‰è£…å®ŒæˆåŽï¼Œé€‰æ‹©ä¸€ä¸ªå¯¹åº”çš„ç›®å½•ï¼ŒèŽ·å–å¯¹åº”ä¹¦ç±: 2.1 WindowsèŽ·å–æ–¹å¼ï¼š &emsp;&emsp;1. é€‰æ‹©ä¸€ä¸ªé€‚å½“çš„ç›®å½•ï¼Œé¼ æ ‡ç‚¹å‡»å³é”®ï¼Œé€‰æ‹©[] &emsp;&emsp;2. è¾“å…¥ï¼šgit clone https://rdc.hand-china.com/gitlab/13035/gitbook_test.git 2.2 MacèŽ·å–æ–¹å¼ï¼š &emsp;&emsp;æ‰“å¼€ç»ˆç«¯ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ç›®å½•ï¼Œæ¯”å¦‚ /User/ç”¨æˆ·å/XXX,åœ¨ç»ˆç«¯æ‰§è¡Œï¼š &emsp;&emsp;&emsp;&emsp; 1. cd /User/ç”¨æˆ·å/XX &emsp;&emsp;&emsp;&emsp; 2. git clone https://rdc.hand-china.com/gitlab/13035/gitbook_test.git &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦è¾“å…¥è´¦æˆ·/å¯†ç (å·¥å·/handhand) ä½¿ç”¨æµç¨‹ &emsp;&emsp;æ­£åœ¨åŠªåŠ›ç¼–å†™ä¸­â€¦ èµ„æº&emsp;&emsp;â‘ &emsp;Gitä¸‹è½½åœ°å€ &emsp;&emsp;â‘¡&emsp;Gitbook Editorä¸‹è½½åœ°å€ &emsp;&emsp;&emsp;&emsp;ä¸Šè¿°è¿žæŽ¥å¦‚æžœä¸‹è½½é€Ÿåº¦æ…¢è¯·ç§»æ­¥: &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Git-Windows64ä½ &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Git-MacOSæš‚æ—¶æœªä¸Šä¼  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Gitbook Editor - Windows64ä½ &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Gitbook Editor - MacOSä½]]></content>
      <categories>
        <category>Gitbook</category>
      </categories>
      <tags>
        <tag>Gitbook</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UbuntuåŸºç¡€]]></title>
    <url>%2Fbbs.github.io%2FUbuntu%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[æ–°å®‰è£…ubuntuæ‰“å¼€22ç«¯å£12345678910sshæ“ä½œæ—¶å‡ºçŽ°ï¼š ...Connection failed. Type `help&apos; to learn how to use Xshell prompt.é¦–å…ˆå…³é—­ubuntué˜²ç«å¢™ï¼š sudo ufw disableç„¶åŽå®‰è£…OpenSSH: sudo apt-get install openssh-server openssh-client(å¦‚æžœæ²¡è”ç½‘ é¦–å…ˆå¤„ç†ç½‘ç»œè¿žæŽ¥)ç½‘ç»œæµ‹è¯•ï¼š netstat -tnlçŽ°åœ¨å¯ä»¥ç›´æŽ¥ä½¿ç”¨sshè¿žæŽ¥äº† Ubuntu vi/vim ä¸Šä¸‹å·¦å³åˆ é™¤æŒ‰é”®è½¬è¯‘æˆABCD1234è§£å†³åŠžæ³•: echo &quot;set nocp&quot; &gt;&gt; ~/.vimrc source ~/.vimrc Ubuntu æ¢æº123456789101112131415161718192021222324252627282930313233æ¢æˆå›½å†…æœ€å¿«çš„é˜¿é‡Œäº‘æº ç¬¬ä¸€æ­¥ï¼šå¤‡ä»½åŽŸæ¥çš„æºæ–‡ä»¶ cd /etc/apt/ ç„¶åŽä¼šæ˜¾ç¤ºä¸‹é¢çš„æºæ–‡ä»¶sources.list è¾“å…¥å‘½ä»¤ sudo cp sources.list sources.list.bak å°±æ˜¯å°†sources.listå¤‡ä»½åˆ°sources.list.bakç¬¬äºŒæ­¥ï¼šæ›¿æ¢æº é˜¿é‡Œäº‘æºçš„æ–‡ä»¶ vi sources.list åˆ é™¤åŽŸå†…å®¹ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼ˆè¾“å…¥ä¹‹å‰æ¢rootæƒé™ï¼Œè¾“å…¥å‘½ä»¤sudo suï¼‰ deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse ##æµ‹è¯•ç‰ˆæº deb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse # æºç  deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse ##æµ‹è¯•ç‰ˆæº deb-src http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse # Canonical åˆä½œä¼™ä¼´å’Œé™„åŠ  deb http://archive.canonical.com/ubuntu/ xenial partner deb http://extras.ubuntu.com/ubuntu/ xenial mainç¬¬ä¸‰æ­¥ï¼šæ›´æ–°æºå’Œè½¯ä»¶ sudo apt-get update æ›´æ–°æº sudo apt-get upgrade æ›´æ–°è½¯ä»¶ Ubuntu TomcatTomcatå¸è½½å¹¶å®‰è£…]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odooæ•°æ®æ ¡éªŒçº¦æŸ]]></title>
    <url>%2Fbbs.github.io%2FOdoo%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E7%BA%A6%E6%9D%9F%2F</url>
    <content type="text"><![CDATA[Odooçš„æ•°æ®çº¦æŸæŠ›é”™å¯åˆ†ä¸ºä¸‰ç§æƒ…å†µ æ‰‹åŠ¨åˆ¤æ–­çº¦æŸ(create/write) ORMå±‚çº¦æŸ(api constrains) æ•°æ®åº“å±‚çº¦æŸ(_sql_constrains) ä»Žç³»ç»Ÿçš„æ‰§è¡Œä¼˜å…ˆçº§æ¥çœ‹ï¼Œé¡ºåºä¾æ¬¡æ˜¯ æ‰‹åŠ¨åˆ¤æ–­çº¦æŸ -&gt; æ•°æ®åº“å±‚çº¦æŸ -&gt; ORMå±‚çº¦æŸ ä¸‰ç§çº¦æŸå°½é‡ä¸è¦åŒæ—¶ä½¿ç”¨ï¼Œæ¯”å¦‚å¦‚æžœä½¿ç”¨äº†æ‰‹åŠ¨åˆ¤æ–­çº¦æŸï¼Œå¦‚æžœå†æ·»åŠ äº†ORMå±‚çº¦æŸï¼Œé€šè¿‡ORMçš„searchæˆ–è€…search_countæ–¹æ³•æœå‡ºæ¥çš„æ•°æ®æ˜¯åŒ…å«å½“å‰æ­£åœ¨åˆ›å»ºå¹¶æ²¡æœ‰å†™å…¥æ•°æ®åº“çš„æ•°æ®é¡¹ã€‚ 1.æ‰‹åŠ¨çº¦æŸï¼šé€šè¿‡åœ¨modelçš„createæˆ–è€…writeæ–¹æ³•ä¸­å†™æ¡ä»¶åˆ¤æ–­ï¼Œç„¶åŽæ‰‹åŠ¨raiseä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥æŽ§åˆ¶æŠ›é”™é€»è¾‘å’ŒæŠ›é”™æç¤ºä¿¡æ¯ï¼Œæ¯”è¾ƒå¸¸è§ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¹Ÿè®¸create/writeçš„valsä¸­éœ€è¦æ ¡éªŒçš„å­—æ®µä¸ä¸€å®šæ˜¯å¿…è¾“çš„ï¼Œä¹Ÿå°±æ˜¯è¯´valsä¸­å¯èƒ½ç¼ºå¤±éœ€è¦æ ¡éªŒçš„å€¼ï¼Œè¿™ä¸ªä¸€å®šå¥½è€ƒè™‘åˆ°ã€‚ 2.ORMå±‚çº¦æŸï¼šé€šè¿‡å†™@api.constrainsæ–¹æ³•ï¼Œæ¥å¯¹æ•°æ®åº“åˆ—è¿›è¡Œè¿›è¡Œåˆ¤æ–­ï¼Œå¯ä»¥æŽ§åˆ¶åˆ¤æ–­é€»è¾‘å’ŒæŠ›é”™ã€‚ä½†éœ€è¦æ³¨æ„ï¼Œå¦‚æžœæ–°åˆ›å»ºå•æ®çš„è¯ï¼Œè¿™ä¸ªåœ°æ–¹é€šè¿‡ORMä¼šæœç´¢åˆ°æ–°åˆ›å»ºçš„è®°å½•å¯¹è±¡ï¼Œå¯èƒ½éœ€æ±‚æ˜¯æ ¡éªŒå”¯ä¸€æ€§ï¼Œè¿™æ ·çš„è¯ORMæ–¹æ³•æ¥åˆ¤æ–­å°±ä¸æ˜¯é€‚ç”¨äº†ã€‚è€Œä¸”åªæœ‰å•æ®æ‰§è¡Œcreateå’Œwriteæ–¹æ³•åŽï¼Œæ‰èƒ½èµ°æ­¤æ ¡éªŒapi. 3.æ•°æ®åº“å±‚çº¦æŸï¼šç›´æŽ¥ç»™æ•°æ®åº“è¡¨æ·»åŠ çº¦æŸæ¡ä»¶ï¼Œæ— è®ºæ˜¯å‰å°è¿˜æ˜¯åŽå°åˆ›å»ºæ•°æ®éƒ½ä¼šè¢«æ ¡éªŒï¼Œç¼ºç‚¹æ˜¯ä¸èƒ½ä¸èƒ½è‡ªå·±å†™å¤æ‚çš„åˆ¤æ–­é€»è¾‘ï¼Œè€Œä¸”æŠ›é”™ä¼šæŠ›ç³»ç»Ÿçš„keyé‡å¤é”™è¯¯ä¹‹ç±»çš„ã€‚ 1-2æŠ›é”™ï¼š3æŠ›é”™ï¼š]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Odooå¼€å‘æ¨¡æ¿]]></title>
    <url>%2Fbbs.github.io%2FOdoo%E5%BC%80%E5%8F%91%E6%A8%A1%E6%9D%BF%2F</url>
    <content type="text"><![CDATA[åŸºç¡€modelå¼€å‘æ¨¡æ¿ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980# -*- coding: utf-8 -*-#################################################################### æ–‡ä»¶åŠŸèƒ½æè¿°###################################################################from openerp import models, fields, api, _from openerp.exceptions import ValidationErrorimport openerp.addons.decimal_precision as dpfrom openerp.tools import float_compare&lt;!--more--&gt;class XXX(models.Model): """ æ¨¡åž‹åŸºæœ¬æè¿°ï¼š XXX è¯¦ç»†æè¿°ï¼š XXX å±žæ€§è¯´æ˜Žï¼š XXX """ _name = 'XXX' _description = 'Model Description' # _rec_name = 'id' # Declaring Functions Begin # Declaring Functions End # åç§° name = fields.Char(string='Name', help='Name', default='/') # My Functions Begin @api.model def check_all(self, rec, vals, type, *args, **kwargs): """ æ¨¡åž‹çš„é€šç”¨æ ¡éªŒæ–¹æ³• (ValidationError) :param rec: è®°å½•å¯¹è±¡ :param vals: create/writeçš„æ•°æ®å­—å…¸ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«çš„æ–¹æ³•ä½¿ç”¨çš„å­—å…¸ :param type: åŒºåˆ†æ£€æŸ¥é€»è¾‘å—çš„æ ‡å¿— :param args: åŠ¨æ€æµ®åŠ¨å‚æ•° :param kwargs: åŠ¨æ€æŒ‡å®šå‚æ•° :return: æ”¯æŒè¿”å›žå€¼,å¦‚æžœéœ€è¦ä¸€å®šçš„è¿”å›žå€¼è¯·è‡ªè¡Œå†™return """ if type == 'create': pass elif type == 'write': pass elif type == 'other1': pass # return XXX elif type == 'other2': pass else: pass # My Functions End # ORM Functions Begin @api.model def create(self, vals): # å½“å‰çš„å„ç§æ ¡éªŒ self.check_all(rec=self, vals=vals, type='create') return super(XXX, self).create(vals) @api.multi def write(self, vals): for rec in self: # å½“å‰çš„å„ç§æ ¡éªŒ self.check_all(rec=rec, vals=vals, type='write') return super(XXX, self).write(vals) @api.multi def unlink(self): for rec in self: pass return super(XXX, self).unlink() # ORM Functions End # Button Functions Begin # Button Functions End åŸºç¡€XMLè§†å›¾å¼€å‘æ¨¡æ¿ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;openerp&gt; &lt;data&gt; &lt;!--treeè§†å›¾--&gt; &lt;record id="XXX_tree" model="ir.ui.view"&gt; &lt;field name="name"&gt;XXX_tree&lt;/field&gt; &lt;field name="model"&gt;XXX&lt;/field&gt; &lt;field name="arch" type="xml"&gt; &lt;tree&gt; &lt;field name="name"/&gt; &lt;/tree&gt; &lt;/field&gt; &lt;/record&gt; &lt;!--Formè§†å›¾--&gt; &lt;record id="XXX_form" model="ir.ui.view"&gt; &lt;field name="name"&gt;XXX_form&lt;/field&gt; &lt;field name="model"&gt;XXX&lt;/field&gt; &lt;field name="arch" type="xml"&gt; &lt;form&gt; &lt;header&gt; &lt;!--&lt;button name="button_xxx" type="object" string="Button Name XXX"--&gt; &lt;!--class="oe_highlight" attrs="&#123;'invisible':[('state','not in',('created'))]&#125;"/&gt;--&gt; &lt;!--&lt;field name="state" widget="statusbar" statusbar_visible="created,done"/&gt;--&gt; &lt;/header&gt; &lt;sheet&gt; &lt;!--&lt;div class="oe_right"--&gt; &lt;!--style="width:30%;padding-top:15px;display:inline;height:58px;position:relative"--&gt; &lt;!--name="buttons"&gt;--&gt; &lt;!--ç•Œé¢è·³è½¬é“¾æŽ¥æŒ‰é’®--&gt; &lt;!--&lt;button type="object" style="position:absolute;right:80px" name="action_button_name_XXX"--&gt; &lt;!--class="oe_stat_button" icon="fa-credit-card"&gt;--&gt; &lt;!--é“¾æŽ¥å•æ®æ•°é‡ è‡ªå·±åŽ»pyé‡Œå†™ä¸€ä¸ªå­—æ®µç”¨computeå½¢å¼åŠ¨æ€è®¡ç®—--&gt; &lt;!--&lt;field name="num" string='Number' widget="statinfo"/&gt;--&gt; &lt;!--&lt;/button&gt;--&gt; &lt;!--&lt;/div&gt;--&gt; &lt;group&gt; &lt;group&gt; &lt;field name="name" invisible="1"/&gt; &lt;!--&lt;field name="Many2one_field"--&gt; &lt;!--attrs="&#123;'required':True,'readonly':[('state','!=','created')]&#125;"--&gt; &lt;!--options="&#123;'no_create_edit':'1','no_create':'1','no_open':'1'&#125;"/&gt;--&gt; &lt;/group&gt; &lt;group&gt; &lt;!-- ... --&gt; &lt;/group&gt; &lt;/group&gt; &lt;notebook&gt; &lt;page string="Page Name"&gt; &lt;field name="XXX_ids" options="&#123;'no_edit_no_open':True&#125;" attrs="&#123;'invisible':[('state','not in',('created'))]&#125;"&gt; &lt;tree editable="bottom/top" default_order="code" &gt; &lt;field name="code" /&gt; &lt;field name="name" /&gt; &lt;field name="xxx_id" options="&#123;'no_create_edit':'1','no_create':'1','no_open':'1'&#125;" attrs="&#123;'invisible':[('state','not in',('created'))]&#125;"/&gt; &lt;/tree&gt; &lt;/field&gt; &lt;/page&gt; &lt;!--&lt;page&gt;...&lt;/page&gt;--&gt; &lt;/notebook&gt; &lt;/sheet&gt; &lt;/form&gt; &lt;/field&gt; &lt;/record&gt; &lt;!--æœç´¢è§†å›¾--&gt; &lt;record id="XXX_search" model="ir.ui.view"&gt; &lt;field name="name"&gt;XXX_search&lt;/field&gt; &lt;field name="model"&gt;XXX&lt;/field&gt; &lt;field name="priority"&gt;10&lt;/field&gt; &lt;field name="arch" type="xml"&gt; &lt;search string="Search Name"&gt; &lt;field name="name"/&gt; &lt;filter name="XXX" icon="terp-camera_test" string="XXX" domain="[('XXX','=','XXX')]" help="XXX"/&gt;&lt;separator/&gt; &lt;group expand="0" string="Group By"&gt; &lt;filter string="XXX" icon="terp-folder-orange" domain="[]" context="&#123;'group_by':'fields_name_XXX'&#125;"/&gt; &lt;/group&gt; &lt;/search&gt; &lt;/field&gt; &lt;/record&gt; &lt;!--åŠ¨ä½œ--&gt; &lt;record model="ir.actions.act_window" id="XXX_action"&gt; &lt;field name="name"&gt;XXX Action&lt;/field&gt; &lt;field name="res_model"&gt;XXX&lt;/field&gt; &lt;field name="view_type"&gt;form&lt;/field&gt; &lt;field name="view_mode"&gt;tree,form&lt;/field&gt; &lt;/record&gt; &lt;!--é¡¶çº§èœå•--&gt; &lt;menuitem id="top_XXX_menu" name="XXX" sequence="10" /&gt; &lt;!--äºŒçº§èœå•--&gt; &lt;menuitem id="XXX2_menu" name="XXX" parent="top_XXX_menu" sequence="10" /&gt; &lt;!--ä¸‰çº§èœå•--&gt; &lt;menuitem id="XXX3_menu" name="XXX3 Menu" parent="XXX2_menu" sequence="10" action="XXX_action"/&gt; &lt;/data&gt;&lt;/openerp&gt;]]></content>
      <categories>
        <category>Odoo</category>
      </categories>
      <tags>
        <tag>Odoo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fbbs.github.io%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
  <entry>
    <title><![CDATA[æ­å»ºGithub Page + Hexoåšå®¢ç³»ç»Ÿ]]></title>
    <url>%2Fbbs.github.io%2FHexo%2BGituhb%E9%A1%B5%E9%9D%A2%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[è™½ç„¶ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æƒ³æŠŠè‡ªå·±çš„å‚è€ƒåŽ†ç¨‹è´´å‡ºæ¥ï¼Œç»™è‡ªå·±åšä¸€ä¸ªå‚è€ƒ å‚è€ƒæ–‡æ¡£ï¼šä½¿ç”¨Hexo+Githubä¸€æ­¥æ­¥æ­å»ºå±žäºŽè‡ªå·±çš„åšå®¢ï¼ˆåŸºç¡€ï¼‰ è¿™é‡Œæˆ‘åªå†™ç®€è¦çš„è¿‡ç¨‹(Macbook Pro) è®¿é—®githubåˆ›å»ºä¸€ä¸ªæ–°çš„åšå®¢ä»“åº“ï¼Œä»“åº“åç§°è§„æ ¼ XXX.github.io æå‰å®‰è£…å¥½npm,ä½¿ç”¨npmå®‰è£…hexo: npm install hexo -g å®‰è£…å®ŒæˆåŽï¼Œä½¿ç”¨hexo -væ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ å®‰è£…éœ€è¦çš„ç»„å»º npm install åŠ è½½hexo: hexo g å¯åŠ¨è®¿é—®æœåŠ¡: hexo s é€šè¿‡http://localhost:4000è®¿é—®æœ¬åœ°Hexoåšå®¢(æ³¨æ„å¦‚æžœå¯åŠ¨æœåŠ¡åŽï¼Œç•Œé¢è½¬åœˆï¼Œè¯´æ˜Ž4000ç«¯å£è¢«å ç”¨ï¼Œæˆ‘ä»¬æ¢4001ç«¯å£å°è¯•è®¿é—®http://localhost:4001) è®¿é—®æˆåŠŸåŽï¼Œhexoç»‘å®šgithub page: gité…ç½®ï¼š git config â€“global user.name â€˜Nameâ€™ git config â€“global user.email &#39;Mail@163.comâ€˜ github ä¸Šä¼ å…¬é’¥(å‚è€ƒ) è¿›å…¥hexoçš„_config.ymlæ–‡ä»¶ç»‘å®šgithub page:æ»‘åŠ¨åˆ°æ–‡æ¡£æœ«å°¾ï¼Œæ·»åŠ ï¼š deploy: type: git repository: git@github.com:XXX/XXX.github.io.git(å·¥ç¨‹è·¯å¾„) branch: master æ‰©å±•ä¸€æ­¥ä¸Šä¼ åšå®¢å†…å®¹åˆ°githubä»“åº“çš„ç»„å»ºï¼šnpm install hexo-deployer-git â€“save åˆ›å»ºåšå®¢ï¼šhexo new post â€œåšå®¢åç§°â€ åšå®¢å†…å®¹éƒ½åœ¨source/_post/ç›®å½•ä¸­ï¼šåŒæ­¥æ›´æ–°åˆ°github pageï¼šhexo d -g çŽ°åœ¨è®¿é—®ï¼šhttps://githubè´¦æˆ·.github.io/åšå®¢å·¥ç¨‹åç§°/ å¯èƒ½å‘çŽ°ç•Œé¢ä¸Šçš„æ ·å¼éƒ½å¤±æ•ˆäº†ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®šä¹‰_configçš„urlï¼š 1234url: https://XXX.github.io/XXX.github.io/root: /XXX.github.io/permalink: :year/:month/:day/:title/permalink_defaults: å†æ¬¡è®¿é—®åŽæˆåŠŸã€‚ é™„ï¼š &emsp;&emsp;â‘  _configå‚æ•°è¯´æ˜Ž &emsp;&emsp;]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
